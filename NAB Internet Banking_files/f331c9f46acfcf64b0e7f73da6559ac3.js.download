Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var decision_status="";if(window.digitalData.event[window.digitalData.event.length-1].data.decision_status&&window.digitalData.event[window.digitalData.event.length-1].data.decision_status.length>0)decision_status=window.digitalData.event[window.digitalData.event.length-1].data.decision_status;
else decision_status=window.digitalData.event[window.digitalData.event.length-1].data.transaction_result;if(/^(APPROVE)$/.test(decision_status))return"Appoved";else if(/^((NON_)?BUREAU_DECLINE)$/.test(decision_status))return"Declined";else if(/^(REFER|DEDUPE|CUSTOMER_TO_CONTACT)$/.test(decision_status))return"Referred";else return""}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - PL Facebook Decision",
collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62375"})},62375)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - view-chat-history",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event124";_events+="event124";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","view-chat-history",tempObject)})},3785220,695639);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - share-content",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.prop65=function anon(){var shareAction="share:";if(typeof s.parseDataLayer("social-network")!="undefined")shareAction+=s.parseDataLayer("social-network")+":";else shareAction+="unknown social network:";if(typeof s.parseDataLayer("name")!="undefined")shareAction+=
s.parseDataLayer("name");else shareAction+="unknown name";return shareAction}.call(this);s.eVar65="D\x3dc65";s.events="event43";s.linkTrackVars+=s.linkTrackVars.slice(-1)!=","?",":"";s.linkTrackVars+="prop65,eVar65,events";s.linkTrackEvents+=s.linkTrackEvents.slice(-1)!=","?",":"";s.linkTrackEvents+="event43";s.tl(this,"o","share content");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},1457853,395882);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-checklist",function(){s.events="event1,event11";s.pageName=function anon(){if(typeof s.parseDataLayer("page")!="undefined")return digitalData.page.pageInfo.pageName+":"+s.parseDataLayer("page").replace(/\s+/g,"-").toLowerCase();if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName")if(typeof s.parseDataLayer("section")!=
"undefined")return s.parseDataLayer("pageName")+":"+s.parseDataLayer("section");else return s.parseDataLayer("pageName");else return"unknown page name"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);
s.eVar65=function anon(){try{if(/small business lending (broker )?online application/i.test(s_parseDataLayer("name"))){var customAction="";var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")customAction=s_parseDataLayer("name")+" : Quote Id pre-populated";else customAction=s_parseDataLayer("name")+" : Quote Id empty";return customAction}else return""}catch(err){return""}}.call(this);s.eVar86=function anon(){try{if(s_parseDataLayer("name")==
"Small Business Lending Online Application"||s_parseDataLayer("name")=="Small Business Lending Broker Online Application"){var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")return quoteId;else return""}else return""}catch(err){return""}}.call(this);s.eVar24="Website";s.products=function anon(){try{var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=
0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!=="")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";return window.sc_products}else return""}catch(err){return""}}.call(this);s.linkTrackVars="pageName,eVar23,events,eVar65,eVar86,eVar24,products";
s.linkTrackEvents="event1,event11";s.t()})},3803131,482915);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - modal-survey-completed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";_linkTrackVars+="events,eVar46,prop9,eVar9";_linkTrackEvents+="event28";var _events="event28";var tempObject={};tempObject.linkTrackVars=
_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46=function anon(){var productName="";try{productName=digitalData.event[0].data.products[0]["productName"]}catch(err){}var surveyID=s.parseDataLayer("surveyID");var surveyResponse=s.parseDataLayer("surveyResponse");var pageName="";try{pageName=digitalData.page.pageInfo.pageName}catch(err){}if(typeof productName!="undefined"&&productName!="")return surveyID+"|"+productName+"|"+surveyResponse;else if(pageName!=
"")return surveyID+"|"+pageName+"|"+surveyResponse;else return surveyID+"|"+surveyResponse}.call(this);tempObject.prop9="D\x3dpageName";tempObject.eVar9="D\x3dpageName";s.tl(this,"o","modal-survey-completed",tempObject)})},2715901,574171);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-retrieved",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event113"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event113"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,
"o","Form Retieved");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628009,685948);
Bootstrapper.bindDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - application-form2-start",function(){setCSArtificialPageview("form-started")});Bootstrapper.ensEvent.add("ensEvent - prospect-form-start",function(){setCSArtificialPageview("form-started")});Bootstrapper.ensEvent.add("ensEvent - form - form-progressed",function(){setCSArtificialPageview("form-progressed")});Bootstrapper.ensEvent.add("ensEvent - form - form-checklist",
function(){setCSArtificialPageview("form-checklist")});Bootstrapper.ensEvent.add("ensEvent - form - form-decision",function(){setCSArtificialPageview("form-decision")});Bootstrapper.ensEvent.add("ensEvent - form - submit-application",function(){setCSArtificialPageview("submit-application")});Bootstrapper.ensEvent.add("ensEvent - application-form2-complete",function(){setCSArtificialPageview("form-completed")});Bootstrapper.ensEvent.add("ensEvent - prospect-form-complete",function(){setCSArtificialPageview("form-completed")});
Bootstrapper.ensEvent.add("ensEvent - calc-started",function(){setCSArtificialPageview("calc-started")});Bootstrapper.ensEvent.add("ensEvent - calc-progressed",function(){console.log("{ ensEvent - calc-progressed }");setCSArtificialPageview("calc-progressed")});Bootstrapper.ensEvent.add("ensEvent - calc-insight",function(){console.log("{ ensEvent - calc-insight }");setCSArtificialPageview("calc-insight")});Bootstrapper.ensEvent.add("ensEvent - calc-completed",function(){setCSArtificialPageview("calc-completed")});
Bootstrapper.ensEvent.add("ensEvent - calculator-tab-changed",function(){setCSArtificialPageview("calculator-tab-changed")});setQuerySymbol=function(){try{var qp="?";if(location.href.indexOf("#?")!=-1)qp="\x26";else if(location.search.indexOf("?")!=-1)qp="\x26";else if(location.href.indexOf("?")!=-1)qp="\x26";return qp}catch(err){}};setCSArtificialPageview=function(action){try{var q="";if(/ciatesting/i.test(document.location.search))console.log("setCSArtificialPageview - action: ",action);if(typeof window.digitalData!==
"undefined"){if(typeof window.digitalData.page.pageInfo.pageName!=="undefined")window._uxa.push(["setCustomVariable",1,"Page Name",digitalData.page.pageInfo.pageName+window.getNABPageNameWithSection()]);if(typeof window.digitalData.page.pageInfo.siteSection!=="undefined")window._uxa.push(["setCustomVariable",2,"Site Section",window.digitalData.page.pageInfo.siteSection]);if(typeof window.digitalData.page.pageInfo.siteSubSection!=="undefined")window._uxa.push(["setCustomVariable",3,"Site Subsection",
window.digitalData.page.pageInfo.siteSubSection])}if(action==="form-started"||action==="form-progressed"||action==="form-decision"||action==="submit-application"||action==="form-completed"||action==="form-checklist"||action==="calc-started"||action==="calc-progressed"||action==="calculator-used"||action==="calculator-tab-changed")q=setQuerySymbol()+action+"\x3d"+window.getNABPageNameWithSection().replace(/:/g,"").replace(/'/g,"");else if(action==="calc-completed"||action==="calc-insight"){var dataValue=
s.parseDataLayer("calcInsight")!=="unknown calcInsight"?s.parseDataLayer("calcInsight"):window.getNABPageNameWithSection();q=setQuerySymbol()+action+"\x3d"+dataValue.replace(/\s/g,"-").replace(/:/g,"").replace(/'/g,"")}window._uxa.push(["setQuery",window.location.search+q]);if(/ciatesting/i.test(document.location.search))console.log("setQuery: ",window.location.search+q);window._uxa.push(["trackPageview",window.location.pathname+window.location.hash.replace("#","?__")]);if(/ciatesting/i.test(document.location.search))console.log("trackPageview: ",
window.location.pathname+window.location.hash.replace("#","?__"))}catch(err){}}},3960553,664338);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(/ciatesting/i.test(document.location.href))console.log("Load IB event processor.");window._NABTags={};window._NABTags.debug=[];_NABTags.intialiseOverride=function(){if(typeof window.digitalData.page.pageInfo.customValues=="undefined")window.digitalData.page.pageInfo.customValues=[];window.digitalData.page.pageInfo.customValues["formErrorTracking"]="enabled";if(typeof window.digitalData!=
"undefined"){if(typeof window.digitalData.event=="undefined")window.digitalData.event=[];window.digitalData.event.push=function(){if(/ciatesting/i.test(document.location.href)){var debug=[];debug["eventType"]=arguments[0].eventType;debug["raw_args"]=arguments;_NABTags.debug.push(debug)}var applicationForms=["Personal Loan Online Application"];var result=Array.prototype.push.apply(this,arguments);try{if(result>0&&arguments!=undefined&&arguments.length>0&&arguments[0].eventType&&arguments[0].data){var eventType=
arguments[0].eventType;var data=arguments[0].data;var action=false;if(arguments[0].data.action!="undefined")action=arguments[0].data.action;switch(eventType){case "form-interacted":var formName=arguments[0].data.name;var formType="prospect-form";for(var app=0;app<applicationForms.length;app++)if(applicationForms[app]==formName){formType="application-form";break}var thisFormType=s_parseDataLayer("formType");if(thisFormType=="application")formType="application-form";var formStyle="section";if(typeof window.digitalData.page.pageInfo.customValues==
"undefined")window.digitalData.page.pageInfo.customValues=[];if(window.digitalData.page.pageInfo.customValues["formType"]=="application-form2")formType="application-form";if(window.digitalData.page.pageInfo.customValues["formStyle"]=="page")formStyle="page";if(arguments[0].data.formType=="application-form2")formType="application-form";if(arguments[0].data.formType=="prospect")formType="prospect-form";window.digitalData.page.pageInfo.customValues["formErrorTracking"]="enabled";if(typeof formName==
"string")if(typeof window.digitalData.components!="undefined")window.digitalData.components.formName=formName;if(formName=="Transaction and Savings Online Application"||formName=="Personal Loan Online Application"||formName=="Online Credit Card Application"||formName=="Term Deposit Online Application")if(action=="form-completed")action="end-of-form-reached";switch(action){case "form-started":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");if(formType=="application-form"){if(formName==
"Online Credit Card Application")s_parseDataLayerSetCustomValue("creditLimitDefault","maximum");Bootstrapper.ensEvent.trigger("ensEvent - application-form2-start")}else{s.eVar23="";Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-start")}s_sendTealiumTrackEvent(arguments[0]);break;case "form-completed":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");if(typeof window.sc_formComplete=="undefined"){if(formType=="application-form")Bootstrapper.ensEvent.trigger("ensEvent - application-form2-complete");
else Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-complete");s_sendTealiumTrackEvent(arguments[0])}window.sc_formComplete=true;break;case "ssc-authentication":Bootstrapper.ensEvent.trigger("ensEvent - form - ssc-authentication");s_sendTealiumTrackEvent(arguments[0]);break;case "form-checklist":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - form-checklist");s_sendTealiumTrackEvent(arguments[0]);break;case "form-progressed":if(typeof s!==
"undefined"&&typeof s.clearVars!=="undefined"){s.events="";s.products=""}if(formStyle!="section")break;if(/(business|financial) snapshot|migrant banking/i.test(formName)===true||/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name"))){var currentPageCount=1;if(s_parseDataLayerCustomValueExists("pageCounter")===false){s_parseDataLayerSetCustomValue("pageCounter",currentPageCount);break}else{currentPageCount=s_parseDataLayerCustomValue("pageCounter");
if(currentPageCount){currentPageCount++;s_parseDataLayerSetCustomValue("pageCounter",currentPageCount)}}}Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");if(/REA Home Loan Conditional Approval/i.test(s_parseDataLayer("name")))Bootstrapper.ensEvent.trigger("ensEvent - rea - form-page-loaded");s_sendTealiumTrackEvent(arguments[0]);break;case "form-page-loaded":if(formStyle=="page"){var pageId=_NABTags.s_parseDataLayer("pageId");
_NABTags.legacyFormPageLoadedEvent(formName,pageId,formType)}s_sendTealiumTrackEvent(arguments[0]);break;case "submit-application":Bootstrapper.ensEvent.trigger("ensEvent - form - submit-application");s_clearProductsVar();if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID");s_sendTealiumTrackEvent(arguments[0]);break;case "form-decision":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - form-decision");s_clearProductsVar();
if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID");s_sendTealiumTrackEvent(arguments[0]);break;case "end-of-form-reached":digitalData.event[digitalData.event.length-1].data.pageId="thankyou";Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - end-of-form");s_sendTealiumTrackEvent(arguments[0]);break;case "form-initial-assessment":Bootstrapper.ensEvent.trigger("ensEvent - form - initial-assessment");s_clearProductsVar();
if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID");break;case "form-hard-stop":Bootstrapper.ensEvent.trigger("ensEvent - form - application-hard-stop");s_clearProductsVar();break;case "field-started":Bootstrapper.ensEvent.trigger("ensEvent - form - field-started");break;case "field-completed":var fieldId=_NABTags.s_parseDataLayer("fieldId");var fieldValue=_NABTags.s_parseDataLayer("fieldValue");if(formName=="Term Deposit Online Application"){if(fieldId=="loanAmount")s_parseDataLayerSetCustomValue("depositAmount",
fieldValue);if(fieldId=="tdNtbTerm")s_parseDataLayerSetCustomValue("depositTerm",fieldValue);if(fieldId=="tdExistTerm")s_parseDataLayerSetCustomValue("depositTerm",fieldValue)}if(formName=="Online Credit Card Application"&&fieldId=="yourNewCard-creditCardLimit")s_parseDataLayerSetCustomValue("creditLimitDefault","maximum");if(formName=="Online Credit Card Application"&&(fieldId=="wCard-preferredCreditCardLimit"||fieldId=="preferredCreditLimit"))s_parseDataLayerSetCustomValue("creditLimitDefault",
"user defined");var fieldCapture=s_parseDataLayerCustomValueStartsWith("fieldCapture");if(typeof fieldCapture=="string")Bootstrapper.ensEvent.trigger("ensEvent - field-capture");if(s_parseDataLayerCustomValueExists(fieldId)===true)Bootstrapper.ensEvent.trigger("ensEvent - form - field-capture");_NABTags.legacyDemographicHandle(formName,fieldId,fieldValue);if(formName=="Transaction and Savings Online Application"||formName=="Small Business Lending Online Application"||formName=="Personal Loan Online Application"||
formName=="Small Business Lending Online Application"||formName=="Banker Appointment Booking Tool"||formName=="Merchant Onboarding"||formName=="Online Credit Card Application"||formName=="Business Transaction Account Online Application"||formName=="Merchant Call Back"||formName=="Business Banking Call Back Request"){if(fieldId=="personalDetails-email"||fieldId=="email"||fieldId=="Email"||fieldId=="contactDetails-emailAddress"||fieldId=="yourDetailsColumn-emailAddress")_NABTags.s_hash(fieldValue.trim().toLowerCase()).then((hashedEmail)=>
sessionStorage.setItem("n_w_aol",hashedEmail));if(fieldId=="personalDetails-phone"||fieldId=="mobileNumber"||fieldId=="Phone number"||fieldId=="contactDetails-mobileNumber"||fieldId=="mobile"||fieldId=="contactNumber"||fieldId=="ourDetailsColumn-contactNumber"){var phoneE164=fieldValue.replace(/^0/,"61").replace(/\s+/g,"");_NABTags.s_hash(phoneE164).then((hashedPhone)=>sessionStorage.setItem("n_w_agb",hashedPhone))}}break;case "error-displayed":var triggerError=true;if(s_parseDataLayerCustomValueExists("errorCounter")===
false)s_parseDataLayerSetCustomValue("errorCounter",1);else{var currentErrorCount=s_parseDataLayerCustomValue("errorCounter");if(currentErrorCount){currentErrorCount++;s_parseDataLayerSetCustomValue("errorCounter",currentErrorCount)}if(currentErrorCount&&currentErrorCount>50)triggerError=false}if(triggerError===true){if(typeof s!=="undefined"&&typeof s.clearVars!=="undefined"){s.list2="";s.prop19="";s.prop60="";s.prop69="";s.eVar69="";s.eVar4=""}Bootstrapper.ensEvent.trigger("ensEvent - form - error-displayed")}break;
case "product-started":if(typeof digitalData!="undefined"&&typeof digitalData.product=="undefined"){digitalData.product=[];var eventProduct=s_parseDataLayer("product");if(typeof eventProduct.products=="object"&&typeof eventProduct.products[0]=="object")for(i=0;i<eventProduct.products.length;i++)digitalData.product.push(eventProduct.products[i])}Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.trigger("ensEvent - form - product-started");s_clearProductsVar()});break;case "product-added":var products=
_NABTags.s_parseDataLayer("product");if(typeof digitalData!="undefined"&&typeof digitalData.product=="object"&&typeof digitalData.product[0]=="object"&&typeof products=="object")digitalData.product.push(products);s_sendTealiumTrackEvent(arguments[0]);break;case "products-selected":Bootstrapper.ensEvent.trigger("ensEvent - form - products-selected");s_sendTealiumTrackEvent(arguments[0]);break;case "product-removed":Bootstrapper.ensEvent.trigger("ensEvent - form - product-removed");s_sendTealiumTrackEvent(arguments[0]);
break;case "lead-completed":Bootstrapper.ensEvent.trigger("ensEvent - lead-submitted");s_clearProductsVar();s_sendTealiumTrackEvent(arguments[0]);break;case "form-saved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-saved");s_parseDataLayerSetCustomValue("formSaved",true);s_sendTealiumTrackEvent(arguments[0]);break;case "form-retrieved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-retrieved");s_sendTealiumTrackEvent(arguments[0]);break;case "form-resumed":Bootstrapper.ensEvent.trigger("ensEvent - form - form-resumed");
s_sendTealiumTrackEvent(arguments[0]);break;case "form-cancelled":Bootstrapper.ensEvent.trigger("ensEvent - form - form-cancelled");s_sendTealiumTrackEvent(arguments[0]);break;case "form-review":Bootstrapper.ensEvent.trigger("ensEvent - form - form-review");s_sendTealiumTrackEvent(arguments[0]);break;case "form-withdrawn":Bootstrapper.ensEvent.trigger("ensEvent - form - form-withdrawn");s_sendTealiumTrackEvent(arguments[0]);break;case "form-accepted":Bootstrapper.ensEvent.trigger("ensEvent - form - form-accepted");
s_sendTealiumTrackEvent(arguments[0]);break;case "documents-uploaded":var documents=s_parseDataLayer("documents");if(documents!="unknown documents")for(var i=0;i<documents.length;i++){Bootstrapper.ensEvent.trigger("ensEvent - form - document-uploaded");window.digitalData.event[window.digitalData.event.length-1].data.documents[i].adobeSent=1}break;case "entity-added":Bootstrapper.ensEvent.trigger("ensEvent - form - entity-added");break;case "button-selected":try{var buttonLabel=_NABTags.s_parseDataLayer("buttonLabel");
var buttonName=_NABTags.s_parseDataLayer("buttonName");var buttonFormName=_NABTags.s_parseDataLayer("name");digitalData.event[digitalData.event.length-1].data.name="button-selected:"+buttonFormName+":"+buttonName+":"+buttonLabel}catch(e){console.log("button-selected:"+e)}Bootstrapper.ensEvent.trigger("ensEvent - user_action");break;case "user-question":try{var question=_NABTags.s_parseDataLayer("question");var answer=_NABTags.s_parseDataLayer("answer");digitalData.event[digitalData.event.length-1].data.name=
"user-question:"+question+":"+answer}catch(e){console.log("user-question:"+e)}Bootstrapper.ensEvent.trigger("ensEvent - user_action");break;case "expand-accordion":Bootstrapper.ensEvent.trigger("ensEvent - user_action");break;case "tab-clicked":Bootstrapper.ensEvent.trigger("ensEvent - form - tab-clicked");break;case "request-callback-start":Bootstrapper.ensEvent.trigger("ensEvent - form - request-callback-start");break;case "request-callback-complete":Bootstrapper.ensEvent.trigger("ensEvent - form - request-callback-complete");
break;case "form-dialog-saved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-dialog-saved");break;case "form-dialog-saved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-dialog-saved");break;case "accounting-data-progressed":Bootstrapper.ensEvent.trigger("accounting-data-progressed");break;case "accounting-data-error":Bootstrapper.ensEvent.trigger("ensEvent - form - accounting-data-error");s.clearVars("eVar55");s.clearVars("prop19");break;case "file-upload-success":Bootstrapper.ensEvent.trigger("ensEvent - form - file-upload-success");
break;case "file-upload-error":Bootstrapper.ensEvent.trigger("ensEvent - form - file-upload-error");break;case "eidv-decision":Bootstrapper.ensEvent.trigger("ensEvent - eidv-decision");break}break;case "page-view":Bootstrapper.ensEvent.trigger("ensEvent - page-view");break;case "user-moment":Bootstrapper.ensEvent.trigger("ensEvent - user-moment");break;case "calc-interacted":var calcInsightCapture=false;switch(action){case "calc-started":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");
Bootstrapper.ensEvent.trigger("ensEvent - calc-started");digitalData.page.pageInfo.customValues.calcStarted="yes";s_sendTealiumTrackEvent(arguments[0]);break;case "calc-progressed":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-progressed");s_sendTealiumTrackEvent(arguments[0]);break;case "calc-completed":case "calc-complete":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-completed");
s_sendTealiumTrackEvent(arguments[0]);if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "calc-insight":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-insight");s_sendTealiumTrackEvent(arguments[0]);if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "error-displayed":Bootstrapper.ensEvent.trigger("ensEvent - calc-error-displayed");break;case "product-selected":Bootstrapper.ensEvent.trigger("ensEvent - calc-product-selected");
s_sendTealiumTrackEvent(arguments[0]);break;case "products-viewed":Bootstrapper.ensEvent.trigger("ensEvent - calc-product-viewed");s_sendTealiumTrackEvent(arguments[0]);break;case "product-removed":Bootstrapper.ensEvent.trigger("ensEvent - calc-product-removed");s_sendTealiumTrackEvent(arguments[0]);break;case "field-started":Bootstrapper.ensEvent.trigger("ensEvent - form - field-started");break}try{if(typeof digitalData.page.pageInfo.customValues.calcStarted=="undefined")if(s_parseDataLayerActionExists("calc-interacted",
"calc-started")===true){Bootstrapper.ensEvent.trigger("ensEvent - calc-started");try{digitalData.page.pageInfo.customValues.calcStarted="yes"}catch(e){}}}catch(e){}if(action==="field-completed"){var fieldId=s_parseDataLayer("fieldId");if(s_parseDataLayerCustomValueExists(fieldId)===true)Bootstrapper.ensEvent.trigger("ensEvent - calc-insight")}break;case "miniapp-loaded":var miniApp=s_parseDataLayer("name");var pageViewSent=false;if(miniApp=="NAB Identity component"&&digitalData.page.pageInfo.pageName==
"nab:online-forms:application-tracker"){digitalData.event[digitalData.event.length-1].data.pageName=digitalData.page.pageInfo.pageName+":nab-identity-form";if(pageViewSent==false){if(typeof window.digitalData.components!="undefined")window.digitalData.components.formName="Application Tracker";Bootstrapper.ensEvent.trigger("ensEvent - page-view - nab-identity component");pageViewSent=true}}break;case "self-service-start":Bootstrapper.ensEvent.trigger("ensEvent - self-service-start");break;case "prospect-form-start":var curr_prospect_form_start=
s.parseDataLayer("name");if(typeof window.s.omn_prev_prospect_form_start!="undefined"&&typeof curr_prospect_form_start!="undefined")if(window.s.omn_prev_prospect_form_start!=curr_prospect_form_start)delete window.s.omn_prospect_form_start;if(typeof window.s.omn_prospect_form_start=="undefined"||typeof window.s.omn_prospect_form_start==null){Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-start");window.s.omn_prev_prospect_form_start=s.parseDataLayer("name");window.s.omn_prospect_form_start=
"true"}break;case "prospect-form-complete":Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-complete");break;case "self-service-complete":Bootstrapper.ensEvent.trigger("ensEvent - self-service-complete");break;case "masthead-click":case "banner-click":try{var runMastheadClickEvent=false;if(typeof s_parseDataLayer("name")!="undefined"&&s_parseDataLayer("name")!="unknown name")runMastheadClickEvent=true;else if(typeof s_parseDataLayer("internalPromo")!="undefined"&&s_parseDataLayer("internalPromo")!=
"unknown internalPromo"&&s_parseDataLayer("internalPromo")!=window._NABTags.prevMhInternalPromo){runMastheadClickEvent=true;if(/ciatesting/i.test(document.location.href))console.log("prevMhInternalPromo: ",window._NABTags.prevMhInternalPromo,", current internal promo: ",s_parseDataLayer("internalPromo"));window._NABTags.prevMhInternalPromo=s_parseDataLayer("internalPromo")}if(runMastheadClickEvent===true){Bootstrapper.ensEvent.trigger("ensEvent - masthead-click");s_sendTealiumTrackEvent(arguments[0])}}catch(err){}break;
case "masthead-click-target":Bootstrapper.ensEvent.trigger("ensEvent - masthead-click");break;case "logout-click":Bootstrapper.ensEvent.trigger("ensEvent - logout-click");break;case "logout-click-target":Bootstrapper.ensEvent.trigger("ensEvent - logout-click");break;case "click_track":if(typeof s_parseDataLayer("name")!="undefined"&&s_parseDataLayer("name")!="unknown name")Bootstrapper.ensEvent.trigger("ensEvent - click_track");break;case "user_action":case "user-action":case "user-question":case "tab-clicked":case "digitalData:user_action":case "credit_cards_compared-category-clicked":case "credit_cards_compared-category-clicked":Bootstrapper.ensEvent.trigger("ensEvent - user_action");
break;case "product-selected":Bootstrapper.ensEvent.trigger("ensEvent - product-selected");break;case "product-recommended":Bootstrapper.ensEvent.trigger("ensEvent - product-recommended");break;case "credit_cards_compared":Bootstrapper.ensEvent.trigger("ensEvent - credit_cards_compared");break;case "click-to-call":Bootstrapper.ensEvent.trigger("ensEvent - click-to-call");break;case "expand-accordion":Bootstrapper.ensEvent.trigger("ensEvent - expand-accordion");break;case "calculator-tab-changed":Bootstrapper.ensEvent.trigger("ensEvent - calculator-tab-changed");
break;case "document-download":Bootstrapper.ensEvent.trigger("ensEvent - document-download");break;case "start-live-chat":Bootstrapper.ensEvent.trigger("ensEvent - start-live-chat");break;case "calculator-used":var curr_calc=s_parseDataLayer("name");if(typeof window.omn_prev_calc!="undefined"&&typeof curr_calc!="undefined")if(window.omn_prev_calc!=curr_calc)delete window.omn_calc_used;if(typeof window.omn_calc_used=="undefined"||typeof window.omn_calc_used==null){Bootstrapper.ensEvent.trigger("ensEvent - calculator-used");
window.omn_prev_calc=s_parseDataLayer("name");window.omn_calc_used="true";s_sendTealiumTrackEvent(arguments[0])}break;case "video-played":case "video-play":Bootstrapper.ensEvent.trigger("ensEvent - video-played");break;case "menu-tab-clicked":Bootstrapper.ensEvent.trigger("ensEvent - menu-tab-clicked");break;case "sticky-nav-clicked":Bootstrapper.ensEvent.trigger("ensEvent - sticky-nav-clicked");break;case "banner-sort":Bootstrapper.ensEvent.trigger("ensEvent - banner-sort");break;case "continue-reading":Bootstrapper.ensEvent.trigger("ensEvent - continue-reading");
break;case "read-more":Bootstrapper.ensEvent.trigger("ensEvent - read-more");break;case "track_clicked":Bootstrapper.ensEvent.trigger("ensEvent - track_clicked");break;case "mega-menu-click":Bootstrapper.ensEvent.trigger("ensEvent - mega-menu-click");break;case "breadcrumb-clicked":Bootstrapper.ensEvent.trigger("ensEvent - breadcrumb-clicked");break;case "live-nation-registration":Bootstrapper.ensEvent.trigger("ensEvent - live-nation-registration");break;case "search-click":Bootstrapper.ensEvent.trigger("ensEvent - search-click");
if(window.location.hostname=="propertyinsights.nab.com.au")s_sendTealiumTrackEvent(arguments[0]);if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "search-comparison":Bootstrapper.ensEvent.trigger("ensEvent - search-comparison");if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "search":if(action=="search")Bootstrapper.ensEvent.trigger("ensEvent - context-search");else if(action=="show-more"||action=="showMore")Bootstrapper.ensEvent.trigger("ensEvent - context-search-show-more");
break;case "track-scroll-as-page":case "view-module":Bootstrapper.ensEvent.trigger("ensEvent - trackPage");break;case "share-content":Bootstrapper.ensEvent.trigger("ensEvent - share-content");break;case "chatwidget-used":var widget_type=s_parseDataLayer("participantType");if(/ciatesting/i.test(document.location.href))console.log("Chat widget used listener triggered");if(typeof s_parseDataLayerSetCustomValue=="function"){if(/ciatesting/i.test(document.location.href))console.log("About to set chatWidgetUsedtriggered custom value - Action: "+
action+" | Widget: "+widget_type);s_parseDataLayerSetCustomValue("chatWidgetUsedtriggered",true)}switch(action){case "chatwidget-available":if(typeof widget_type!="undefined"&&widget_type=="Agent")Bootstrapper.ensEvent.trigger("ensEvent - livechat-offered");else if(typeof widget_type!="undefined"&&widget_type=="Chatbot")Bootstrapper.ensEvent.trigger("ensEvent - virtual-assistant-offered");break;case "virtual-assistant-initiated":case "chatwidget-opened":Bootstrapper.ensEvent.trigger("ensEvent - virtual-assistant-initiated");
break;case "chatwidget-resumed":Bootstrapper.ensEvent.trigger("ensEvent - chatwidget-resumed");break;case "virtual-assistant-response":case "message-received":if(s_parseDataLayerCustomValue("virtual-assistant")===false){Bootstrapper.ensEvent.trigger("ensEvent - virtual-assistant-response");s_parseDataLayerSetCustomValue("virtual-assistant","true")}break;case "livechat-offered":Bootstrapper.ensEvent.trigger("ensEvent - livechat-offered");break;case "livechat-started":Bootstrapper.ensEvent.trigger("ensEvent - livechat-started");
break;case "chatwidget-ended":Bootstrapper.ensEvent.trigger("ensEvent - chatwidget-ended");break;case "survey-presented":Bootstrapper.ensEvent.trigger("ensEvent - survey-presented");break;case "survey-completed":Bootstrapper.ensEvent.trigger("ensEvent - survey-completed");break;case "welcome-screen|shown":Bootstrapper.ensEvent.trigger("ensEvent - welcome-screen|shown");break;case "welcome-screen|clicked":Bootstrapper.ensEvent.trigger("ensEvent - welcome-screen|clicked");break;case "chat-input-error":Bootstrapper.ensEvent.trigger("ensEvent - chat-input-error");
break;case "chat-system-error":Bootstrapper.ensEvent.trigger("ensEvent - chat-system-error");break;case "view-chat-history":Bootstrapper.ensEvent.trigger("ensEvent - view-chat-history");break;case "proactive-offer|clicked":Bootstrapper.ensEvent.trigger("ensEvent - proactive-offer|clicked");break;case "proactive-offer|closed":Bootstrapper.ensEvent.trigger("ensEvent - proactive-offer|closed");break;case "quick-reply-clicked":Bootstrapper.ensEvent.trigger("ensEvent - quick-reply-clicked");break;case "carousel-clicked":Bootstrapper.ensEvent.trigger("ensEvent - carousel-clicked");
break;case "button-clicked":Bootstrapper.ensEvent.trigger("ensEvent - button-clicked");break}break;case "modal-survey-used":switch(action){case "modal-survey-presented":Bootstrapper.ensEvent.trigger("ensEvent - modal-survey-presented");break;case "modal-survey-completed":Bootstrapper.ensEvent.trigger("ensEvent - modal-survey-completed");break}break;case "digitalData:spa-action":case "spa-action":switch(action){case "page-displayed":s_pageOverrideUtil(s_parseDataLayer("page"));Bootstrapper.ensEvent.trigger("ensEvent - spa-page-displayed");
break;default:if(/ciatesting/i.test(document.location.href))console.log("spa-action event action: "+action+" is not configured")}break;case "digitalData:scroll-action":case "scroll-action":switch(action){case "horizontal-start":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-start");break;case "horizontal-midpoint":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-midpoint");break;case "horizontal-complete":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-complete");break}break;
case "page-engagement":switch(action){case "vertical-scroll-start":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-start");break;case "vertical-scroll-centre":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-midpoint");break;case "vertical-scroll-end":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-complete");break}break;case "internal-ad-click":s_runComponentClickEvent("ensEvent - internal-ad-click");break;case "internal-ad-dismissed":s_runComponentClickEvent("ensEvent - internal-ad-dismissed");
break;case "internal-ad-load":s_runComponentClickEvent("ensEvent - internal-ad-load");break;case "feature-content-click":s_runComponentClickEvent("ensEvent - feature-content-click");break;case "link-card-click":s_runComponentClickEvent("ensEvent - link-card-click");break;case "error-displayed":Bootstrapper.ensEvent.trigger("ensEvent - calc-error-displayed");break}}else;}catch(e){}}}};Bootstrapper.bindPageSpecificCompletion(function(){if(typeof digitalData!="undefined"&&digitalData.event.length>0&&
typeof digitalData.event[0].eventType!="undefined"&&digitalData.event[0].eventType=="chatwidget-used")if(typeof s_parseDataLayerCustomValueExists=="function"&&s_parseDataLayerCustomValueExists("chatWidgetUsedtriggered")===false)try{if(/ciatesting/i.test(document.location.href))console.log("About to re-push chat widget used event");var localEventHistory=digitalData.event;digitalData.event.push(localEventHistory[0]);s_parseDataLayerSetCustomValue("chatWidgetUsedtriggered",true)}catch(err){}else if(/ciatesting/i.test(document.location.href))console.log("Chat widget used custom value already exists")});
_NABTags.s_parseDataLayer=function(obj_name){if(typeof obj_name=="undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-1];if(lastEventObject.data[obj_name])return lastEventObject.data[obj_name];else return"unknown "+obj_name}else return"unknown "+obj_name}catch(err){return"unknown "+obj_name}};_NABTags.processServerSideEvents=function(){try{if(typeof digitalData!="undefined"&&
typeof digitalData.event!="undefined"){var serverSideEvents=[];for(var i=0;i<digitalData.event.length;i++)serverSideEvents.push(digitalData.event[i]);if(/ciatesting/i.test(document.location.href))console.log("serverside events:",serverSideEvents);for(var j=0;j<serverSideEvents.length;j++)digitalData.event.push(serverSideEvents[j])}}catch(e){}};_NABTags.legacyDemographicHandle=function(formName,fieldId,fieldValue){try{switch(fieldId){case "title":var title=fieldValue;if(title=="Mr")window.sc_applicant_gender=
"M";else if(title!="Dr"&&!/[0-9]+/.test(title))window.sc_applicant_gender="F";break;case "gender":window.sc_applicant_gender=fieldValue;break;case "dob":var dob=fieldValue;var yob=dob.substr(dob.length-4);var current_year=(new Date).getFullYear();window.sc_applicant_age=parseInt(current_year)-parseInt(yob);try{if(window.sc_applicant_age>120){var dateFormatCheck1=dob.substr(4,2);var dateFormatCheck2=dob.substr(0,4);if(parseInt(dateFormatCheck1)<13&&parseInt(dateFormatCheck2)>1900){yob=dob.substr(0,
4);window.sc_applicant_age=parseInt(current_year)-parseInt(yob)}}}catch(err){}break;case "isNABCust":var customer_status=fieldValue;if(customer_status=="Yes")window.sc_customer_type="Existing";else if(customer_status=="No")window.sc_customer_type="New";break;case "existingCustomer":var customer_status=fieldValue;if(customer_status=="Yes")window.sc_customer_type="Existing";else if(customer_status=="No")window.sc_customer_type="New";break;case "state":window.sc_applicant_state=fieldValue;break;case "zipCode":window.sc_applicant_postcode=
fieldValue;break;case "applicantNumber":var applicantNumber=fieldValue;if(/1/i.test(applicantNumber))window.sc_applicant_liability="sole";else if(/2/i.test(applicantNumber))window.sc_applicant_liability="joint";break;case "maxCreditLimit":if(fieldValue=="false")s_parseDataLayerSetCustomValue("creditLimitDefault","user defined");else s_parseDataLayerSetCustomValue("creditLimitDefault","maximum");break;case "existingNCB":window.sc_existing_nbc=fieldValue;break}if(/(business|financial) snapshot/i.test(formName)){if(fieldId==
"productOrService")s_parseDataLayerSetCustomValue("productOrServiceAdd",fieldValue);if(fieldId=="contactAcceptance")s_parseDataLayerSetCustomValue("contactAcceptance",formName+":Banker Contact Consent:"+fieldValue)}if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(formName))if(s_parseDataLayer("fieldId")=="propertyReason")s_parseDataLayerSetCustomValue("propertyReason",fieldValue);if(/REA Home Loan Conditional Approval/i.test(formName))if(fieldId=="consent")s_parseDataLayerSetCustomValue("dataSharingConsent",
"REA Home Loan Conditional Approval:Data Sharing Consent:"+fieldValue)}catch(e){console.log("_NABTags.legacyDemographicHandle Error:"+e)}};_NABTags.legacyFormPageLoadedEvent=function(formName,pageId,formType){if(pageId=="processing"&&(/cc application|online credit card application/i.test(formName)||/credit card application/i.test(formName))&&!/pre-approved/i.test(formName));else if(/(business|financial) snapshot|migrant banking/i.test(formName)&&s_parseDataLayerCustomValueExists("formStartTime")===
true)Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");else if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(formName)&&s_parseDataLayerCustomValueExists("formStartTime")===true)if(/pgExit|pgNext/i.test(pageId)){if(/pgNext/i.test(pageId))Bootstrapper.ensEvent.trigger("ensEvent - form - initial-assessment");s_clearProductsVar();if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID")}else if(/pgPersonalDetails/i.test(pageId)){if(/sectionNextStepsModal/i.test(s_parseDataLayer("sectionId")))Bootstrapper.ensEvent.trigger("ensEvent - form - initial-assessment");
else Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");s_clearProductsVar();if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID")}else if(/pgOutcome/i.test(s_parseDataLayer("pageId"))){if(formType=="application-form")Bootstrapper.ensEvent.trigger("ensEvent - application-form2-complete");else Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-complete");window.sc_formComplete=true;s_clearProductsVar()}else Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");
else Bootstrapper.ensEvent.trigger("ensEvent - form - form-page-loaded");if(/REA Home Loan Conditional Approval/i.test(formName)&&/pgExit/i.test(pageId))Bootstrapper.ensEvent.trigger("ensEvent - rea - form-completed");else if(/REA Home Loan Conditional Approval/i.test(formName)&&!/outcome/i.test(pageId))Bootstrapper.ensEvent.trigger("ensEvent - rea - form-page-loaded")};if(/ciatesting/i.test(document.location.href))console.log("call intialiseOverride()");if(!/www.nab.com.au\/analytics\/personal\/insurance/.test(document.location.href))_NABTags.intialiseOverride();
if(/nabhive.nab.com.au/.test(document.location.href)||/sit-merchanthub.ewcs.extnp.nab.com.au/.test(document.location.href)||/dev-merchanthub.ewcs.extnp.nab.com.au/.test(document.location.href))window.setTimeout(_NABTags.processServerSideEvents,2E3);window._NABTags.loadScriptAsync=function(src,callback){if(/ciatesting/i.test(document.location.href))console.log("window._NABTags.loadScriptAsync fired");var s,r,t;r=false;s=document.createElement("script");s.type="text/javascript";s.async=true;s.src=src;
s.onload=s.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState=="complete")){r=true;callback()}};document.getElementsByTagName("body")[0].appendChild(s)};window._NABTags.loadImgPixelAsync=function(src,callback){if(/ciatesting/i.test(document.location.href))console.log("window._NABTags.loadImgPixelAsync fired");var s,r,t;r=false;s=document.createElement("img");s.src=src;s.style.display="none";s.onload=s.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState=="complete")){r=
true;if(typeof callback!="undefined")callback()}};document.getElementsByTagName("body")[0].appendChild(s)};window._NABTags.loadIFrameAsync=function(src,callback){if(/ciatesting/i.test(document.location.href))console.log("window._NABTags.loadIFrameAsync fired");var r,t;r=false;var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src=src;frame.onload=frame.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState==
"complete")){r=true;callback()}};document.getElementsByTagName("body")[0].appendChild(frame)};s_parseDataLayer=function(obj_name){if(typeof obj_name=="undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-1];if(lastEventObject.data[obj_name])return lastEventObject.data[obj_name];else return"unknown "+obj_name}else return"unknown "+obj_name}catch(err){return"unknown "+obj_name}};
s_parseDataLayerCustomValueExists=function(customValue){try{if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"&&typeof digitalData.page.pageInfo.customValues[customValue]!="undefined")return true;else return false}catch(err){return false}};s_parseDataLayerFieldCompletedValue=function(fieldId){if(typeof fieldId=="undefined")return false;try{if(typeof digitalData!="undefined"&&
typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined"&&digitalData.event[i].data.action=="field-completed")if(typeof digitalData.event[i].data.fieldId!="undefined"&&digitalData.event[i].data.fieldId==fieldId)if(typeof digitalData.event[i].data.fieldValue!="undefined")return digitalData.event[i].data.fieldValue;return false}else return false}catch(err){return false}};
s_parseDataLayerCustomValue=function(key){if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined")if(typeof digitalData.page.pageInfo.customValues[key]!="undefined")return digitalData.page.pageInfo.customValues[key];else return false};s_parseDataLayerSetCustomValue=function(key,value){try{if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!=
"undefined"){if(typeof digitalData.page.pageInfo.customValues=="undefined")digitalData.page.pageInfo.customValues={};digitalData.page.pageInfo.customValues[key]=value;return true}else return false}catch(err){return false}};s_parseDataLayerUserObj=function(eventType,objName,action){if(typeof objName=="undefined"||typeof eventType=="undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!=
"undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)if(typeof digitalData.event[i].data.user!="undefined")return digitalData.event[i].data.user[objName];else return false;return false}else return false}catch(err){return false}};s_parseDataLayerProductId=function(eventType,action,getMultipleProducts){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!=
"undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)if(typeof digitalData.event[i].data.products!="undefined")if(typeof digitalData.event[i].data.products[0]["product-id"]!="undefined")if(typeof getMultipleProducts!="undefined"){var multipleProductsString="";for(var j=0;j<digitalData.event[i].data.products.length;j++)if(typeof digitalData.event[i].data.products[j]["product-id"]!="undefined")multipleProductsString+=",;"+digitalData.event[i].data.products[j]["product-id"];
return multipleProductsString.substring(2)}else return digitalData.event[i].data.products[0]["product-id"];else if(typeof digitalData.event[i].data.products[0]["subProduct"]!="undefined")return digitalData.event[i].data.products[0]["subProduct"];else return false;else return false;return false}else return false}catch(err){console.log(err);return false}};s_parseDataLayerAmountAppliedFor=function(eventType,action){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=
digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)if(typeof digitalData.event[i].data.transaction_amount_applied_for!="undefined")return digitalData.event[i].data.transaction_amount_applied_for;else return false;return false}else return false}catch(err){return false}};s_clearProductsVar=function(){if(typeof s!="undefined"&&
typeof s.products!="undefined")s.products=""};s_parseDataLayerCustomValueStartsWith=function(customValue){try{if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"){for(var obj in digitalData.page.pageInfo.customValues)if(obj.indexOf(customValue)>-1)return obj;return false}else return false}catch(err){return false}};s_runComponentClickEvent=function(ensEvent){try{var runClickEvent=
false;if(typeof s.parseDataLayer("internalPromo")!="undefined"&&s.parseDataLayer("internalPromo")!="unknown internalPromo")runClickEvent=true;if(runClickEvent===true)Bootstrapper.ensEvent.trigger(ensEvent)}catch(err){}};s_parseDataLayerActionExists=function(eventType,action){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!=
"undefined")if(action==digitalData.event[i].data.action)return true;return false}else return false}catch(err){return false}};s_pageOverrideUtil=function(pageName){if(pageName.indexOf("nab-kiosk:personal:")>-1)digitalData.event[digitalData.event.length-1].data.page=pageName.replace("nab-kiosk:personal:","nab-kiosk:personal-banking:");else if(pageName.indexOf("nab-kiosk:business:")>-1)digitalData.event[digitalData.event.length-1].data.page=pageName.replace("nab-kiosk:business:","nab-kiosk:business-banking:")};
s_sendTealiumTrackEvent=function(dataLayerEventObj){try{var tealium_event="undefined tealium_event";if(typeof dataLayerEventObj.data.action!="undefined")tealium_event=dataLayerEventObj.data.action;else if(typeof dataLayerEventObj.eventType!="undefined")tealium_event=dataLayerEventObj.eventType;var page_type="";var page_prefix=typeof digitalData.page.pageInfo.pageName!="undefined"?digitalData.page.pageInfo.pageName:"undefined page name";var section=typeof dataLayerEventObj.data.section!="undefined"?
":"+dataLayerEventObj.data.section.replace(/\s+/g,"-").toLowerCase():"";var form_name="";if(typeof dataLayerEventObj.eventType!="undefined"&&dataLayerEventObj.eventType=="form-interacted"&&typeof dataLayerEventObj.data.name!="undefined")form_name=dataLayerEventObj.data.name;var name="";if(typeof dataLayerEventObj.data.name!="undefined"&&form_name=="")name=dataLayerEventObj.data.name;var product_name=[];var product_id=[];if(typeof dataLayerEventObj.data.products=="object")for(var i=0;i<dataLayerEventObj.data.products.length;i++){if(dataLayerEventObj.data.products[i]["product-name"]!=
"undefined")product_name.push(dataLayerEventObj.data.products[i]["product-name"]);if(dataLayerEventObj.data.products[i]["product-id"]!="undefined")product_id.push(dataLayerEventObj.data.products[i]["product-id"])}var tealiumObj={"tealium_event":tealium_event,"page_name":page_prefix+section};if(form_name!="")tealiumObj.form_name=form_name;if(name!="")tealiumObj.name=name;if(product_name.length>0)tealiumObj.product_name=product_name;if(product_id.length>0)tealiumObj.product_id=product_id;if(typeof dataLayerEventObj.data.transaction_result!=
"undefined")tealiumObj.transaction_result=dataLayerEventObj.data.transaction_result;if(typeof dataLayerEventObj.data.application_id!="undefined")tealiumObj.application_id=dataLayerEventObj.data.application_id;if(form_name=="Transaction and Savings Online Application"||form_name=="Online Credit Card Application"){var phoneSha264=sessionStorage.getItem("n_df_hp");var emailSha264=sessionStorage.getItem("n_df_he");if(typeof phoneSha264=="string")tealiumObj.phoneSha264=phoneSha264;if(typeof emailSha264==
"string")tealiumObj.emailSha264=emailSha264}if(tealium_event=="ssc-authentication")tealiumObj.nab_digital_form_ssc=dataLayerEventObj.data.user.ssc;if(tealium_event=="masthead-click"&&typeof window.s_evar47!="undefined"){tealiumObj.targetExperience=window.s_evar47;tealiumObj.promoCode=s.list1}console.log(tealiumObj);if(typeof utag!="undefined")utag.view(tealiumObj)}catch(e){console.log(e)}};_NABTags.s_hash=function(string){const utf8=(new TextEncoder).encode(string);return crypto.subtle.digest("SHA-256",
utf8).then((hashBuffer)=>{const hashArray=Array.from(new Uint8Array(hashBuffer));const hashHex=hashArray.map((bytes)=>bytes.toString(16).padStart(2,"0")).join("");console.log("Journey 4");return hashHex})};_NABTags.getHashedData=function(){var counti=0;var matchEmail=false;var i=setInterval(function(){try{var tealium_profile=localStorage.getItem("tealium_va_nab_main");if(tealium_profile!=null){var crmHashedEmailMatch=tealium_profile.match(/5175":"([a-z0-9]+)"/);if(crmHashedEmailMatch!=null&&crmHashedEmailMatch[1]!=
"undefined"){localStorage.setItem("n_aol",crmHashedEmailMatch[1]);matchEmail=true;clearInterval(i)}}counti++;if(counti>10){if(matchEmail==false){var hashedEmailDigitalForm=sessionStorage.getItem("n_w_aol");if(hashedEmailDigitalForm!=null)localStorage.setItem("n_aol",hashedEmailDigitalForm)}clearInterval(i)}}catch(e){}},100);var countj=0;var matchPhone=false;var j=setInterval(function(){try{var tealium_profile=localStorage.getItem("tealium_va_nab_main");if(tealium_profile!=null){var crmHashedPhoneMatch=
tealium_profile.match(/5177":"([a-z0-9]+)"/);if(crmHashedPhoneMatch!=null&&crmHashedPhoneMatch[1]!="undefined"){localStorage.setItem("n_agb",crmHashedPhoneMatch[1]);matchPhone=true;clearInterval(j)}}countj++;if(countj>10){if(matchPhone==false){var hashedPhoneDigitalForm=sessionStorage.getItem("n_w_agb");if(hashedPhoneDigitalForm!=null)localStorage.setItem("n_agb",hashedPhoneDigitalForm)}clearInterval(j)}}catch(e){}},100)}},4062639,639227);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - document-uploaded",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var documents=s.parseDataLayer("documents");var secondsToUpload=s.parseDataLayer("secondsToUpload");if(documents!="unknown documents")for(var i=0;i<documents.length;i++){if(documents[i].adobeSent==1)continue;
var status="";if(typeof documents[i].status!="undefined")status=documents[i].status;if(status=="Success"||status=="SUCCESS")return"event118,event116\x3d"+secondsToUpload;else if(status=="Fail"||status=="FAIL"||status=="FAILED")return"event119,event116\x3d"+secondsToUpload;return""}else return""}catch(err){return"error"}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=
as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";if(typeof sBFP=="string")sBFP=sBFP.trim();return sBFP}else""}.call(this);s.eVar55=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var documents=s.parseDataLayer("documents");if(typeof documents!="unknown documents")for(var i=0;i<documents.length;i++){if(documents[i].adobeSent==1)continue;var docType=
documents[i].docType;var fileType=documents[i].fileType;var sectionType=documents[i].sectionType;var uploadType=docType+"|"+fileType+"|"+sectionType+"|"+formName;return uploadType.toLowerCase()}}catch(err){return"unknown upload type"}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,eVar23,eVar55";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=
","+function anon(){try{var documents=s.parseDataLayer("documents");var secondsToUpload=s.parseDataLayer("secondsToUpload");if(documents!="unknown documents")for(var i=0;i<documents.length;i++){if(documents[i].adobeSent==1)continue;var status="";if(typeof documents[i].status!="undefined")status=documents[i].status;if(status=="Success"||status=="SUCCESS")return"event118,event116\x3d"+secondsToUpload;else if(status=="Fail"||status=="FAIL"||status=="FAILED")return"event119,event116\x3d"+secondsToUpload;
return""}else return""}catch(err){return"error"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Enquiry Form");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3528364,682800);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - survey-completed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar46,eVar22,prop22,eVar80,prop80";_linkTrackEvents+="event28";_events+="event28";var tempObject=
{};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46=function anon(){return"Chat Survey|"+s_parseDataLayer("starRating")}.call(this);tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";s.tl(this,"o","survey-completed",tempObject)})},3785216,552771);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - welcome-screen|shown",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event120";_events+="event120";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","welcome-screen|shown",tempObject)})},3783953,695635);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - enquiry-form-started",function(){try{var pageId=s_parseDataLayer("pageId");var pageType="enquiry-form";if(typeof pageId=="string"&&!/unknown pageid/i.test(pageId)&&pageId!="")pageId=pageId.replace("pg","");var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src=
"https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+pageId+"\x26pageType\x3d"+pageType;document.body.appendChild(frame)}catch(err){}})},2149099,500685);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - virtual-assistant-response",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop65,eVar65,prop80";_linkTrackEvents+="event81";_events+=
"event81";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";tempObject.prop80=
"D\x3dv80";s.tl(this,"o","virtual-assistant-response",tempObject)})},3783963,533846);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - document-download",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event10"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("formName")!="undefined"){var sBFP=s.parseDataLayer("formName");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId==
"string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar10=function anon(){try{if(typeof s.parseDataLayer("name")!="undefined")return s.parseDataLayer("name");else"unknown file name"}catch(e){}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,eVar56,eVar10";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?
s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event10"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Form Review");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4044936,767773);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - initial-assessment",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var eventString="event1,event76";return eventString}catch(err){return"event1"}}.call(this);s.eVar52=function anon(){try{var initial_assessment_result=s.parseDataLayer("initial_assessment_result");if(typeof initial_assessment_result==
"string"&&initial_assessment_result!="unknown initial_assessment_result"&&initial_assessment_result!="")if(/002$|003$|005$|006$|007$|008$|009$|010$|011$|012$/i.test(initial_assessment_result))return"Declined";else if(/001$/i.test(initial_assessment_result))return"Dedupe";else if(/004$|099/i.test(initial_assessment_result))return"Technical Fault";else return initial_assessment_result;else return""}catch(err){return""}}.call(this);s.pageName=function anon(){try{if(s.parseDataLayer("pageName")!="unknown pageName")return s.parseDataLayer("pageName")+
":"+s.parseDataLayer("pageId");else if(typeof digitalData.page.pageInfo.pageName!="undefined")return digitalData.page.pageInfo.pageName+":"+s.parseDataLayer("pageId")}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else return""}catch(err){return""}}.call(this);s.products=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!=
"undefined"){var productText="";var dlProdId=s_parseDataLayerProductId("form-interacted","form-initial-assessment",true);if(typeof dlProdId=="string"&&dlProdId!=="")productText=";"+dlProdId;else if(typeof s_parseDataLayerCustomValue("productName")=="string")productText=";"+s_parseDataLayerCustomValue("productName");return productText}else if(typeof digitalData!=="undefined"&&typeof s_parseDataLayerCustomValue("productName")=="string")return";"+s_parseDataLayerCustomValue("productName");else return""}catch(err){return""}}.call(this);
s.prop27=function anon(){try{var initial_assessment_result_code=s.parseDataLayer("initial_assessment_result_code");if(typeof initial_assessment_result_code=="string"&&initial_assessment_result_code!="unknown initial_assessment_result_code"&&initial_assessment_result_code!="")if(/mapping-list/i.test(initial_assessment_result_code))return"mapped-value";else return initial_assessment_result_code;else return""}catch(err){return""}}.call(this);s.eVar65=function anon(){try{if(typeof s_parseDataLayerCustomValue("dataSharingConsent")==
"string")return s_parseDataLayerCustomValue("dataSharingConsent");else return""}catch(err){return""}}.call(this);s.eVar20=function anon(){if(typeof s_parseDataLayerUserObj("form-interacted","applicantLiability","form-initial-assessment")=="string")return s_parseDataLayerUserObj("form-interacted","applicantLiability","form-initial-assessment");else return""}.call(this);s.purchaseID=function anon(){try{var serialised_id=s.parseDataLayer("serialised_id");if(typeof serialised_id=="string"&&serialised_id!=
"unknown serialised_id"&&serialised_id!="")return"i"+serialised_id.replace(/nab/i,"");else return""}catch(err){return""}}.call(this);s.eVar15=function anon(){try{var gender=s_parseDataLayerUserObj("form-interacted","gender","form-initial-assessment");if(typeof gender=="string")return gender;else if(typeof window.sc_applicant_gender!="undefined")return window.sc_applicant_gender;else return""}catch(err){return""}}.call(this);s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted",
"age","form-initial-assessment");var dob=s_parseDataLayerUserObj("form-interacted","dob","form-initial-assessment");if(typeof age!="undefined"&&age!==false)return age;else if(typeof dob!="undefined"&&dob!==false)return dob;else if(typeof window.sc_applicant_age!="undefined")return window.sc_applicant_age;else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state","form-initial-assessment");if(typeof state!="undefined")return state;
else if(typeof window.sc_applicant_state!="undefined")return window.sc_applicant_state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","form-initial-assessment");if(typeof postcode!="undefined")return postcode;else if(typeof window.sc_applicant_postcode!="undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var type=s_parseDataLayerUserObj("form-interacted",
"type","form-initial-assessment");if(typeof type=="string")return type.charAt(0).toUpperCase()+type.slice(1);else if(typeof window.sc_customer_type!="undefined")return window.sc_customer_type;else return""}catch(err){return""}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar52,pageName,events,eVar56,products,prop27,eVar65,eVar20,purchaseID,eVar15,eVar16,eVar17,eVar18,eVar19";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!==
"None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var eventString="event1,event76";return eventString}catch(err){return"event1"}}.call(this).replace(/=.*,/g,",").replace(/=.*/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2454761,507687);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - product-selected",function(){s.origLTV=s.linkTrackVars;s.events="event79";s.list3=function anon(){return s.parseDataLayer("name")}.call(this);s.prop66="D\x3dlist3";s.prop9="D\x3dpageName";s.eVar9="D\x3dpageName";s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,list3,prop66,prop9,eVar9";
s.linkTrackEvents="event79";s.tl(this,"o","Product Selected");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2269574,514264);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - livechat-offered",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,eVar11,prop11,prop65,eVar65,eVar9,prop9,eVar72";_linkTrackEvents+=
"event82";_events+="event82";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.eVar11="D\x3dg";tempObject.prop11="D\x3dg";tempObject.prop65=function anon(){var prop65=s_parseDataLayer("action")+
":Agent";return prop65.trim()}.call(this);tempObject.eVar65="D\x3dc65";tempObject.eVar9=function anon(){if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined")if(digitalData.page.pageInfo.pageName!="undefined")return digitalData.page.pageInfo.pageName;else return"";else return""}.call(this);tempObject.prop9="D\x3dv9";tempObject.eVar72=function anon(){var widget_type=s.parseDataLayer("participantType");return"widget type: "+widget_type}.call(this);
s.tl(this,"o","livechat-offered",tempObject)})},3783959,533847);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - submit-application",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";uniqueReference=s.parseDataLayer("uniqueReference");
ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var eventString="";var applicationSerialise="";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);applicationSerialise=
":"+applicationSerialise}if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name"))){serialised_id=serialised_id.replace(/nab/i,"");eventString="event1,event75:"+applicationSerialise;return eventString}else if(s_parseDataLayer("name")=="Transaction and Savings Online Application"||s_parseDataLayer("name")=="Term Deposit Online Application")return"event1,event13"+applicationSerialise;else{if(s_parseDataLayerAmountAppliedFor("form-interacted","submit-application")!==
false){if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var age=s_parseDataLayerUserObj("form-interacted","age","submit-application");if(typeof age!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+age;else eventString="event1,event13:"+applicationSerialise+",event14"}else eventString="event1,event13"+applicationSerialise+",event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","submit-application");if(dl_AmountAppliedFor!==
false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");var eventId="";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&
application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}if(s_parseDataLayer("name")=="Online Credit Card Application")return"event1,event13"+
applicationSerialise;return"event1"}}catch(err){return"event1"}}.call(this);s.pageName=function anon(){if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name")))return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("pageId").replace(/\s+/g,"-").replace(/39/g,"");else if(typeof s.getPageNameFromDL()!="undefined")return s.getPageNameFromDL().replace(/:start$/,"").replace(/:privacy$/,"").replace(/\s+/g,"-")+":processing"}.call(this);
s.eVar20=function anon(){try{var applicantLiability=s_parseDataLayerUserObj("form-interacted","applicantLiability","submit-application");var applicantLiabilityDesc=s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","submit-application");if(typeof applicantLiability=="string")return applicantLiability.charAt(0).toUpperCase()+applicantLiability.slice(1);else if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-
1];if(lastEventObject.data["user"].applicantLiability)return lastEventObject.data["user"].applicantLiability;else if(typeof applicantLiabilityDesc=="string")return applicantLiabilityDesc;else return""}else if(typeof window.sc_applicant_liability!="undefined")return window.sc_applicant_liability;else return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=
as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop33=function anon(){try{var formAbandonStartedFormName=s_parseDataLayerCustomValue("formAbandonStartedFormName");var formStartTime=s_parseDataLayerCustomValue("formStartTime");if(formAbandonStartedFormName!==false&&formStartTime!==false){var formAbandonCompletedFormName=s_parseDataLayer("name");if(formAbandonStartedFormName==
formAbandonCompletedFormName){var currentTime=Math.round((new Date).getTime()/1E3);if(currentTime)return currentTime-formStartTime}}return""}catch(err){return""}}.call(this);s.eVar15=function anon(){try{var gender=s_parseDataLayerUserObj("form-interacted","gender","submit-application");if(typeof gender=="string")return gender;else if(typeof window.sc_applicant_gender!="undefined")return window.sc_applicant_gender;else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=
s_parseDataLayer("application_id");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else return""}catch(err){return""}}.call(this);s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted","age","submit-application");var dob=s_parseDataLayerUserObj("form-interacted","dob","submit-application");if(typeof age!="undefined"&&age!==false)return age;else if(typeof dob!="undefined"&&dob!==false)return dob;else if(typeof window.sc_applicant_age!="undefined")return window.sc_applicant_age;
else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state","submit-application");if(typeof state!="undefined")return state;else if(typeof window.sc_applicant_state!="undefined")return window.sc_applicant_state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","submit-application");if(typeof postcode!="undefined")return postcode;else if(typeof window.sc_applicant_postcode!=
"undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var type=s_parseDataLayerUserObj("form-interacted","type","submit-application");if(typeof type=="string")return type.charAt(0).toUpperCase()+type.slice(1);else if(typeof window.sc_customer_type!="undefined")return window.sc_customer_type;else return""}catch(err){return""}}.call(this);s.products=function anon(){try{var dlProductId=s_parseDataLayerProductId("form-interacted","submit-application");
if(dlProductId!==false){var prodString="";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","submit-application");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor!="maximum")prodString=";"+dlProductId+";;;event14\x3d"+dl_AmountAppliedFor;else prodString=";"+dlProductId;var productArray=s.parseDataLayer("products");if(typeof productArray=="object"&&typeof productArray[1]=="object"&&prodString!="")for(var j=1;j<productArray.length;j++)if(typeof productArray[j]!=
"undefined")if(typeof productArray[j]["product-id"]!="undefined"&&productArray[j]["product-id"]!=="")prodString+=",;"+productArray[j]["product-id"];var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount"&&parseInt(balanceTransferAmount)>0)prodString+=",;balanceTransfer"+";;;event74\x3d"+balanceTransferAmount;return prodString}else if(typeof s_parseDataLayerCustomValue("productName")==
"string")return";"+s_parseDataLayerCustomValue("productName");else return""}catch(err){return""}}.call(this);s.prop50="D\x3devents";s.prop26=function anon(){try{var amtApplied=s.parseDataLayer("transaction_amount_applied_for");if(typeof amtApplied!="undefined")if(amtApplied=="maximum")return"maximum";else{if(typeof s_parseDataLayerCustomValue("creditLimitDefault")=="string")return s_parseDataLayerCustomValue("creditLimitDefault")}else return""}catch(err){return""}}.call(this);s.eVar65=function anon(){try{if(typeof s_parseDataLayerCustomValue("dataSharingConsent")==
"string")return s_parseDataLayerCustomValue("dataSharingConsent");else return""}catch(err){return""}}.call(this);s.list3=function anon(){try{var product="";var prodString="";if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices")product=s_parseDataLayer("productsAndServices");if(typeof product=="object"&&product.length>0)for(var i=0;i<product.length;i++)if(typeof product[i]["name"]!="undefined")prodString+=product[i]["name"]+",";return prodString}catch(err){return""}}.call(this);
s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar83=function anon(){var depositAmount=s_parseDataLayerCustomValue("depositAmount");var depositTerm=s_parseDataLayerCustomValue("depositTerm");var purpose=s.parseDataLayer("purpose");if(typeof depositAmount==="string"&&typeof depositTerm==="string")return"Term Deposit|"+depositTerm+"|"+depositAmount;else if(typeof purpose=="string"&&purpose!="unknown purpose")return purpose;
else if(s.parseDataLayer("purposeAndTerm")!="unknown purposeAndTerm")return s.parseDataLayer("purposeAndTerm");else return""}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,prop33,eVar15,eVar56,eVar16,eVar17,eVar18,eVar19,products,prop50,prop26,eVar65,list3,eVar87,eVar83,eVar28";
s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var eventString="";var applicationSerialise=
"";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);applicationSerialise=":"+applicationSerialise}if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name"))){serialised_id=
serialised_id.replace(/nab/i,"");eventString="event1,event75:"+applicationSerialise;return eventString}else if(s_parseDataLayer("name")=="Transaction and Savings Online Application"||s_parseDataLayer("name")=="Term Deposit Online Application")return"event1,event13"+applicationSerialise;else{if(s_parseDataLayerAmountAppliedFor("form-interacted","submit-application")!==false){if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var age=s_parseDataLayerUserObj("form-interacted","age","submit-application");
if(typeof age!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+age;else eventString="event1,event13:"+applicationSerialise+",event14"}else eventString="event1,event13"+applicationSerialise+",event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","submit-application");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");var eventId="";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=
s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&
balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}if(s_parseDataLayer("name")=="Online Credit Card Application")return"event1,event13"+applicationSerialise;return"event1"}}catch(err){return"event1"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3965964,499210);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - enquiry-form-completed",function(){try{var pageId="completed";var pageType="enquiry-form";var outcome="submitted";if(typeof pageId=="string"&&!/unknown pageid/i.test(pageId)&&pageId!="")pageId=pageId.replace("pg","");var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height=
"1px";frame.src="https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+pageId+"\x26pageType\x3d"+pageType+"\x26outcome\x3d"+outcome;document.body.appendChild(frame)}catch(err){}})},2151094,500687);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - file-upload-error",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="event1,event55";s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);
sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";if(typeof sBFP=="string")sBFP=sBFP.trim();return sBFP}else""}.call(this);s.pageName=function anon(){window.scFormDebug="file-upload-error - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="file-upload-error - Scenario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,
"").replace(/:privacy$/,"")+":"+section}else{window.scFormDebug="file-upload-error - Scenario 4: no match";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":file-upload-error"}}.call(this);s.prop19=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var fileType=s.parseDataLayer("fileType");var error=s.parseDataLayer("error");var sectionName=s.parseDataLayer("section");if(sectionName!="unknown section"){var sectionNameArr=
sectionName.split("|");if(sectionNameArr[0]!=="")fileType=sectionNameArr[0]+"|"+fileType}var uploadError=formName+"|"+fileType+"|"+error;return uploadError.toLowerCase()}catch(err){return"unknown upload type error"}}.call(this);s.eVar55=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var fileType=s.parseDataLayer("fileType");var uploadType=fileType+"|"+formName;var sectionName=s.parseDataLayer("section");if(sectionName!="unknown section"){var sectionNameArr=
sectionName.split("|");if(sectionNameArr[0]!=="")uploadType=sectionNameArr[0]+"|"+uploadType}return uploadType.toLowerCase()}catch(err){return"unknown upload type"}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,pageName,prop19,eVar55";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="event1,event55";s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},
2476688,543147);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-dialog-saved",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{if(/(business|financial) snapshot/i.test(s_parseDataLayer("name"))&&/ProductOrServiceForm/i.test(s_parseDataLayer("sectionId"))){var productOrServiceAdd=s_parseDataLayerCustomValue("productOrServiceAdd");if(/product/i.test(productOrServiceAdd))return"event1,event72";
else if(/service/i.test(productOrServiceAdd))return"event1,event73";else return"event1"}else return"event1"}catch(err){return"event1"}}.call(this);s.eVar51=function anon(){try{if(s_parseDataLayerCustomValue("formType")=="application-form2")return"";else return s.parseDataLayer("name")}catch(err){return""}}.call(this);s.pageName=function anon(){window.scFormDebug="Form Dialog Saved - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=
s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="Form Dialog Saved - Scenario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section+":saved"}else{window.scFormDebug="Form Dialog Saved - Scenario 4: no match";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":form-dialog-saved"}}.call(this);s.eVar65=function anon(){try{var formName=s_parseDataLayer("name");if(/(business|financial) snapshot/i.test(formName)&&
/ProductOrServiceForm/i.test(s_parseDataLayer("sectionId"))){var productOrServiceAdd=s_parseDataLayerCustomValue("productOrServiceAdd");if(typeof productOrServiceAdd=="string"&&productOrServiceAdd!="")return formName+" : "+productOrServiceAdd+" : saved";else return""}else return""}catch(err){return""}}.call(this);s.prop65="D\x3dv65";s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,eVar51,pageName,eVar65,prop65";s.linkTrackEvents=s.linkTrackEvents&&
s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{if(/(business|financial) snapshot/i.test(s_parseDataLayer("name"))&&/ProductOrServiceForm/i.test(s_parseDataLayer("sectionId"))){var productOrServiceAdd=s_parseDataLayerCustomValue("productOrServiceAdd");if(/product/i.test(productOrServiceAdd))return"event1,event72";else if(/service/i.test(productOrServiceAdd))return"event1,event73";else return"event1"}else return"event1"}catch(err){return"event1"}}.call(this).replace(/(=.*?,|=.*?$)/g,
",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2715826,488828);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chat-system-error",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event123";_events+="event123";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","chat-system-error",tempObject)})},3785219,695638);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - carousel-clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65,eVar93";_linkTrackEvents+="event128";_events+="event128";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
tempObject.eVar93=function anon(){return s.parseDataLayer("indexPosition")}.call(this);s.tl(this,"o","carousel-clicked",tempObject)})},3785224,695643);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-cancelled",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event115"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event115"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,
"o","Form Cancelled");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628012,685950);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - file-upload-success",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event39"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=
as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";if(typeof sBFP=="string")sBFP=sBFP.trim();return sBFP}else""}.call(this);s.pageName=function anon(){window.scFormDebug="file-upload-success - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="file-upload-success - Scenario 1: section is set";
return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section}else{window.scFormDebug="file-upload-success - Scenario 4: no match";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":file-upload-success"}}.call(this);s.eVar55=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var fileType=s.parseDataLayer("fileType");var uploadType=fileType+"|"+formName;var sectionName=
s.parseDataLayer("section");if(sectionName!="unknown section"){var sectionNameArr=sectionName.split("|");if(sectionNameArr[0]!=="")uploadType=sectionNameArr[0]+"|"+uploadType}return uploadType.toLowerCase()}catch(err){return"unknown upload type"}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,eVar23,pageName,eVar55";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";
s.linkTrackEvents+=","+function anon(){return"event1,event39"}.call(this).match(/event\d+/g).join(",");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2476685,543144);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;try{var tealiumprod="https://tags.nab.com.au/main/prod/utag";var tealiumdev="https://tags.nab.com.au/main/dev/utag";var tealiumsandbox="https://tags.nab.com.au/sandbox/dev/utag";var tealium_endpoint=tealiumdev;var local_env=localStorage.getItem("tealiumenv");if((window.location.hostname=="www.nab.com.au"||window.location.hostname=="business.nab.com.au"||window.location.hostname==
"propertyinsights.nab.com.au"||window.location.hostname=="news.nab.com.au")&&typeof local_env!="string")tealium_endpoint=tealiumprod;else if(local_env=="sandbox")tealium_endpoint=tealiumsandbox;var utag_data={};(function(a,b,c,d){a=tealium_endpoint+".js";b=document;c="script";d=b.createElement(c);d.src=a;d.type="text/java"+c;d.async=true;a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)})()}catch(e){console.error("UTAG error.",e.message)}},4062642,[4092759],728389,[315969]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){if(window&&window.s&&window.s.eVar52)try{if(/^(Approved|Downsell (Limit|Offer))$/.test(window.s.eVar52))return"Approved";else if(/^(Declined)$/.test(window.s.eVar52))return"Declined";else if(/^(Referred|Dedupe)$/.test(window.s.eVar52))return"Referred";else return""}catch(e){return""}},
transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - CC Facebook Decision",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62372"})},62372)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-saved",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event112"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.prop26=
function anon(){try{if(typeof s_parseDataLayerCustomValue("creditLimitDefault")=="string")return s_parseDataLayerCustomValue("creditLimitDefault");else return""}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,prop26,eVar87";s.linkTrackEvents=s.linkTrackEvents&&
s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event112"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Form Saved");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628008,685947);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - quick-reply-clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65,eVar93";_linkTrackEvents+="event127";_events+=
"event127";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65=
"D\x3dc65";tempObject.eVar93=function anon(){return s.parseDataLayer("indexPosition")}.call(this);s.tl(this,"o","quick-reply-clicked",tempObject)})},3785223,695642);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-withdrawn",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event135"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event135"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,
"o","Form Withdrawn");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4044937,767647);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){var HO;var HOClickIDArr;try{function getCookieValue(a){var b=document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*\x3d\\s*([^;]+)");return b?b.pop():""}HO=getCookieValue("HO")}catch(e){}try{HOClickIDArr=HO.split("+");return HOClickIDArr[0]}catch(e){}},transform:function(val){return val?val:
""},load:"page",trigger:Bootstrapper.data.bottomOfBodyTrigger,dataDefName:"DD HasOffers",collection:"Page",source:"Manage",priv:"false"},{id:"59677"})},59677)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - button-clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65,eVar93";_linkTrackEvents+="event129";_events+="event129";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
tempObject.eVar93=function anon(){return s.parseDataLayer("indexPosition")}.call(this);s.tl(this,"o","button-clicked",tempObject)})},3785225,695644);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - survey-presented",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar46,eVar22,prop22,eVar80,prop80";_linkTrackEvents+="event27";_events+="event27";var tempObject=
{};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46="Chat Survey";tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";s.tl(this,"o","survey-presented",tempObject)})},3785215,552772);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - read-more",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.pageName=function anon(){var localPageName="";if(typeof s.parseDataLayer("name")!="undefined")localPageName=s.parseDataLayer("name");else localPageName="unknown name";localPageName+=":read-more";return localPageName}.call(this);s.linkTrackVars+=s.linkTrackVars.slice(-1)!=
","?",":"";s.linkTrackVars+="pageName";s.linkTrackEvents+=s.linkTrackEvents.slice(-1)!=","?",":"";s.linkTrackEvents+="None";s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},1459475,395696);Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.on("click","#advsearchsub",function(){Bootstrapper.ensEvent.trigger("MLC Page Event - Find An Adviser Search Click",this)},true)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - proactive-offer|clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event125";_events+="event125";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","proactive-offer|clicked",tempObject)})},3785222,695640);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - form-completed",function(){try{var pageId=s_parseDataLayer("pageId");var formAction=s_parseDataLayer("action");var pageType=s_parseDataLayer("name");var outcome="unknown outcome";if(typeof pageId=="string"&&/pgExit/i.test(pageId))outcome="submitted";else if(typeof formAction=="string"&&/form\-decision/i.test(formAction)){if(s_parseDataLayer("transaction_result")!=
"unknown transaction_result")outcome=s_parseDataLayer("transaction_result");else if(s_parseDataLayer("initial_assessment_result")!="unknown initial_assessment_result")outcome=s_parseDataLayer("initial_assessment_result");else outcome="unknown";pageId="Outcome"}if(typeof pageId=="string"&&!/unknown pageid/i.test(pageId)&&pageId!="")pageId=pageId.replace("pg","");pageType=pageType.replace("REA Home Loan","online");pageType=pageType.replace(/\s+/g,"-");pageType=pageType.toLowerCase();var frame=document.createElement("iframe");
frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src="https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+pageId+"\x26pageType\x3d"+pageType+"\x26outcome\x3d"+outcome;document.body.appendChild(frame)}catch(err){}})},2927306,500677);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var ft_c1_U1="";var ft_c1_U2="";var ft_c1_U3="";var ft_c1_U4="";var ft_c1_U5="";if(window){if(window.s)try{if(window.s.eVar56)ft_c1_U1=window.s.eVar56;if(window.s.eVar52)ft_c1_U2=window.s.eVar52}catch(e){}if(window.digitalData)try{if(window.digitalData.product&&Array.isArray(window.digitalData.product)&&
window.digitalData.product[0].campaignCode)ft_c1_U3=window.digitalData.product[0].campaignCode;else if(window.s&&typeof window.s.Util.getQueryParam=="function"&&window.s.Util.getQueryParam("campaignCode")!="")ft_c1_U3=window.s.Util.getQueryParam("campaignCode");if(window.digitalData.event&&Array.isArray(window.digitalData.event)&&window.digitalData.event[window.digitalData.event.length-1].data&&window.digitalData.event[window.digitalData.event.length-1].data.transaction_amount_approved)ft_c1_U4=window.digitalData.event[window.digitalData.event.length-
1].data.transaction_amount_approved}catch(e){}}try{var HO;var HOClickIDArr;function getCookieValue(a){var b=document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*\x3d\\s*([^;]+)");return b?b.pop():""}HO=getCookieValue("HO");HOClickIDArr=HO.split("+");ft_c1_U5=HOClickIDArr[0]}catch(e){}return"U1:"+ft_c1_U1+";U2:"+ft_c1_U2+";U3:"+ft_c1_U3+";U4:"+ft_c1_U4+";U5:"+ft_c1_U5+";"}catch(err){return"U1:;U2:;U3:;U4:;U5:;"}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,
dataDefName:"DDL - ft c1 - UVAR",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"65598"})},65598)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-review",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event133"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event133"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,
"o","Form Review");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4044938,767646);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chatwidget-resumed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event80";_events+="event80";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type=s_parseDataLayer("participantType");if(type!="unknown particpantType")return(action+
":"+type).trim();else return false}.call(this);tempObject.eVar65="D\x3dc65";s.tl(this,"o","chatwidget-resumed",tempObject)})},3785212,533845);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - virtual-assistant-initiated",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event23";_events+=
"event23";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65=
"D\x3dc65";s.tl(this,"o","virtual-assistant-initiated",tempObject)})},3783961,533844);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chat-input-error",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event122";_events+="event122";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","chat-input-error",tempObject)})},3785218,695637);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var _url="nab.com.au/";var _AAFormName="";var _FormProgress="";var _Prod="";var _Decision="";var dde=window.digitalData.event;var lastEvent=dde[dde.length-1]["eventType"]==="form-interacted"?dde[dde.length-1].data:dde.length-2>=0?dde[dde.length-2].data:null;var lAction=lastEvent.action.split("-")[1];
if(lAction==="started"||lAction==="completed"){var AAFormName=lastEvent.name;if(typeof AAFormName!=="undefined"&&AAFormName.length>1)_AAFormName=AAFormName;_FormProgress=lAction==="started"?"start":"complete";var ProdId=lastEvent.products?lastEvent.products.map((product)=>{if(product["product-id"])return product["product-id"];else if(product["subProduct"])return product["subProduct"];else if(product["product"])return product["product"];else return""}).join(","):"";if(ProdId.length>1)_Prod=ProdId;
else if(typeof s!="undefined"&&typeof s.Util!="undefined"&&typeof s.Util.getQueryParam=="function"&&s.Util.getQueryParam("products")!="")_Prod=s.Util.getQueryParam("products");var Decision=lastEvent.decision_status?lastEvent.decision_status:lastEvent.transaction_result?lastEvent.transaction_result:"";if(Decision.length>1)_Decision=Decision;return _url+encodeURIComponent(_AAFormName+"|Step\x3d"+_FormProgress+"|Prod\x3d"+_Prod+"|Decision\x3d"+_Decision)}return""}catch(err){return""}},transform:function(val){return val?
val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - PL CC HL - LinkedIn URL param",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"63105"})},63105)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(/\.nab\.com\.au$/.test(window.location.hostname))Bootstrapper.ensEvent.add("ensEvent - analytics-doPlugins-complete",function(){(function(){var SCV_POLL_WAIT_MS=3E3;SCVIDSyncer.prototype.VERSION="NAB-2016121301";function SCVIDSyncer(){}SCVIDSyncer.prototype.waitForIDSyncEvent=function(){var oThis=this;oThis._syncIdentity()};SCVIDSyncer.prototype._syncIdentity=function(){if(!this._isUserDueToSyncIDs())return;
var oSCVIdentity={};oSCVIdentity.SVI=this._findSiteCatLegacyID();oSCVIdentity.MID=this._findMarketingCloudID();oSCVIdentity.DDXUUID=this._findAudienceManagerUUID();oSCVIdentity.SSC=this._findSSCID();this._sendToDCM(oSCVIdentity)};SCVIDSyncer.prototype._isUserDueToSyncIDs=function(){if(window.s!==undefined&&window.SscCookieHandler!==undefined)if(window.SscCookieHandler.getCookie("sync_scv")==="sync")return false;return true};SCVIDSyncer.prototype._sendToDCM=function(oSCVIdentity){if(this._isSCVIdentityEmpty(oSCVIdentity))return;
oSCVIdentity.SCVSync=1;var sEncodedData=encodeURI(JSON.stringify(oSCVIdentity));document.cookie="sync_scv\x3dsync; path\x3d/; domain\x3d.nab.com.au";var axel=Math.random()+"";var a=axel*1E13;var image=document.createElement("IMG");image.alt="";image.width="1";image.height="1";image.src="https://ad.doubleclick.net/ddm/activity/src\x3d3347639;type\x3dbrand839;cat\x3dvizte001;u18\x3d"+sEncodedData+";dc_lat\x3d;dc_rdid\x3d;tag_for_child_directed_treatment\x3d;ord\x3d"+a+"?";document.body.appendChild(image)};
SCVIDSyncer.prototype._isSCVIdentityEmpty=function(oSCVIdentity){if(!oSCVIdentity||typeof oSCVIdentity!=="object"||Object.keys(oSCVIdentity).length<=0)return true;else if(!oSCVIdentity.SVI&&!oSCVIdentity.MID&&!oSCVIdentity.DDXUUID&&!oSCVIdentity.SSC)return true;else return false};SCVIDSyncer.prototype._findSiteCatLegacyID=function(){if(window.s&&window.s.visitor&&typeof window.s.visitor.getAnalyticsVisitorID==="function")return window.s.visitor.getAnalyticsVisitorID();else return null};SCVIDSyncer.prototype._findMarketingCloudID=
function(){if(window.s&&window.s.visitor&&typeof window.s.visitor.getMarketingCloudVisitorID==="function")return window.s.visitor.getMarketingCloudVisitorID();else return null};SCVIDSyncer.prototype._findAudienceManagerUUID=function(){if(window.aamuuid&&window.aamuuid)return window.aamuuid;else if(window.s&&window.s.eVar76)return window.s.eVar76;else return null};SCVIDSyncer.prototype._findSSCID=function(){if(window.SscCookieHandler&&typeof window.SscCookieHandler.getCookie==="function")return window.SscCookieHandler.getCookie("nab_s_vid");
else return null};(new SCVIDSyncer).waitForIDSyncEvent()})()})},1741739,449709);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - form-page-loaded",function(){try{var pageId=s_parseDataLayer("page");var sectionId=s_parseDataLayer("section");var pageType=s_parseDataLayer("name");var pageToUse="unknown";if(typeof sectionId=="string"&&!/unknown section/i.test(sectionId)&&sectionId!=""){sectionId=sectionId.replace("pg","");sectionId=sectionId.replace("39","");
pageToUse=sectionId}else if(typeof pageId=="string"&&!/unknown page/i.test(pageId)&&pageId!=""){pageId=pageId.replace("pg","");pageId=pageId.replace("39","");pageToUse=pageId}pageToUse=pageToUse.replace(/\s+/g,"-");pageToUse=pageToUse.toLowerCase();pageType=pageType.replace("REA Home Loan","online");pageType=pageType.replace(/\s+/g,"-");pageType=pageType.toLowerCase();var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src="https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+
pageToUse+"\x26pageType\x3d"+pageType;document.body.appendChild(frame)}catch(err){}})},2728642,500676);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(typeof window.s!="undefined"&&typeof window.s.Util!="undefined"&&typeof s.Util.getQueryParam=="function")return"cid:"+window.s.Util.getQueryParam("cid")+";own_cid:"+window.s.Util.getQueryParam("own_cid")+";psc:"+window.s.Util.getQueryParam("psc")+";psea:"+window.s.Util.getQueryParam("psea")+
";";return"cid:;own_cid:;psc:;psea:;"}catch(err){return"cid:;own_cid:;psc:;psea:;"}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - ft custom - url campaign",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"65597"})},65597)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var _url="nab.com.au/";var _AAFormName="";var _FormProgress="";var _Prod="";var _Decision="";var dde=window.digitalData.event;var lastEvent=dde[dde.length-1]["eventType"]==="form-interacted"?dde[dde.length-1].data:dde.length-2>=0?dde[dde.length-2].data:null;var lAction=lastEvent.action.split("-")[1];
if(lAction==="started"||lAction==="completed"){var AAFormName=lastEvent.name;if(typeof AAFormName!=="undefined"&&AAFormName.length>1)_AAFormName=AAFormName;_FormProgress=lAction==="started"?"start":"complete";var ProdId=lastEvent.products?lastEvent.products.map((product)=>{if(product["product-id"])return product["product-id"];else if(product["subProduct"])return product["subProduct"];else if(product["product"])return product["product"];else return""}).join(","):"";if(ProdId.length>1)_Prod=ProdId;
else if(typeof s!="undefined"&&typeof s.Util!="undefined"&&typeof s.Util.getQueryParam=="function"&&s.Util.getQueryParam("products")!="")_Prod=s.Util.getQueryParam("products");var Decision=lastEvent.decision_status?lastEvent.decision_status:lastEvent.transaction_result?lastEvent.transaction_result:"";if(Decision.length>1)_Decision=Decision;return _url+_AAFormName+"|Step\x3d"+_FormProgress+"|Prod\x3d"+_Prod+"|Decision\x3d"+_Decision}return""}catch(err){return""}},transform:function(val){return val?
val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - PL CC HL - Google Ads URL param",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"64159"})},64159)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return window.digitalData.event[window.digitalData.event.length-1].data.products[0]["product-name"]}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - CC First Product Name",collection:"Digital Data Layer",
source:"Manage",priv:"false"},{id:"65773"})},65773)},-1,-1);Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.bindDOMParsed(function(){var elements=Bootstrapper.qwery(".accordion__section");for(var i=0;i<elements.length;i++)Bootstrapper.unobtrusiveAddEvent(elements[i],"onclick",function(){Bootstrapper.ensEvent.trigger("Accordian Click")})})},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chatwidget-ended",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80";_linkTrackEvents+="event84";_events+="event84";var tempObject=
{};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";s.tl(this,"o","chatwidget-ended",tempObject)})},3785214,533849);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - product-added",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.products=function anon(){var products=s.parseDataLayer("product");window.sc_products="";if(typeof products!="undefined"&&typeof products.productId!="undefined")window.sc_products=";"+products.productId;return window.sc_products}.call(this);s.events=
"scAdd";s.eVar72=function anon(){return""}.call(this);s.linkTrackVars+=s.linkTrackVars.slice(-1)!=","?",":"";s.linkTrackVars+="products,events,eVar72";s.linkTrackEvents+=s.linkTrackEvents.slice(-1)!=","?",":"";s.linkTrackEvents+="scAdd";s.tl(this,"o","form - products-selected");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},1518059,415149);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.CS_CONF={"projectId":51360,"status":1,"hostnames":["nab.com.au"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":0,"visitorCookieTimeout":34164E6,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net",
"useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":0,"autoInsightsEnabled":0,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":null,
"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":"replayRecordingUnmaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5E3,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,
"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-us1.az.contentsquare.net","malkaRecordingDomain":"k-us1.az.contentsquare.net","staticResourceManagerDomain":"srm.af.contentsquare.net"};window.CS_INTEGRATIONS_CONF={"adobe-target":{}};!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};
return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,
value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-adobe-target-contentsquare","version":"3.5.5","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){function r(e,n){try{e()}catch(e){window._uxa=
window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function i(e){return"object"==typeof e&&null!==e}function a(e,n,t){if((t=t||window)&&n&&e){var r=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,r||(r=!0,n())}})}}t.r(n);var o,u=t(0),c=u.name,p=u.version,s=function(e){var n,t,i,a;if(r(function(){var r=e.name;i=e.version;var o=r.replace("@contentsquare/integration-","");n=o+"-"+i;var u="-contentsquare";a=(new RegExp(u+"$")).test(o),
t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=(new RegExp(u+"$")).test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:t,snippetVersion:i}}(u);s&&(o=s.parameterName,c=s.snippetBuildName,p=s.snippetVersion),r(function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Adobe Target - v"+p);var e=function(e,n){if(i(window.CS_INTEGRATIONS_CONF)&&i(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}(o,
"customObjectName");e&&(e=e.trim());var n=[];function t(e){for(var t=0;t<e.length;t++){var r=e[t],i="",a="";r.CampaignName&&r.RecipeName?(i=r.CampaignName,a=r.RecipeName):r.campaign&&r.experience?(i=r.campaign,a=r.experience):r["activity.name"]&&r["experience.name"]&&(i=r["activity.name"],a=r["experience.name"]),n.length&&n.indexOf(i+"~~~~"+a)>-1&&(i="",a=""),i&&a&&(n.push(i+"~~~~"+a),u=a,o="AB_AT_"+(o=i),_uxa.push(["trackDynamicVariable",{key:o,value:u}]))}var o,u}function u(n){e||(e="ttMETA"),function(e,
n,t){t=t||window;var r=e.split(".");if(1==r.length)a(e,n,t);else{var i=t,o=0;const e=function(){i=o>0?i[r[o-1]]:window,++o>=r.length?a(r[o-1],n,i):a(r[o-1],e,i)};e()}}(e,function(){setTimeout(function(){r(function(){t(window[e])},c)},500)})}document.addEventListener("at-request-succeeded",function(e){e&&e.detail&&e.detail.responseTokens&&t(e.detail.responseTokens)}),_uxa.push(["afterPageView",function(e){r(function(){u()},c)}])},c)}]);!function(){var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,
r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{getRequestParameters:function(){return xu}});var i="cs-native-frame",r={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling",
"firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,
n);if(!r)return function(){return this[n]};switch(i){case "get":return r.get;case "set":return r.set;case "value":return r.value}}function s(t){Object.keys(r.constructors).forEach(function(n){window[r.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]}),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,
9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),u("csNode",r.nodeProperties,t.Node.prototype,"get"),u("csElement",r.elementProperties,t.Element.prototype,"get"),u("csElement",r.elementPropertiesValues,t.Element.prototype,"value",!1),u("csHTMLImageElement",r.imageProperties,t.HTMLImageElement.prototype,
"set"),u("csEvent",r.eventProperties,t.Event.prototype,"get"),u("csNavigator",r.navigatorProperties,t.navigator,"value")}function u(t,n,i,r,s){void 0===s&&(s=!0),n.forEach(function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(s||o in i)&&(window["".concat(t+o)]=e(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))})}function o(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=
function(){var t=document.createElement("iframe");t.id=i,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var r=n.attachShadow({mode:"closed"});return r.innerHTML=t.outerHTML,r.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();
return!!t&&(window.CSPureWindow=t,s(window.CSPureWindow),!0)}catch(t){return o("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{s(window)}catch(Es){o("Critical","failed to copy references from window: ".concat(Es.message))}function h(t){return c(csString.prototype.toLowerCase.call(t.localName))}function c(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function a(t){return 1===t.nodeType}function f(t){return 3===t.nodeType}
function v(t){return a(t)&&"source"===t.localName}function l(t){return null!==t&&a(t)&&"picture"===t.localName}function d(t){return a(t)&&"a"===t.localName}function w(t){return function(t){return a(t)&&"link"===t.localName}(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function y(t){return a(t)&&"img"===t.localName}function p(t){return a(t)&&"style"===t.localName}function m(t){return a(t)&&"input"===t.localName}function g(t){return a(t)&&"textarea"===t.localName}function S(t){return a(t)&&
"script"===t.localName}function E(t){return a(t)&&"ownerSVGElement"in t}function A(t){return a(t)&&"select"===t.localName}function b(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}function R(t){return 9===t.nodeType}function N(t){return b(t)&&"host"in t&&"mode"in t}function T(t){return a(t)&&!!csElementshadowRoot.apply(t)&&N(csElementshadowRoot.apply(t))}var O=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];
var I="detached";function k(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return C(n)&&csArray.prototype.push.call(i,I),{ancestors:i,selectionRoot:n}}function C(t){return q.isValidElement(t)}var _=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,P=9;function M(t,n){return!!n&&csArray.prototype.some.call(n,
function(n){return _.call(t,n)})}var L=[/\d{4}/,/^ember\d+$/],x="@",D="data-cs-override-id",U="data-cs-dynamic-id";function j(t,n,i,r){var e=r.dynamicIdRegex||null,s=r.dynamicElementNameRegex,u=h(t);s&&(s.test(t.localName)&&(u=csString.prototype.replace.call(u,s,"$1".concat(x))));if(function(t,n){var i=H(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&z(D,i,n)}(t,i)){var o=H(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(D,'\x3d"').concat(o,'"]')}}var a=function(t,
n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,e=i.uniqueAttributes;r<e.length;r++){var s=e[r],u=t.getAttribute(s);if(null!==u)if(z(s,u,n))return{attributeName:s,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(a.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(a.attributeName,'\x3d"').concat(a.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,e=i.uniqueCssSelectors;r<e.length;r++){var s=e[r];if(_.call(t,s)&&
B(s,n))return s}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?c(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==H(t)}(t)&&!function(t,n,i){return t.hasAttribute(U)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(L,function(n){return n.test(t)})||i)}(n,i)}(t,n,r)&&function(t,n){return t&&z("id",t,n)}(n,i)}(t,v,i,e))return{hasUniqueIdentifier:!0,
elementSelector:"".concat(u,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var e=r[i];if(_.call(t,e))return e}return}(t,r);if(l){var d=function(t,n,i){if(t===I||t.nodeType===P)return 0;for(var r=0,e=n.previousElementSibling;e;)_.call(e,i)&&(r+=1),e=e.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===I||t.nodeType===P)return 0;
for(var r=i.dynamicElementNameRegex,e=!!(null==r?void 0:r.test(n.localName)),s=h(n),u=0,o=n.previousElementSibling;o;)(h(o)===s||e&&(null==r?void 0:r.test(o.localName)))&&!M(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function H(t){return t.getAttribute(D)}function z(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'\x3d"').concat(n,'"]')).length}catch(t){if("SyntaxError"!==
t.name)throw t;}return!1}function B(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t;}return!1}var q,F=11;function G(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return V(r,i);var e=j(r,t[0],n,i),s=e.elementSelector,u=e.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(V(o,i)).concat(s)}var h=G(t,n,i);return"".concat(h?"".concat(h,"\x3e"):"").concat(s)}function V(t,n){if(t===I)return"|detached|";
if(t.host){var i=k(t.host),r=i.ancestors,e=i.selectionRoot;return"".concat(G(r,e,n),"|shadow-root|")}return t.nodeType===F?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return"";if(!n(s))return t.INVALID_ELEMENT;
var u=k(s);return G(u.ancestors,u.selectionRoot,e)},t.getElementPathAndFirstAnchorParent=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return{path:"",firstAnchorParent:null};if(!n(s))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&d(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return C(n)&&csArray.prototype.push.call(i,
I),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(s),o=u.firstAnchorParent;return{path:G(u.ancestors,u.selectionRoot,e),firstAnchorParent:o}}}(q||(q={})),window.CSPathComputation=window.CSPathComputation||q;var W=function(t,n){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},W(t,n)};function Y(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+
String(n)+" is not a constructor or null");function i(){this.constructor=t}W(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var J=function(){return J=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},J.apply(this,arguments)};function $(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==
typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function K(t,n,i,r){return new (i||(i=Promise))(function(e,s){function u(t){try{h(r.next(t))}catch(t){s(t)}}function o(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(t){t(n)})).then(u,o)}h((r=r.apply(t,n||[])).next())})}function Z(t,n){var i,r,e,s,u=
{label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return u.label++,
{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){u.label=s[1];break}if(6===s[0]&&u.label<e[1]){u.label=e[1],e=s;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(s);break}e[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(t,u)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,
o])}}}Object.create;function X(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var Q=Number.MAX_SAFE_INTEGER||9007199254740991;function tt(){}function nt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}var it=34164E6,rt={percentage:function(){return Math.floor(1E4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===
t&&(t=Q),Math.floor(Math.random()*t)}},et="function"==typeof Symbol?Symbol("json"):null;var st,ut,ot=et?function(t){if(t[et])return t[et];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+ot(t[0]),i=1;i<t.length;i++)n+=","+ot(t[i]);return n+"]"}return t[et]=csJSON.stringify(t)}:csJSON.stringify,ht=function(){function t(t){var n,i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,
this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||it,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,
this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=J({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrors=J({enabled:null!==(i=t.customErrorsEnabled)&&void 0!==i?i:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):
null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=
t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=
t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&""===t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=
null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5E3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=
J(J({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions)}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),
"://").concat(this.malkaRecordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.getStaticResourceManagerUri=function(){return"".concat(this.i(),"://").concat(this.staticResourceManagerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=
function(t){var n=this;t&&t.forEach&&t.forEach(function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var e=r[0],s=r[1];n.u(e,s)}})},t.prototype.u=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"staticResourceManagerDomain"===t&&(this.staticResourceManagerDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=
!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.h(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.h=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t.prototype.isHeaderCollectionActive=
function(){var t,n;return this.apiErrors.collectStandardHeaders||!!(null===(t=this.apiErrors.validCustomHeaders)||void 0===t?void 0:t.length)||!!(null===(n=this.apiErrors.plainCustomHeaders)||void 0===n?void 0:n.length)},t}(),ct=function(){function t(t,n){this.S=t,this.A=n}return t.prototype.init=function(){this.R=this.S!==this.S.top,this.N=this.A.isWebView&&this.S===this.S.top,this.A.iframesTracking&&this.R||this.N?this.T=!1:this.T=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=
function(){return this.T},t.prototype.isInWebViewContext=function(){return this.N},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(st||(st={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),function(n){return"".concat(encodeURIComponent(n),"\x3d").concat(encodeURIComponent(t[n]))}),"\x26")}}(ut||(ut={}));var at=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=
[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,
function(t){return t.getRequestParameters()}),function(t,n){return J(J({},t),n)}):{}},t}(),ft=function(t){function n(n,i){return t.call(this,n,i)||this}return Y(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,function(t){return t()});var t=this.retrieveParameters();this.O(t);var n=ut.toQuery(t);this.I(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,function(t){return t()})},n.prototype.I=function(t){var n=new window.Image(1,1);n.onload=tt,n.onerror=
tt,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.O=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(at),vt=function(){function t(t,n){this.k=t,this.C=n}return t.prototype.init=function(){this._=new ft(this.k.getLoggerUri()),this._.setRequestParametersProviders(this,this.C)},t.prototype.send=function(t){this.P=t,this._.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,
l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),lt=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,dt=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,wt="([-A-Za-z0-9+/\x3d_]|\x3d[^\x3d]|\x3d{3,})+",yt=new RegExp("(ey".concat(wt,"\\.ey").concat(wt,"\\.").concat(wt,")"),"g"),pt=/[0-9]{4}/,mt=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,gt=function(){function t(){}return t.prototype.anonymizePII=function(t){return"string"==
typeof t&&(t=this.anonymizeEmail(t)),t},t.prototype.anonymizeEmail=function(t){return dt.test(t)?csString.prototype.replace.call(t,lt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeCreditCard=function(t){var n=this;return pt.test(t)?csString.prototype.replace.call(t,mt,function(t,i,r,e,s){if(-1===csString.prototype.indexOf.call(r,"*")){var u=e.length?csArray.prototype.join.call(csString.prototype.split.call(r,e),""):r;if(!n.M(u))return t}return"".concat(i).concat("CS_ANONYMIZED_PII").concat(s)}):
t},t.prototype.M=function(t){for(var n=parseInt(t[t.length-1]),i=0,r=t.length-2;r>=0;r--){var e=parseInt(t[r]);r%2==0&&(e*=2),i+=Math.floor(e/10)+e%10}return 10-i%10===n},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,yt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,function(n){t[n]=i.anonymizeEmail(t[n])}),t},t}(),St="13.89.2";function Et(){return{v:St}}var At=function(){return void 0!==window.performance&&
window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function bt(){return Math.floor(At()/1E3)}function Rt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Nt(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var Tt=function(){function t(t,n){this.L=t,this.D=n}return t.prototype.getRequestParameters=function(){return J(J({d:"".concat(At()),p:this.D.anonymizePII(window.location.href)},this.L.getRequestParameters()),
Et())},t}();function Ot(t){return _t(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function It(t){return t===parseInt(t,10)}function kt(t){return _t(t)&&("string"==typeof t||t instanceof csString)}function Ct(t){return"object"==typeof t}function _t(t){return void 0!==t}function Pt(t){return _t(t)&&null!==t}function Mt(t){return"function"==typeof t}function Lt(t){return t instanceof Element}function xt(t){return t instanceof Error}var Dt,Ut,jt="snippet-",Ht="implementation-snippet-";!function(t){t.IMPLEMENTATION=
"implementation",t.DYNAMIC="dynamic"}(Dt||(Dt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Ut||(Ut={}));var zt=function(){function t(t,n,i){var r;this.U=n,this.D=new gt,this.j=Ut[st.warn],this.j=Ut[t.minLogLevel||st.warn],this._=i||new vt(t,new Tt(t,this.D)),this.H=((r={})[st.debug]=[],r[st.warn]=[],r[st.error]=[],r[st.critical]=[],r),this.B={implementation:{},dynamic:{}},this._.init()}return t.prototype.send=function(t,n,i){if(void 0===
n&&(n=""),void 0===i&&(i=st.warn),this.q(i,n)){csArray.prototype.push.call(this.H[i],n||"");var r={message:this.F(t,n),stacktrace:this.G(t),app:"uxa",level:i};this._.send(r)}},t.prototype.F=function(t,n){var i=xt(t)?this.D.anonymizePII(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.G=function(t){return xt(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.V()):this.V()},t.prototype.V=function(){var t=this.U.getVisitorService(),n=null==t?void 0:t.getVisitor();
if(!n)return"No context";var i=this.U.getSessionService(),r=i&&i.getSession(),e={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(e)},t.prototype.q=function(t,n){if(Ut[t]<this.j)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Ht,0)))return this.W(n,Dt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,jt,0)))return this.W(n,Dt.DYNAMIC);var i=this.H[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,function(t){return t===
n}))},t.prototype.W=function(t,n){return t in this.B[n]?!(this.B[n][t]>=5)&&(this.B[n][t]+=1,!0):(this.B[n][t]=1,!0)},t}(),Bt="undefined"==typeof window,qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:process;function Ft(t,n){return void 0!==qt[t]?qt[t]:n}var Gt=!Bt&&document.createElement("a"),Vt=/(:443|:80)$/;function Wt(t){return Gt?(Gt.href=t,Gt.href):""}function Yt(t){var n=Kt(t);return null===n?"":decodeURIComponent(n.hostname)}function Jt(t,n){return csArray.prototype.some.call(n,
function(n){return Nt(t,".".concat(n))||t===n||""===n})}function $t(t){return csString.prototype.replace.call(t,Vt,"")}function Kt(t){return Gt&&(Rt(t,"http://")||Rt(t,"https://"))?(Gt.href=t,{hash:Gt.hash,host:$t(Gt.host),hostname:Gt.hostname,href:Gt.href,origin:Gt.origin?Gt.origin:$t("".concat(Gt.protocol,"//").concat(Gt.host)),pathname:(n=Gt.pathname,"/"===n[0]?n:"/".concat(n)),port:Gt.port,protocol:Gt.protocol,search:Gt.search}):null;var n}var Zt,Xt,Qt,tn,nn="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView=
"afterPageView",t.GetSessionKey="getSessionKey"}(Zt||(Zt={})),function(t){t.Parent="parent",t.Child="child"}(Xt||(Xt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",
t.Commands="commands",t.IntegrationCallback="integrationCallback",t.StaticResource="staticResource",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage",t.CustomError="customError"}(Qt||(Qt={})),function(t){t.buildBaseMessage=function(t,n,i,r){var e={type:t,from:n,pid:i,signature:nn};return void 0!==r&&r>=0&&(e.id=r),e},t.isMessageValid=function(t,n,i,r){var e=Yt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===nn&&
t.data.from===n&&t.data.pid===i&&Jt(e,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(tn||(tn={}));var rn=function(){function t(t){this.L=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=st.warn);var r={message:t,errorCode:n,level:i},e=tn.buildBaseMessage(Qt.ChildLogMessage,Xt.Child,
this.L.projectId);e.content=r,tn.sendPostMessage(window.parent,"*",e)},t}(),en=function(){function t(){}return t.prototype.setContext=function(t,n){this.Y=t,this.J=n},t.prototype.getVisitorService=function(){return this.Y},t.prototype.getSessionService=function(){return this.J},t}(),sn=["t.contentsquare.net","clicktale"];window.addEventListener("error",function(t){"string"!=typeof t.filename||!csArray.prototype.some.call(sn,function(n){return csString.prototype.indexOf.call(t.filename,n)>-1})||csString.prototype.indexOf.call(t.filename,
"blob")>-1&&(null==t.message?void 0:csString.prototype.indexOf.call(t.message,"importScripts"))>-1||un.error("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))});var un=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(sn,t)},t.setStrategy=function(n){t.$=n},t.computeIsActive=function(n){t.K=rt.boolean(n),t.K?t.Z=rt.boolean(10):t.Z=!1},t.isLoggingActive=function(){return t.K},
t.getStrategy=function(){return t.$},t.debug=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,st.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,st.warn)},t.error=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,st.error)},t.critical=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,st.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{var s=n.apply(void 0,r);return _t(window.Promise)&&
s instanceof window.Promise?s.then(function(t){return t},function(n){return i.error(n,t)}):s}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.Z},t.K=!1,t.Z=!1,t}(),on={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}};
var hn,cn,an,fn,vn=function(t){return function(n,i,r){var e=(null==i?void 0:i.toString())||"",s=t||"".concat(n.constructor&&n.constructor.name,".").concat(e);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var e=n.apply(void 0,i);return _t(window.Promise)&&e instanceof window.Promise?e.then(function(t){return t},function(n){return on.error(n,t)}):e}catch(n){try{on.error(n,
t)}catch(t){}}}}(s,u.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=(new RegExp("(^|;)[ ]*".concat(t,"\x3d([^;]*)"))).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,e,s,u,o){var h=encodeURIComponent("".concat(i)),c=e===t.CURRENT_DOMAIN?void 0:e,a=r(s),f=a?";expires\x3d".concat(a.toUTCString()):"",v=Pt(c)?";domain\x3d".concat(c):"",l="".concat(n,"\x3d").concat(h).concat(f).concat(";path\x3d/").concat(v);return _t(u)&&u!==an.NotSet&&(l="".concat(l,";SameSite\x3d").concat(u)),
_t(o)&&o===fn.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return Ot(t)?new csDate(At()+t):t}function e(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),an.None,fn.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=e,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var s="_cs_root-domain",u=n(s);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,
"."),h=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(s,h=csArray.prototype.join.call([csArray.prototype.pop.call(o),h],"."),h,void 0,t,r),u=n(s);return e(s,h),h}}(hn||(hn={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(cn||(cn={})),function(t){t.None="None",t.Lax="Lax",t.NotSet=
"X"}(an||(an={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(fn||(fn={}));var ln=function(){function t(t,n,i){this.L=t,this.X=n,this.tt=i,this.nt=!1,this.it=an.NotSet,this.et=fn.No}return t.prototype.getSameSiteFlag=function(){return this.it},t.prototype.getSecureFlag=function(){return this.et},t.prototype.getDomain=function(){return this.st},t.prototype.getRootDomain=function(){return this.ut},t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled){var t=this.ot(),n=this.ht();this.nt=
this.ft(t,n),this.nt?(this.it=t,this.et=n):this.L.secureCookiesEnabled&&"https:"===this.X.getUrlProtocol()&&(this.et=fn.Yes),this.ut=this.vt(),this.st=this.lt(this.ut)}},t.prototype.ft=function(n,i){return!cn.browserIsSafariV12()&&(hn.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!hn.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(hn.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ot=function(){return"http:"===this.X.getUrlProtocol()?an.Lax:this.tt.isSameSiteNoneSecureNeeded()||
this.L.crossDomainTracking?an.None:an.Lax},t.prototype.ht=function(){return"http:"===this.X.getUrlProtocol()?fn.No:this.L.secureCookiesEnabled||this.L.crossDomainTracking||this.tt.isSameSiteNoneSecureNeeded()?fn.Yes:fn.No},t.prototype.isSameSiteSupported=function(){return this.nt},t.prototype.set=function(t,n,i){var r=hn.toExpireDate(i);hn.set(t,n,this.st,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=(new RegExp("(^|;)[ ]*".concat(t,"\x3d([^;]*)"))).exec(document.cookie);
return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.st;hn.remove(t,i)},t.prototype.vt=function(){var t=this.tt.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?an.None:void 0,i=t?fn.Yes:void 0;return hn.getRootDomain(n,i)},t.prototype.lt=function(t){return this.L.allowSubdomains?t:hn.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),dn="_cs_t",wn=function(){function t(t,n){this.wt=t,this.L=n,this.yt=!1,
this.gt=!1}return t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled&&this.wt.isTopWindowTracker()&&"cookie"in document){if(!this.wt.isInIframeContext()&&hn.isCookiePresent())return this.yt=!0,void(this.gt=!1);if(hn.set(dn,"1",hn.CURRENT_DOMAIN),null!==hn.get(dn))return this.yt=!0,this.gt=!1,void hn.remove(dn,hn.CURRENT_DOMAIN);hn.set(dn,"1",hn.CURRENT_DOMAIN,void 0,an.None,fn.Yes),null!==hn.get(dn)&&(this.yt=!0,this.gt=!0,hn.remove(dn,hn.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=
function(){return this.yt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.gt},t}();var yn,pn=function(){function t(t,n){this.L=t,this.tt=n}return t.prototype.canTrack=function(){return this.L.isProjectActive()&&this.St()&&this.Et()&&this.At()},t.prototype.canTrackInChild=function(){return this.L.isProjectActive()&&this.bt()&&(this.Et()||this.Rt())},t.prototype.At=function(){return this.L.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,
t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.tt.areCookiesEnabled()},t.prototype.Et=function(){return Jt(window.location.hostname,this.L.hostnames)},t.prototype.St=function(){return!this.Nt()&&this.Tt()},t.prototype.bt=function(){return!this.Nt()&&this.Ot()},t.prototype.Rt=function(){return nt(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Nt=function(){return"visibilityState"in
document&&"prerender"===document.visibilityState},t.prototype.Tt=function(){return this.It()&&!!window.localStorage},t.prototype.Ot=function(){return this.It()},t.prototype.It=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&
"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),mn=function(){function t(t){var n=this;this.kt=!1,this.Ct=new Map,this._t=new Map,this.Pt=new Map,this.Mt="CS_WORKER_SIGNATURE";var i="\n    const algorithm \x3d ".concat(t.algorithm,";\n    const compressor \x3d (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t\x3dfunction(){return t\x3dObject.assign||function(e){for(var t,r\x3d1,n\x3darguments.length;r\x3cn;r++)for(var o in t\x3darguments[r])Object.prototype.hasOwnProperty.call(t,o)\x26\x26(e[o]\x3dt[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r\x3dPromise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t\x3de.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n\x3dn.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a\x3d{label:0,sent:function(){if(1\x26o[0])throw o[1];return o[1]},trys:[],ops:[]};return s\x3d{next:i(0),throw:i(1),return:i(2)},"function"\x3d\x3dtypeof Symbol\x26\x26(s[Symbol.iterator]\x3dfunction(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r\x3d1,n\x26\x26(o\x3d2\x26s[0]?n.return:s[0]?n.throw||((o\x3dn.return)\x26\x26o.call(n),0):n.next)\x26\x26!(o\x3do.call(n,s[1])).done)return o;switch(n\x3d0,o\x26\x26(s\x3d[2\x26s[0],o.value]),s[0]){case 0:case 1:o\x3ds;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n\x3ds[1],s\x3d[0];continue;case 7:s\x3da.ops.pop(),a.trys.pop();continue;default:if(!((o\x3d(o\x3da.trys).length\x3e0\x26\x26o[o.length-1])||6!\x3d\x3ds[0]\x26\x262!\x3d\x3ds[0])){a\x3d0;continue}if(3\x3d\x3d\x3ds[0]\x26\x26(!o||s[1]\x3eo[0]\x26\x26s[1]\x3co[3])){a.label\x3ds[1];break}if(6\x3d\x3d\x3ds[0]\x26\x26a.label\x3co[1]){a.label\x3do[1],o\x3ds;break}if(o\x26\x26a.label\x3co[2]){a.label\x3do[2],a.ops.push(s);break}o[2]\x26\x26a.ops.pop(),a.trys.pop();continue}s\x3dt.call(e,a)}catch(e){s\x3d[6,e],n\x3d0}finally{r\x3do\x3d0}if(5\x26s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}Object.create,Object.create,function(e){e.UNCOMPRESSED\x3d"0",e.GZIP\x3d"2"}(e||(e\x3d{}));var o,s\x3dfunction(){function r(e){var t\x3dthis;this.queryParams\x3d{},this.headers\x3d{},this.handleRecoveredRequests\x3dfunction(e){for(var r\x3d0,n\x3de;r\x3cn.length;r++){var o\x3dn[r],s\x3do.metadata,a\x3do.events;t.send(a,s)}},this.endpoint\x3de.endpoint,this.compressionOpts\x3de.compressionOpts,this.recoveryStorage\x3de.recoveryStorage,this.recoveryStorage\x26\x26this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams\x3dfunction(e){var t\x3dthis;Object.keys(e).forEach((function(r){t.queryParams[r]\x3de[r]}))},r.prototype.removeQueryParams\x3dfunction(e){var t\x3dthis;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams\x3d{}},r.prototype.send\x3dfunction(r,n){var o\x3dthis,s\x3dn||t({},this.queryParams),a\x3d!("ct"in s),i\x3d"string"!\x3dtypeof r\x26\x26!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts\x26\x26a?s.ct\x3dthis.compressionOpts.compressionType:s.ct\x3de.UNCOMPRESSED);var c\x3di?JSON.stringify(r):r,u\x3dObject.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"\x3d").concat(encodeURIComponent(s[e]))})).join("\x26"),h\x3d"".concat(this.endpoint,"?").concat(u);this.compressionOpts\x26\x26a\x26\x26"string"\x3d\x3dtypeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad\x3dfunction(e){this.onLoadCallback\x3de},r.prototype.onError\x3dfunction(e){this.onErrorCallback\x3de},r.prototype.onTimeout\x3dfunction(e,t){this.onTimeoutCallback\x3de,this.timeout\x3dt},r.prototype.abort\x3dfunction(){this.abortCurrentXhrCall\x26\x26this.abortCurrentXhrCall()},r.prototype.setRequestHeader\x3dfunction(e,t){this.headers[e]\x3dt},r.prototype.getQueryParams\x3dfunction(){return this.queryParams},r.prototype.isArrayBuffer\x3dfunction(e){return e\x26\x26void 0!\x3d\x3de.byteLength},r.prototype.doSend\x3dfunction(e,t,r){var n\x3dthis,o\x3dnew XMLHttpRequest,s\x3dObject.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"\x3d").concat(encodeURIComponent(t[e]))})).join("\x26");o.open("POST",e),o.onload\x3dfunction(){if(n.recoveryStorage\x26\x26n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e\x3d{params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror\x3dfunction(){n.recoveryStorage\x26\x26n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback\x26\x26n.onErrorCallback({params:t})},this.timeout\x26\x26this.onTimeoutCallback\x26\x26(o.timeout\x3dthis.timeout,o.ontimeout\x3dfunction(){n.onTimeoutCallback()}),this.abortCurrentXhrCall\x3dfunction(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a\x3dfunction(){function e(e){this.maxStoredBytes\x3de,this.storageBytesUsed\x3d0}return e.prototype.addString\x3dfunction(e){this.storageBytesUsed+\x3d2*e.length},e.prototype.addArrayBuffer\x3dfunction(e){this.storageBytesUsed+\x3de.byteLength},e.prototype.isThresholdReached\x3dfunction(){return this.storageBytesUsed\x3ethis.maxStoredBytes},e.prototype.reset\x3dfunction(){this.storageBytesUsed\x3d0},e}(),i\x3dfunction(){function e(e){this.ramStorage\x3d{},this.byteSizeCounter\x3dnew a(e)}return e.prototype.save\x3dfunction(e){var t\x3de.key,r\x3de.metadata,n\x3de.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"\x3d\x3dtypeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]\x3d{metadata:r,events:n}))},e.prototype.recover\x3dfunction(e){var t\x3dthis,r\x3d[];this.getStorageKeys().forEach((function(e){var n\x3dt.ramStorage[e];void 0!\x3d\x3dn\x26\x26(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!\x3d\x3dr.length\x26\x26(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys\x3dfunction(){return Object.keys(this.ramStorage)},e.prototype.removeItem\x3dfunction(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED\x3d0]\x3d"NOT_STARTED",e[e.OPEN_IN_PROGRESS\x3d1]\x3d"OPEN_IN_PROGRESS",e[e.OPEN_FAILED\x3d2]\x3d"OPEN_FAILED",e[e.READY\x3d3]\x3d"READY"}(o||(o\x3d{}));var c\x3dfunction(){function e(e,t,r){this.storageName\x3de,this.onOpenError\x3dr,this.cacheState\x3do.NOT_STARTED,this.toBeSavedBuffer\x3d[],this.recoveryInProgress\x3d0,this.origin\x3dself.origin,this.context\x3d"object"\x3d\x3dtypeof window?"":"worker-",this.byteSizeCounter\x3dnew a(t),this.init()}return e.prototype.init\x3dfunction(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState\x3d\x3d\x3do.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer\x3dfunction(){var e\x3dthis;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer\x3d[]},e.prototype.save\x3dfunction(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState\x3d\x3d\x3do.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!\x3d\x3do.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t\x3de.key,r\x3de.metadata,s\x3de.events,this.byteSizeCounter.addString(t),"string"\x3d\x3dtypeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover\x3dfunction(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!\x3d\x3do.READY)return[2];t.label\x3d2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache\x3dfunction(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState\x3do.OPEN_IN_PROGRESS,e\x3dthis,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache\x3dt.sent(),this.cacheState\x3do.READY,[3,3];case 2:return t.sent(),this.cacheState\x3do.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover\x3dfunction(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a\x3dthis;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress\x3e1?[2]:[4,this.cache.keys()];case 1:return 0\x3d\x3d\x3d(t\x3dn.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r\x3dn.sent(),o\x3dr.map((function(e){var t\x3d{};e.headers.forEach((function(e,r){t[r]\x3de})),delete t["content-type"];var r\x3dt.datatype;return delete t.datatype,"json"\x3d\x3d\x3dr||"base64"\x3d\x3d\x3dr?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s\x3dn.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u\x3dfunction(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save\x3dfunction(e){this.storageStrategy.save(e)},e.prototype.recover\x3dfunction(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy\x3dfunction(t){var r\x3dthis;this.storageStrategy\x3dnew c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy\x3dfunction(t){var r\x3dthis;this.storageStrategy\x3dnew i(e.MAX_SIZE),t\x26\x26t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE\x3d16777216,e}();!function(){var e\x3d"CS_WORKER_SIGNATURE",t\x3dnew Map,o\x3dnew u("csPersisted");function a(r){var n;if((n\x3dr)\x26\x26n.WORKER_SIGNATURE\x3d\x3d\x3de)switch(r.type){case"CreatePostRequest":var a\x3dr.endpoint,i\x3dr.compressionOutputType,c\x3dr.useRetry,u\x3d{endpoint:a};i\x26\x26(u.compressionOpts\x3d{compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c\x26\x26(u.recoveryStorage\x3do);var h\x3dnew s(u);t.set(a,h),h.onLoad((function(t){var r\x3d{type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),h.onError((function(t){var r\x3d{type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var p\x3dr.endpoint,f\x3dr.queryParams;(h\x3dt.get(p))\x26\x26h.setQueryParams(f);break;case"RemoveQueryParams":p\x3dr.endpoint,f\x3dr.queryParams,(h\x3dt.get(p))\x26\x26h.removeQueryParams(f);break;case"Send":p\x3dr.endpoint;var y\x3dr.payload;f\x3dr.queryParams,(h\x3dt.get(p))\x26\x26h.send(y,f);break;case"Abort":p\x3dr.endpoint,(h\x3dt.get(p))\x26\x26h.abort();break;case"SetHeader":p\x3dr.endpoint;var d\x3dr.headerName,l\x3dr.headerValue;(h\x3dt.get(p))\x26\x26h.setRequestHeader(d,l);break;case"SetTimeout":var v\x3dr.endpoint,S\x3dr.timeout;(h\x3dt.get(v))\x26\x26h.onTimeout((function(){var t\x3d{type:"onTimeout",endpoint:v,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r\x3de.getReader(),n.label\x3d1;case 1:return[4,r.read()];case 2:return o\x3dn.sent(),s\x3do.done,a\x3do.value,s?[3,3]:(t(a),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');
try{this.Lt=this.xt(i),this.kt=!0,this.Dt()&&(this.Ut=new ReadableStream({start:function(t){n.jt=t}}),this.Lt.postMessage(this.Ut,[this.Ut]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.kt=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Mt,this.Lt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Mt,this.jt.enqueue(t)},t.prototype.xt=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,e=window.Worker,
s=new r([t],{type:"application/javascript"}),u=i.createObjectURL(s);un.whiteListFilename(u);var o=new e(u);return o.onmessage=function(t){var i=t.data,r=i.type,e=i.endpoint;if(i.WORKER_SIGNATURE===n.Mt)if("onLoad"===r){var s=t.data.response;(u=n.Ct.get(e))&&u(s)}else if("onError"===r){s=t.data.response;(u=n._t.get(e))&&u(s)}else if("onTimeout"===r){var u;(u=n.Pt.get(e))&&u()}},o},t.prototype.registerOnLoadCallback=function(t,n){this.Ct.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this._t.set(t,
n)},t.prototype.registerOnTimeoutCallback=function(t,n){this.Pt.set(t,n)},t.prototype.isSupported=function(){return this.kt},t.prototype.Dt=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),gn=function(){function t(t){this.Ht={},this.zt=t.endpoint,this.Bt=t.networkWorker,this.qt=t.compressionOutputType,this.Ft=t.useRetry,this.Bt.postMessage({type:"CreatePostRequest",endpoint:this.zt,compressionOutputType:this.qt,useRetry:this.Ft})}return t.prototype.setQueryParams=
function(t){var n=this;this.Bt.postMessage({type:"SetQueryParams",endpoint:this.zt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),function(i){n.Ht[i]=t[i]})},t.prototype.getQueryParams=function(){return this.Ht},t.prototype.removeQueryParams=function(t){var n=this;this.Bt.postMessage({type:"RemoveQueryParams",endpoint:this.zt,queryParams:t}),t&&csArray.prototype.forEach.call(t,function(t){delete n.Ht[t]})},t.prototype.send=function(t,n){this.Bt.postMessage({type:"Send",endpoint:this.zt,
payload:t,queryParams:n})},t.prototype.abort=function(){this.Bt.postMessage({type:"Abort",endpoint:this.zt})},t.prototype.onLoad=function(t){this.Bt.registerOnLoadCallback(this.zt,t)},t.prototype.onError=function(t){this.Bt.registerOnErrorCallback(this.zt,t)},t.prototype.setRequestHeader=function(t,n){this.Bt.postMessage({type:"SetHeader",endpoint:this.zt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.Bt.registerOnTimeoutCallback(this.zt,t),this.Bt.postMessage({type:"SetTimeout",
endpoint:this.zt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(yn||(yn={}));var Sn,En,An,bn,Rn=function(t){this.onError=t},Nn=function(){function t(t){var n=this;this.Ht={},this.Gt={},this.Vt=function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i],s=e.metadata,u=e.events;n.send(u,s)}},this.zt=t.endpoint,this.Wt=t.compressionOpts,this.Yt=t.recoveryStorage,this.Yt&&this.Yt.recover(this.Vt)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach(function(i){n.Ht[i]=
t[i]})},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach(function(t){delete n.Ht[t]}):this.Ht={}},t.prototype.send=function(t,n){var i=this,r=n||J({},this.Ht),e=!("ct"in r),s="string"!=typeof t&&!this.Jt(t);"ct"in r||(this.Wt&&e?r.ct=this.Wt.compressionType:r.ct=yn.UNCOMPRESSED);var u=s?JSON.stringify(t):t,o=Object.keys(r).map(function(t){return"".concat(encodeURIComponent(t),"\x3d").concat(encodeURIComponent(r[t]))}).join("\x26"),h="".concat(this.zt,"?").concat(o);this.Wt&&e&&"string"==
typeof u?this.Wt.compressor(u,this.Wt.compressionOutputType,function(t){return i.$t(h,r,t)}):this.$t(h,r,u)},t.prototype.onLoad=function(t){this.Kt=t},t.prototype.onError=function(t){this.Zt=t},t.prototype.onTimeout=function(t,n){this.Xt=t,this.Qt=n},t.prototype.abort=function(){this.tn&&this.tn()},t.prototype.setRequestHeader=function(t,n){this.Gt[t]=n},t.prototype.getQueryParams=function(){return this.Ht},t.prototype.Jt=function(t){return t&&void 0!==t.byteLength},t.prototype.$t=function(t,n,i){var r=
this,e=new XMLHttpRequest,s=Object.keys(n).map(function(t){return"".concat(encodeURIComponent(t),"\x3d").concat(encodeURIComponent(n[t]))}).join("\x26");e.open("POST",t),e.onload=function(){if(r.Yt&&r.Yt.recover(r.Vt),r.Kt){var t={params:n,responseText:e.responseText,status:e.status};r.Kt(t)}},e.onerror=function(){r.Yt&&r.Yt.save({key:s,metadata:n,events:i}),r.Zt&&r.Zt({params:n})},this.Qt&&this.Xt&&(e.timeout=this.Qt,e.ontimeout=function(){r.Xt()}),this.tn=function(){return e.abort()},Object.keys(this.Gt).forEach(function(t){e.setRequestHeader(t,
r.Gt[t])}),e.send(i)},t}(),Tn=function(){function t(t){this.nn=t,this.Bt=new mn(this.nn)}return t.prototype.create=function(t,n,i,r){if(this.Bt.isSupported()&&n)return new gn({networkWorker:this.Bt,endpoint:t,compressionOutputType:i,useRetry:!!r});var e=i?{compressor:this.nn.compress,compressionOutputType:i,compressionType:this.nn.algorithm}:void 0;return new Nn({endpoint:t,compressionOpts:e,recoveryStorage:r})},t}(),On=function(){function t(t,n,i,r,e){this.Y=t,this.J=n,this.rn=i,this.en=r,this.L=
e}return t.prototype.get=function(){return{exclusion:this.rn.getAppliedTrackingDraw(),visitor:this.Y.getVisitor(),session:this.J.getSession(),cvars:this.en.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.rn.exclude(this.L),this.Y.removeVisitor(),this.J.removeSession(),this.en.removeCustomVariablesSession()},t.prototype.include=function(t){this.rn.removeExclusion(),this.Y.setVisitor(t.visitor),t.session?
this.J.setSession(t.session):this.J.removeSession(),t.cvars?this.en.setCustomVariableSession(t.cvars):this.en.removeCustomVariablesSession()},t}();!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=
11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",t[t.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=
23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",
t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=
62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE",t[t.RESOURCE_HASHES=66]="RESOURCE_HASHES",t[t.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",t[t.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",t[t.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",t[t.TEXT_REF=73]="TEXT_REF",t[t.TOUCH_CANCEL=74]="TOUCH_CANCEL",t[t.MUTATION_MOVE=75]="MUTATION_MOVE"}(Sn||(Sn={})),function(t){t[t.RECORDING_CONSENT_FOR_SESSION_GRANTED=
1]="RECORDING_CONSENT_FOR_SESSION_GRANTED",t[t.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN=2]="RECORDING_CONSENT_FOR_SESSION_WITHDRAWN"}(En||(En={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(An||(An={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(bn||(bn={}));function In(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,
t.listener,n)}function kn(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}function Cn(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}var _n=function(t,n){return _n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},_n(t,n)};function Pn(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+
" is not a constructor or null");function i(){this.constructor=t}_n(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var Mn=function(){return Mn=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Mn.apply(this,arguments)};function Ln(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==
typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}Object.create;function xn(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function Dn(t,n){"number"==typeof n&&(n={wait:n});
var i,r=n.wait;if(n.ignoreThrottledCalls){var e=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=At();if(s-e>r)return e=s,t.apply(this,n)}}var s,u=[],o=null,h=0,c=function(){h=At(),o=null,s=t.apply(i,u)},a=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var a=At(),f=r-(a-h);return i=null!=this?this:window,u=xn([],n,!0),f<=0||f>r?(h=a,s=t.apply(i,u),o?(window.clearTimeout(o),o=null):u=[]):o||(o=window.setTimeout(c,f)),s};return a.cancel=function(){o&&
(window.clearTimeout(o),h=0,o=null,u=[])},a.flushPending=function(){o&&(window.clearTimeout(o),c())},a}var Un,jn;!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=
15]="CTRL",t[t.META=16]="META"}(Un||(Un={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(jn||(jn={}));var Hn=function(){function t(){}return t.isEmpty=function(){return 0===t.un.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,X([t.un],n,!1))},t.getAll=function(){return t.un},t.clear=function(){t.un=[]},t.un=[],t}(),zn=50,Bn=.1;var qn=!1;var Fn=[],Gn=[];var Vn=function(t){return function(n,i,r){var e=r.value;r.value=function(){if(!qn)return r.value=
e,e.apply(this,arguments);!function(t){csArray.prototype.push.call(Fn,t),performance.mark("".concat(t,"-start"))}(t);var n=e.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=Bn&&csArray.prototype.push.call(Gn,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(Fn),0===Fn.length&&(i>zn&&Hn.add(Gn),Gn=[])}}(t),n}}},Wn=function(t){return function(n,i,r){var e=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=
arguments[i];if(!qn)return r.value=e,e.apply(this,n);!function(t){performance.mark("".concat(t,"-start"))}(t);var s=e.apply(this,n);return s.then(function(){!function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>zn&&Hn.add([{mName:t,mDuration:+i.toFixed(2)}])}}(t)}),s}}};function Yn(t){var n=csEventtarget.apply(t);return n&&a(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function Jn(){return function(t,n,i){var r=i.value;
i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&Jn.enabled||r.call(this,t,n)}}}Jn.enabled=!0;var $n,Kn=!!window.chrome,Zn="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(Pt(t)&&function(t){try{if(Pt(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&Lt(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Zn))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(Zn,"]"))}}($n||
($n={}));var Xn=function(){function t(t,n){var i=this;this.hn=t,this.cn=n,this.an=new Set,this.fn=[],this.vn=[{type:"pointerup",listener:function(t){return i.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return i.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return i.pointerDownListener(t)},boundElement:document}],this.ln=[{type:"touchstart",listener:function(t){return i.touchStartListener(t)},boundElement:document},
{type:"touchmove",listener:function(t){return i.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return i.touchEndCancelListener(t)},boundElement:document},{type:"touchcancel",listener:function(t){return i.touchEndCancelListener(t)},boundElement:document}],this.dn=[{type:"click",listener:function(t){return i.clickListener(t)},boundElement:document},{type:"keyup",listener:function(t){return i.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return i.keyDownListener(t)},
boundElement:document},{type:"copy",listener:function(t){return i.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return i.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return i.pasteListener(t)},boundElement:document},{type:"scroll",listener:function(t){return i.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return i.mouseOverListener(t)},boundElement:document}],this.wn=[{type:"scroll",listener:function(t){return i.scrollListener(csEventtarget.apply(t))}}];
var r=function(t){if(!kt(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===r||r&&r>=16)&&csArray.prototype.push.call(this.wn,{type:"mouseover",listener:function(t){return i.mouseOverListener(t)}})}var n;return t.prototype.init=function(){this.yn(),this.mn(),this.gn(),this.Sn()},t.prototype.Sn=function(){var t=this;this.hn.onDocumentIdentified(function(n){t.En(n)})},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.fn,
t)},t.prototype.An=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.fn,function(i){return i(t,n)})},t.prototype.start=function(){this.bn()},t.prototype.stop=function(){this.Rn()},t.prototype.mn=function(){var t;this.Nn()&&(t=csArray.prototype.push).call.apply(t,X([this.dn],this.vn,!1))},t.prototype.yn=function(){var t;this.Tn()&&(t=csArray.prototype.push).call.apply(t,X([this.dn],this.ln,!1))},t.prototype.En=function(t){R(t)?csArray.prototype.forEach.call(this.dn,function(t){return In(t)}):
this.an.has(t)||(this.an.add(t),csArray.prototype.forEach.call(this.wn,function(n){var i=n;i.boundElement=t,In(i)}))},t.prototype.On=function(t){R(t)?csArray.prototype.forEach.call(this.dn,function(t){return kn(t)}):(this.an.delete(t),csArray.prototype.forEach.call(this.wn,function(n){var i=n;i.boundElement=t,kn(i)}))},t.prototype.Nn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.Tn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},
t.prototype.Rn=function(){var t=this;this.On(document),this.an.forEach(function(n){return t.On(n)})},t.prototype.bn=function(){this.In()},t.prototype.In=function(){var t=$n.getScrollContainer()||document,n=this.hn.getId(t);if(n){var i=this.kn(t);if(0!==i.top||0!==i.left){var r={type:Sn.SCROLL,args:[n,i.left,i.top],date:At()};this.An(r,!0)}}},t.prototype.kn=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=
function(t){if(!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var n=this.hn.getId(t);if(n){var i=this.kn(t),r={type:Sn.SCROLL,args:[n,i.left,i.top],date:At()};this.An(r)}}},t.prototype.mouseOverListener=function(t){if(!this.cn.isSensitiveChild(t.target)){var n=this.hn.getId(t.target);if(n){var i={type:Sn.MOUSE_OVER,args:[n],date:At()};this.An(i)}}},t.prototype.clickListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLICK,args:[i],
date:At()};this.An(r)}}},t.prototype.keyUpListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r=this.Cn[t.key];if(void 0!==r){var e={type:Sn.KEY_UP,args:[i,r],date:At()};this.An(e)}}}},t.prototype.keyDownListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r=this.Cn[t.key];if(void 0!==r){var e={type:Sn.KEY_DOWN,args:[i,r],date:At()};this.An(e)}}}},t.prototype.copyListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=
this.hn.getId(n);if(i){var r={type:Sn.CLIPBOARD_COMMAND,args:[i,jn.COPY],date:At()};this.An(r)}}},t.prototype.cutListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLIPBOARD_COMMAND,args:[i,jn.CUT],date:At()};this.An(r)}}},t.prototype.pasteListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLIPBOARD_COMMAND,args:[i,jn.PASTE],date:At()};this.An(r)}}},t.prototype.pointerUpListener=function(t){var n=
Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.POINTER_UP,args:[t.pointerId,t.pointerType,Cn(t.clientX,1),Cn(t.clientY,1),i,t.button],date:At()};this.An(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:Sn.POINTER_MOVE,args:[t.pointerId,t.pointerType,Cn(t.clientX,1),Cn(t.clientY,1)],date:At()};this.An(n)},t.prototype.pointerDownListener=function(t){var n=Yn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.POINTER_DOWN,
args:[t.pointerId,t.pointerType,Cn(t.clientX,1),Cn(t.clientY,1),i,t.button,{pageX:Cn(t.pageX,1),pageY:Cn(t.pageY,1)}],date:At()};this.An(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:Sn.TOUCH_START,args:[r.identifier,Cn(r.clientX,1),Cn(r.clientY,1)],date:At()};this.An(e)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:Sn.TOUCH_MOVE,
args:[r.identifier,Cn(r.clientX,1),Cn(r.clientY,1)],date:At()};this.An(e)}},t.prototype.touchEndCancelListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:"touchend"===t.type?Sn.TOUCH_END:Sn.TOUCH_CANCEL,args:[r.identifier,Cn(r.clientX,1),Cn(r.clientY,1)],date:At()};this.An(e)}},t.prototype.gn=function(){this.Cn={},this.Cn[" "]=Un.SPACE,this.Cn.Spacebar=Un.SPACE,this.Cn.Backspace=Un.BACKSPACE,this.Cn.Enter=Un.ENTER,this.Cn.Delete=Un.DELETE,this.Cn.ArrowUp=
Un.ARROWUP,this.Cn.ArrowDown=Un.ARROWDOWN,this.Cn.ArrowLeft=Un.ARROWLEFT,this.Cn.ArrowRight=Un.ARROWRIGHT,this.Cn.Up=Un.ARROWUP,this.Cn.Down=Un.ARROWDOWN,this.Cn.Left=Un.ARROWLEFT,this.Cn.Right=Un.ARROWRIGHT,this.Cn.CapsLock=Un.CAPSLOCK,this.Cn.Shift=Un.SHIFT,this.Cn.Tab=Un.TAB,this.Cn.Escape=Un.ESCAPE,this.Cn.Esc=Un.ESCAPE,this.Cn.End=Un.END,this.Cn.Alt=Un.ALT,this.Cn.Control=Un.CTRL,this.Cn.Meta=Un.META},$([Vn("RecordingPageEvents.start")],t.prototype,"start",null),$([vn("scroll")],t.prototype,
"scrollListener",null),$([vn("mouseOver"),Jn(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(Yn(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),$([vn("click"),Jn()],t.prototype,"clickListener",null),$([vn("Event handler type: keyup")],t.prototype,"keyUpListener",null),$([vn("Event handler type: keydown")],t.prototype,"keyDownListener",null),$([vn("Event handler type: copy")],t.prototype,"copyListener",null),$([vn("Event handler type: cut")],
t.prototype,"cutListener",null),$([vn("Event handler type: paste")],t.prototype,"pasteListener",null),$([vn("Event handler type: pointerup"),Jn()],t.prototype,"pointerUpListener",null),$([vn("Event handler type: pointermove"),Jn(),(n={wait:33,ignoreThrottledCalls:!0},function(t,i,r){r.value=Dn(r.value,n)})],t.prototype,"pointerMoveListener",null),$([vn("Event handler type: pointerdown"),Jn()],t.prototype,"pointerDownListener",null),$([vn("Event handler type: touchstart"),Jn()],t.prototype,"touchStartListener",
null),$([vn("Event handler type: touchmove"),Jn()],t.prototype,"touchMoveListener",null),$([vn("Event handler type: touchend-cancel"),Jn()],t.prototype,"touchEndCancelListener",null),t}();function Qn(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),e=0;e<i;e+=1)r[e]=t[e];return r}function ti(t,n,i){for(var r=0,e=0;e<t.length;e+=1)for(var s=n(t[e]),u=0;u<s.length;u++)i(s[u],r++);return[]}function ni(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var e=0,s=
t.next();!s.done;)n(s.value,e++),s=t.next()}function ii(t,n){for(var i=t.length,r=[],e=0;e<i;e+=1){var s=t[e];n(s)&&csArray.prototype.push.call(r,s)}return r}var ri=Ft("queueMicrotask",setTimeout),ei=[];function si(t){0==ei.length&&ui(function(){for(var t=0,n=ei;t<n.length;t++)(0,n[t])();ei=[]}),csArray.prototype.push.call(ei,t)}function ui(t,n){void 0===n&&(n=10),ri(0===n?t:function(){return ui(t,n-1)})}var oi,hi,ci,ai=function(){function t(t,n,i,r,e,s,u){void 0===u&&(u=document);var o=this;this._n=
t,this.Pn=n,this.Mn=i,this.Ln=r,this.hn=e,this.cn=s,this.xn=u,this.Dn=!1,this.Un=function(t){o.Ln.emitInitialDomDone(t)},this.jn=function(t){var n=o.hn.getId(t.target);if(n){var i=t.target.getBoundingClientRect();if(i.width!==t.target.__contentsquare_width||i.height!==t.target.__contentsquare_height){t.target.__contentsquare_width=i.width,t.target.__contentsquare_height=i.height;var r={args:[n,null,"style","width:".concat(i.width,"px !important;height:").concat(i.height,"px !important;")],date:At(),
type:Sn.MUTATION_ATTRIBUTE};o.Hn(r)}}},this.Pn.onCharacterDataMutation(function(t){o.zn(t)}),this.Pn.onAttributesMutation(function(t){o.Bn(t)}),this.Pn.onChildListMutation(function(t,n){ni(t.addedNodes,function(t){o.cn.identifySensitiveNodes(t),o.hn.identifyNodes(t,n)}),o.qn(t,n),ni(t.removedNodes,function(t){o.cn.unidentifySensitiveNodes(t)})}),this.Pn.onAttachShadowMutation(function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(o.cn.identifySensitiveNodes(t.target),o.hn.identifyNodes(csElementshadowRoot.apply(t.target)),
si(function(){return o.Fn(t)}))}),this.cn.onSensitiveElementResize(this.jn)}return t.prototype.onEvent=function(t){this.Hn=t},t.prototype.isStarted=function(){return this.Dn},t.prototype.start=function(){this.isStarted()||(this.Dn=!0,this.Pn.start(),this.Gn())},t.prototype.stop=function(){this.isStarted()&&(this.Dn=!1,this.cn.unidentifySensitiveNodes(this.xn),this.cn.disconnectResizeObserver(),this.Pn.stop())},t.prototype.flushEvents=function(){this.Pn.flushPendingMutations()},t.prototype.Gn=function(){this.Ln.emitInitialDomStart(),
this.cn.identifySensitiveNodes(this.xn),this.hn.identifyNodes(this.xn),this._n.serializeInitialDom(this.xn,this.Un)},t.prototype.Fn=function(t){if(!this.cn.isSensitive(t.target)&&!this.cn.isSensitiveChild(t.target)){var n=this._n.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:Sn.ATTACH_SHADOW};this.Hn(i)}}},t.prototype.Bn=function(t){if(!this.cn.isSensitiveChild(t.target)&&!this.cn.isSensitiveAttribute(t.target,t.attributeName)){var n=this._n.serializeMutationAttribute(t);if(n){var i=
{args:n,date:t.date,type:Sn.MUTATION_ATTRIBUTE};this.Hn(i),this.Mn.scanAttribute(t.target,t.attributeName)}}},t.prototype.zn=function(t){var n=t.target.parentElement;if(!n||!this.cn.isSensitive(n)&&!this.cn.isSensitiveChild(n)){var i=this._n.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:Sn.MUTATION_CHARACTER_DATA};this.Hn(r),this.Mn.scanText(t.target)}}},t.prototype.qn=function(t,n){var i=this;if(!this.cn.isSensitive(t.target)&&!this.cn.isSensitiveChild(t.target)){var r=this._n.serializeMutationChildList(t,
n);if(r){var e=r.removedNodes,s=r.addedNodes;csArray.prototype.forEach.call(e,function(n){var r={args:n,date:t.date,type:Sn.MUTATION_REMOVE};i.Hn(r)}),csArray.prototype.forEach.call(s,function(n){var r={args:n,date:t.date,type:Sn.MUTATION_INSERT};i.Hn(r)})}}},t}(),fi=function(){function t(t){this.Vn=t,this.Wn=0}return t.prototype.addString=function(t){this.Wn+=2*t.length},t.prototype.addArrayBuffer=function(t){this.Wn+=t.byteLength},t.prototype.isThresholdReached=function(){return this.Wn>this.Vn},
t.prototype.reset=function(){this.Wn=0},t}(),vi=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512E3),this.Yn=t,this.Jn=new fi(n)}return t.prototype.addEvent=function(t){this.Jn.addString(ot(t)),csArray.prototype.push.call(this.Yn,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.Yn.length;n+=1)if(this.Yn[n].date>t.date)break;csArray.prototype.splice.call(this.Yn,n,0,t)},t.prototype.eventsCount=function(){return this.Yn.length},t.prototype.clearEvents=function(){this.Jn.reset(),
this.Yn=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.Jn.isThresholdReached()},t.prototype.getEvents=function(){return this.Yn},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.Yn,function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)}),this.Yn=r,i},t.prototype.stringifyEvents=
function(){return ot(this.Yn)},t.prototype.$n=function(t){t.type===Sn.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)},$([Vn("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),li=function(){function t(){this.Kn=1}return t.prototype.getCurrentIndex=function(){return this.Kn},t.prototype.increment=function(){this.Kn+=1},t.prototype.reset=function(){this.Kn=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.Kn)}},t}(),di=function(){function t(){}
return t.prototype.emit=function(n,i,r,e){void 0===e&&(e=document);var s="".concat(void 0!==r?r:t.Zn),u="".concat(s).concat(n),o=t.createEvent(u,{detail:i});null!==o&&e.dispatchEvent(o)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Xn();if(null===i)return null;var r=n.bubbles,e=void 0!==r&&r,s=n.cancelable,u=void 0!==s&&s,o=n.detail;return i.initCustomEvent(t,e,u,o),i},t.Xn=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},
t.Zn="cs.tracking.",t}(),wi=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}();!function(t){t.BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",t.BLOCKED_BY_CONSENT_WITHDRAWN="W",t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",
t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(oi||(oi={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(hi||(hi={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(ci||(ci={}));var yi=function(){function t(t){var n=this;this.type="asyncEvent",this.Qn=!1,t&&t(function(t){return n.resolve(t)})}return t.prototype.resolve=function(t){if(this.Qn)throw new Error("AsyncEvent already resolve.");null==t.timestamp&&(t=J(J({},t),{timestamp:this.timestamp})),this.ti=t,this.Qn=!0,this.ni&&
this.ni(this.ti)},t.prototype.complete=function(t){this.Qn&&t(this.ti),this.ni=t},t.prototype.wait=function(){var t=this;return new Promise(function(n){return t.complete(n)})},t}(),pi=function(){function t(){this.ii=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.ei},enumerable:!1,configurable:!0}),t.prototype.pushAll=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},
t.prototype.push=function(t){this.ii++,this.si?this.si=this.si[1]=[t,void 0]:this.si=this.ei=[t,void 0]},t.prototype.pop=function(){if(!this.ei)return null;this.ii--;var t=this.ei[0];return this.ei=this.ei[1],this.ei||(this.si=void 0),t},t.prototype.forEach=function(t){for(var n=this.ei;null==n?void 0:n.length;)t(n[0]),n=n[1]},t.prototype.clear=function(){this.ii=0,this.ei=this.si=void 0},t}(),mi=function(){function t(t){this.ni=t,this.ui=new pi,this.oi=!1}return t.prototype.onEvent=function(t){if(this.ni)throw new Error("callback already set");
return this.ni=t,this},t.prototype.push=function(t){this.ui.push(t),this.hi()},t.pipe=function(n,i){for(var r=n,e=function(n){var i=new t(function(t){n.pushEvent(t)});ni(r,function(t){return t.subscribe(function(t){return i.push(t)})}),r=[n]},s=0,u=i;s<u.length;s++)e(u[s]);var o=new t;return ni(r,function(t){return t.subscribe(function(t){return o.push(t)})}),o},t.prototype.hi=function(){var t=this;if(!this.oi){if(this.oi=!0,!this.ni)throw new Error("callback not set");var n=this.ui.pop(),i=function(n){t.ni(n),
t.oi=!1,t.ui.isEmpty||t.hi()};n instanceof yi?n.complete(i):i(n)}},t}(),gi=function(){function t(t,n){void 0===n&&(n=[]);var i=this;this.producers=t,this.processors=n,this.Dn=!1,this.ci=[],this.ai=function(t){return csArray.prototype.forEach.call(i.ci,function(n){return n(t)})}}return t.prototype.start=function(){if(this.Dn)throw new Error("Recording is already started.");mi.pipe(this.producers,this.processors).onEvent(this.ai),ni(this.producers,function(t){return t.start()}),ni(this.processors,function(t){return t.start()}),
this.Dn=!0},t.prototype.stop=function(){for(var t=0,n=this.producers;t<n.length;t++)n[t].stop();for(var i=0,r=this.processors;i<r.length;i++)r[i].stop();this.Dn=!1,this.ci=[]},t.prototype.subscribe=function(t){var n=this;if(this.Dn)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.ci,t),function(){return n.ci=csArray.prototype.filter.call(n.ci,function(n){return n!==t})}},t}();var Si,Ei=function(){function t(t){this.fi=t}return t.prototype.start=function(){var t=
this;this.fi.subscribe(function(n){var i=n,r=i.timestamp;switch(i.type){case "Legacy":t.ni(i.originalEvent);break;case "CustomElementRegistration":t.ni({type:Sn.CUSTOM_ELEMENT_REGISTRATION,date:r,args:[i.tagName]});break;case "DomEvent":!function(t,n){var i=t.timestamp;switch(t.domEvent){case "initialDOM":var r=t.initialDOM;n({type:Sn.INITIAL_DOM,date:i,args:[r]});break;case "nodesAdded":csArray.prototype.forEach.call(t.nodes,function(r){n({type:Sn.MUTATION_INSERT,date:i,args:[t.target,t.nextSibling,
r]})});break;case "nodesMoved":n({type:Sn.MUTATION_MOVE,date:i,args:[t.target,t.nextSibling,t.nodesIds]});break;case "nodesRemoved":csArray.prototype.forEach.call(t.nodesIds,function(t){n({type:Sn.MUTATION_REMOVE,date:i,args:[t]})});break;case "attributeChanged":var e=t.target,s=t.namespace,u=t.attribute,o=t.newValue;n({type:Sn.MUTATION_ATTRIBUTE,date:i,args:[e,s,u,o]});break;case "characterDataChanged":e=t.target,o=t.newValue,n({type:Sn.MUTATION_CHARACTER_DATA,date:i,args:[e,o]});break;case "cssRuleInserted":e=
t.target;var h=t.rule,c=_t(a=t.index)?[e,h,a]:[e,h];n({type:Sn.STYLESHEET_RULE_INSERT,date:i,args:c});break;case "cssRuleDeleted":e=t.target;var a=t.index;n({type:Sn.STYLESHEET_RULE_DELETE,date:i,args:[e,a]});break;case "shadowRootAttached":e=t.target;var f=t.shadowRoot;n({type:Sn.ATTACH_SHADOW,date:i,args:[e,f]});break;case "adoptedStyleSheetRegistered":var v=t.sheetId,l=t.cssRules;n({type:Sn.REGISTER_ADOPTED_STYLE_SHEET,date:i,args:[v,l]});break;case "adoptedStyleSheetsSet":e=t.target;var d=t.sheetsIds;
n({type:Sn.SET_ADOPTED_STYLE_SHEETS,date:i,args:[e,d]});break;case "adoptedStyleSheetRuleInserted":v=t.sheetId,h=t.rule,c=_t(a=t.index)?[v,h,a]:[v,h],n({type:Sn.ADOPTED_STYLESHEET_RULE_INSERT,date:i,args:c});break;case "adoptedStyleSheetRuleDeleted":v=t.sheetId,a=t.index,n({type:Sn.ADOPTED_STYLESHEET_RULE_DELETE,date:i,args:[v,a]});break;default:un.error("translateDOMEvent: DOMEvent not supported")}}(i,t.ni);break;case "TextVisibility":break;case "encryptedCharacterDataEvent":var e=i.target,s=i.rawData,
u=i.encryptedData,o=i.encryptionMetadata;t.ni({type:Sn.MUTATION_ENCRYPTED_CHARACTER_DATA,date:r,args:[e,s,u,o]});break;case "StaticResource":var h=i.url;t.ni({type:Sn.STATIC_RESOURCE_URL,date:r,args:[h]});break;default:un.error("WebRecorderEventTranslator: Event not supported")}}),this.fi.start()},t.prototype.stop=function(){this.fi.stop()},t.prototype.onEvent=function(t){this.ni=t},t}(),Ai=function(){function t(){this.vi=[]}return t.prototype.produceEvent=function(t){var n;null!==(n=t.timestamp)&&
void 0!==n||(t.timestamp=At()),csArray.prototype.forEach.call(this.vi,function(n){return n(t)})},t.prototype.stop=function(){this.vi=[]},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.vi,t),function(){var i=csArray.prototype.indexOf.call(n.vi,t);csArray.prototype.splice.call(n.vi,i,1)}},t}(),bi=function(t){function n(n){var i=t.call(this)||this;return i.li=n,i}return Y(n,t),n.prototype.subscribe=function(n){return t.prototype.subscribe.call(this,n)},n.prototype.start=
function(){var t=this;ni(this.li,function(n){n.onEvent(function(n){return t.ai(n)})}),ni(this.li,function(t){var n;null===(n=t.start)||void 0===n||n.call(t)})},n.prototype.stop=function(){ni(this.li,function(t){var n;return null===(n=t.stop)||void 0===n?void 0:n.call(t)}),t.prototype.stop.call(this)},n.prototype.ai=function(t){this.produceEvent({timestamp:At(),type:"Legacy",originalEvent:t})},n}(Ai);!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",
t.PagehideHidden="pagehideHidden"}(Si||(Si={}));var Ri=function(){function t(){var t=this;this.wi=!1,this.yi=function(n){try{switch(n.type){case "visibilitychange":if("hidden"===document.visibilityState)return t.pi(Si.Hidden);break;case "pagehide":return"hidden"===document.visibilityState?t.pi(Si.PagehideHidden):t.pi(Si.PagehideVisible);case "blur":return t.pi(Si.Blur);default:return}}catch(t){}}}return t.prototype.start=function(){this.wi||(this.wi=!0,this.mi(),this.gi(),this.Si())},t.prototype.stop=
function(){this.wi&&(this.wi=!1,this.Ei(),this.Ai(),this.bi())},t.prototype.onEvent=function(t){this.pi=t},t.prototype.mi=function(){document.addEventListener("visibilitychange",this.yi)},t.prototype.Ei=function(){document.removeEventListener("visibilitychange",this.yi)},t.prototype.gi=function(){window.addEventListener("pagehide",this.yi)},t.prototype.Ai=function(){window.removeEventListener("pagehide",this.yi)},t.prototype.Si=function(){window.addEventListener("blur",this.yi)},t.prototype.bi=function(){window.removeEventListener("blur",
this.yi)},t}(),Ni=0;function Ti(t){return"$$"+t+ ++Ni}Ti.asyncIterator="$$asyncIterator";var Oi,Ii=Ft("Symbol",Ti),ki=function(){return function(t,n,i){var r,e,s,u,o;i.value=(r=i.value,e=Ii("oncePerTickSymbol"),s=null,u={},o=function(){var t,n=null!==(t=this)&&void 0!==t?t:u;s=arguments,n[e]||(n[e]=!0,Ci(function(){n[e]=!1,r.apply(n,s)}))},o.oncePerTickSymbol=e,o)}},Ci=null!==(Oi=window.queueMicrotask)&&void 0!==Oi?Oi:setTimeout;ki.isScheduled=function(t,n){return t[n.oncePerTickSymbol]};var _i=function(){function t(t){var n=
this;this.ni=t,this.Ri=new Map,this.Ni=function(t){var i=t.target;if(n.Ri.has(i))return!0;var r=!1;return n.Ri.forEach(function(t,e){!r&&n.Ri.get(e).subtree&&(r=e.contains(i))}),r},this.Pn=new csMutationObserver(function(i){ki.isScheduled(n,n.garbageCollect)&&(i=ii(i,n.Ni)),i.length&&si(function(){return t(i,n)})})}return t.prototype.disconnect=function(){this.Pn.disconnect(),this.Ri=new Map},t.prototype.takeRecords=function(){return this.Pn.takeRecords()},t.prototype.observe=function(t,n){return this.Ri.set(t,
n),this.Pn.observe(t,n)},t.prototype.unobserve=function(t){this.Ri.has(t)&&(this.Ri.delete(t),this.garbageCollect())},t.prototype.garbageCollect=function(){var t=this,n=ii(this.takeRecords(),this.Ni);n.length&&this.ni(n,this),this.Pn.disconnect(),this.Ri.forEach(function(n,i){return t.Pn.observe(i,n)})},Ln([ki()],t.prototype,"garbageCollect",null),t}();function Pi(){var t=new Error,n=t.stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),function(t){return"Error"!==t&&-1===
csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")}):[];if(0===n.length)return"";var i=function(t){return t.length>0?Mi(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,function(t){return-1===csString.prototype.indexOf.call(t,n)})}(n,i),0===n.length?"":Mi(n[0]))}function Mi(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):
new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var Li,xi,Di,Ui=function(t){return t};function ji(t){var n,i=t.target,r=t.methodName,e=t.hook,s=t.hookPrepareArgs,u=void 0===s?Ui:s,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return on.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h,c,a=!1,f=i[r];if("function"==typeof f){var v=function(){var t=u(arguments),n=f.apply(this,
arguments);if(a){var i=void 0;o&&o.withCallerName&&(i=Pi());try{e({result:n,context:this,args:t,callerName:i})}catch(t){on.error(t)}}return n};(h=v).prototype=(c=f).prototype,Object.defineProperty(h,"toString",{value:function(){return c.toString()}}),i[r]=v}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function Hi(t,n,i){var r=!1,e=Object.getOwnPropertyDescriptor(t,n);if(e){if(!e.configurable)return on.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,
"'")),null;Object.defineProperty(t,n,Mn(Mn({},e.get?{get:function(){return e.get.apply(this,arguments)}}:{}),e.set?{set:function(){var t=arguments,n=e.set.apply(this,t);if(r)try{i(this,t[0])}catch(t){on.error(t)}return n}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}function zi(){var t=new Set;return{add:function(n){t.add(n),1===t.size&&setTimeout(function(){t.clear()})},has:function(n){return t.has(n)},del:function(n){t.delete(n)},values:function(){return function(t){var n=
[];return t.forEach(function(t){return csArray.prototype.push.call(n,t)}),n}(t)},get count(){return t.size}}}!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&T(t)?t.shadowRoot:null},t.getAllShadowHosts=function(t){var n=[];if(!function(t){return t.querySelectorAll}(t))return[];var i=function(t,n){ni(window.csquerySelectorAll[t.nodeType].call(t,"*"),n)},r=function(t){csElementshadowRoot.apply(t)&&(csArray.prototype.push.call(n,t),i(csElementshadowRoot.apply(t),
r))};return function(t){return t.shadowRoot}(t)&&(csArray.prototype.push.call(n,t),i(csElementshadowRoot.apply(t),r)),i(t,r),n}}(Li||(Li={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}
function r(){return window.innerHeight}function e(){return window.innerWidth}function s(){var t=window.csScreen.width;return It(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return It(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=e,t.screenWidth=s,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),
dh:"".concat(n()),ww:"".concat(e()),wh:"".concat(r()),sw:"".concat(s()),sh:"".concat(u())}}}(xi||(xi={}));var Bi,qi=null!==(Di=qt.Node)&&void 0!==Di?Di:Object;!function(t){var n="isConnected"in qi.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n,
i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return on.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof qi," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var e,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===
s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||("transparent"===(e=s.color)||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(e)))}function e(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return s(document,i,r)}function s(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var e=Li.getShadowRoot(r);return e&&e!=document.body.getRootNode()&&e!==t?s(e,n,i):r}function u(t){var n=e(t);return null!==n&&(t===
n||t.contains(n))}t.forEachChild=function(t,n){for(var i=t;i;i=csNodenextSibling.apply(i))n(t)},t.isConnected=function(t){return n(t)},t.getAncestors=function(t,n){var i=[],r=function(t){csArray.prototype.push.call(i,t);for(var n=t.getRootNode(),r=t;(null==r?void 0:r.parentElement)&&r.parentElement!==n;)csArray.prototype.push.call(i,r.parentElement),r=r.parentElement;return csArray.prototype.push.call(i,n),i};if(n)for(var e=t;e;){r(e);var s=e.getRootNode();if(!(s instanceof ShadowRoot))break;e=s.host}else r(t);
return i},t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var e=t.getParentElement(i);return!(!e||e===i)&&n(e,r)},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=Qn(window.csquerySelectorAll[n.nodeType].call(n,t)),e=0,s=Li.getAllShadowHosts(n);e<s.length;e++){var u=s[e],o=csElementshadowRoot.apply(u),h=Qn(window.csquerySelectorAll[o.nodeType].call(o,t));(i=csArray.prototype.push).call.apply(i,xn([r],h,!1))}return r},t.isHiddenByCSS=r,
t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var e=i(n);return null!=e&&t(e)},t.getTopAncestorHiddenByCSS=function(t){var n=null,e=t;do{if(!r(e))break;n=e}while(e=i(e));return n},t.getTopElement=e,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,e=i.y+i.height/2;return t.getTopElementFromPoint(document,r,e)},t.getTopElementFromPoint=s,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();
return n.right+xi.windowOffsetX()<0||n.bottom+xi.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=e(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!r(t)&&u(t)},t.isInViewPort=u,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!d(t)||!t.hasAttribute("href"))||(!(!(A(t)||g(t)||m(t)||
(n=t,a(n)&&"button"===n.localName))||t.hasAttribute("disabled"))||!(!function(t){return a(t)&&"details"===t.localName}(t)&&!function(t){return a(t)&&"summary"===t.localName}(t)))));var n}}(Bi||(Bi={}));var Fi=function(){function t(t){var n=this;this.ni=t,this.Ti=[],this.Oi=zi(),this.ni=function(i,r){"initial"===r?t(i,r):n.Oi.has(i)||(t(i,r),n.Oi.add(i))},this.Ii()}return t.prototype.observe=function(t){csArray.prototype.push.call(this.Ti,t),this.ki(),this.Ci(t,!0);this.Pn.observe(t,{subtree:!0,childList:!0})},
t.prototype.disconnect=function(){this.Ti=[],this.Pn.disconnect(),this._i&&this._i.deactivate()},t.prototype.ki=function(){var t=this;this._i||(this._i=ji({target:Element.prototype,methodName:"attachShadow",hook:function(n){return function(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return!0;return!1}(t.Ti,function(t){return Bi.isDescendantOf(n.result.host,t)})&&t.ni(n.result,"added")}})),this._i.activate()},t.prototype.Ci=function(t,n){var i=this;ni(Li.getAllShadowHosts(t),function(t){i.ni(csElementshadowRoot.apply(t),
n?"initial":"added"),i.Pn.observe(csElementshadowRoot.apply(t),{subtree:!0,childList:!0})})},t.prototype.Ii=function(){var t=this;this.Pn=new _i(function(n){si(function(){for(var i=0,r=n;i<r.length;i++){var e=r[i];ni(e.addedNodes,function(n){return t.Ci(n,!1)}),ti(e.removedNodes,Li.getAllShadowHosts,function(n){t.ni(csElementshadowRoot.apply(n),"removed"),t.Pn.unobserve(csElementshadowRoot.apply(n))})}})})},t}(),Gi=function(t){function n(n){var i=t.call(this,function(t){return n(t,i)})||this;return i.Pi=
new Map,i}return Pn(n,t),n.prototype.observe=function(n,i){t.prototype.observe.call(this,n,i),i.subtree&&this.Mi(i).observe(n)},n.prototype.disconnect=function(){t.prototype.disconnect.call(this),this.Pi.forEach(function(t){return t.disconnect()})},n.prototype.Mi=function(n){var i,r=this,e=(i=n,csJSON.stringify(i,csArray.prototype.sort.call(Object.keys(i)))),s=this.Pi.get(e);return s||this.Pi.set(e,s=new Fi(function(i,e){"added"===e||"initial"===e?t.prototype.observe.call(r,i,n):"removed"===e&&t.prototype.unobserve.call(r,
i)})),s},n}(_i);var Vi,Wi,Yi,Ji=qt.ShadowRoot?Gi:qt.csMutationObserver;function $i(t,n){var i;void 0===n&&(n=Xi.SHOW_ALL);var r=n|Xi.SHOW_ELEMENT,e=[document.createTreeWalker(t,r,null,!1)];t instanceof Element&&(null===(i=csElementshadowRoot.apply(t))||void 0===i?void 0:i.firstElementChild)&&csArray.prototype.push.call(e,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1));var s=null;return{root:t,nextNode:function(){for(;e.length>0;){if(n===Xi.SHOW_ALL&&s){var t=s;return s=null,t}var i=
e[e.length-1].nextNode();if(i){var u=Ki(i);if(n===Xi.SHOW_ALL&&(s=u),u&&csArray.prototype.push.call(e,document.createTreeWalker(u,r,null,!1)),0!=(Qi[i.nodeType]&n))return i}else csArray.prototype.pop.call(e)}return null},visitAll:function(n){n(t);for(var i=this.nextNode();i;)n(i),i=this.nextNode()}}}function Ki(t){return t&&T(t)?t.shadowRoot:null}var Zi=null!==(Wi=qt.Node)&&void 0!==Wi?Wi:{},Xi=null!==(Yi=qt.NodeFilter)&&void 0!==Yi?Yi:{},Qi=((Vi={})[2]=Xi.SHOW_ATTRIBUTE,Vi[4]=Xi.SHOW_CDATA_SECTION,
Vi[8]=Xi.SHOW_COMMENT,Vi[11]=Xi.SHOW_DOCUMENT_FRAGMENT,Vi[9]=Xi.SHOW_ALL,Vi[10]=Xi.SHOW_DOCUMENT_TYPE,Vi[1]=Xi.SHOW_ELEMENT,Vi[Zi.ENTITY_NODE]=Xi.SHOW_ENTITY,Vi[Zi.ENTITY_REFERENCE_NODE]=Xi.SHOW_ENTITY_REFERENCE,Vi[Zi.NOTATION_NODE]=Xi.SHOW_NOTATION,Vi[7]=Xi.SHOW_PROCESSING_INSTRUCTION,Vi[3]=Xi.SHOW_TEXT,Vi),tr=function(){function t(t){var n=this;this.ni=t,this.Li=new Ji(function(t){return si(function(){return n.xi(t)})})}return t.prototype.observe=function(t){var n=this;void 0===t&&(t=document),
this.Li.observe(t,{childList:!0,subtree:!0}),$i(t,NodeFilter.SHOW_ELEMENT).visitAll(function(t){a(t)&&n.ni(t)})},t.prototype.disconnect=function(){this.Li.disconnect()},t.prototype.xi=function(t){for(var n=this,i=new Set,r=0,e=t;r<e.length;r++)ni(e[r].addedNodes,function(t){i.has(t)||$i(t,NodeFilter.SHOW_ELEMENT).visitAll(function(t){!i.has(t)&&a(t)&&n.ni(t)})})},t}(),nr=function(t){function n(){var n=t.call(this)||this;n.Di="object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&
"function"==typeof window.Promise,n.Ui=function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i];a(s=e)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&-1===csString.prototype.indexOf.call(s.tagName,":")&&-1===csString.prototype.indexOf.call(s.tagName,'"')&&-1===csString.prototype.indexOf.call(s.tagName,",")&&csArray.prototype.indexOf.call(O,csString.prototype.toLocaleLowerCase.call(s.tagName))<0&&n.ji(csString.prototype.toLowerCase.call(e.tagName))}var s};var i,r,e=(i=n.Ui,r=zi(),{push:function(t){0===
r.count&&setTimeout(function(){i(r.values())}),r.add(t)}});return n.Hi=new tr(function(t){return e.push(t)}),n.zi=new Set,n}return Y(n,t),n.prototype.start=function(){this.Di&&this.Hi.observe()},n.prototype.stop=function(){this.zi.clear(),this.Hi.disconnect()},n.prototype.ji=function(t){return K(this,void 0,void 0,function(){return Z(this,function(n){switch(n.label){case 0:return this.zi.has(t)?[2]:(this.zi.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.produceEvent({type:"CustomElementRegistration",
tagName:csString.prototype.toLowerCase.call(t)}),[2]}})})},n}(Ai),ir=function(t){function n(n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,S,E){void 0===S&&(S=[]);var A=t.call(this)||this;return A.L=n,A.Bi=i,A.qi=r,A.Fi=e,A.Gi=s,A.Vi=u,A.Wi=o,A.Yi=h,A.Ji=c,A.$i=a,A.J=f,A.Ki=v,A.Zi=l,A.Xi=d,A.Qi=w,A.tr=y,A.nr=p,A.ir=m,A.rr=g,A.li=S,A.er=E,A.ur=0,A.hr=0,A.cr=0,A.ar=new di,A.vr={allowFromQuotaService:!0,allowFromSerialization:!0},A.lr=Dn(function(){A.Bi.eventsCount()>0&&A.wr()},2E3),A.yr=function(t){return A.processBrowserEvent(t)},
A.pr=function(t){return A.mr(t)},A.gr=0,A.Sr=0,A.Er=new Ri,A.Ar=!1,A.br=51200,A.Rr=!1,A.Nr=!1,A.Tr=[],A.Or=function(t){A.ir.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},A.fi=new gi([new bi(csArray.prototype.filter.call(X([A.Vi],A.li,!0),function(t){return t})),new nr]),A.Ir=new Ei(A.fi),A.Ir.onEvent(A.yr),A}return Y(n,t),n.prototype.init=function(){this.kr(),this.nr.onLoad(this.Or),this.nr.onError(this.Or)},n.prototype.kr=function(){var t,n,i,r,e=
this;this.Wi.onEvent(this.pr),this.Yi.onEvent(this.pr),this.Ji.onEvent(this.pr),null===(t=this.tr)||void 0===t||t.onTextNodeToEncrypt(this.yr),null===(n=this.tr)||void 0===n||n.onApiErrorToEncrypt(function(t){e.Cr(t)}),null===(i=this.tr)||void 0===i||i.onUserIdentifierToEncrypt(this.yr),null===(r=this.rr)||void 0===r||r.onEvent(this.yr),this.Er.onEvent(function(t){return t===Si.Blur?e._r():e.Ar?void 0:(e.Ar=!0,setTimeout(function(){e.Ar=!1}),t===Si.Hidden?e._r():e.Pr())})},n.prototype.isRecording=
function(){return this.J.hasValidSession()&&this.isStarted},n.prototype._r=function(){var t=this;if(this.canSendEvents()){this.ir.saveBatchesInProgress(),ni(this.li,function(n){var i,r;return ni(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],function(n){return t.Bi.addEvent(n)})});var n=this.Bi.getEvents();if(0!==n.length){var i=this.nr.getQueryParams();i.rst=this.getRecordingStartTimestamp(),i.let=this.getRecordingLastEventTimestamp();var r=this.Fi.getCurrentIndex();
i.ri=r.toString(),this.er.removeQueryParams(),this.er.setQueryParams(i),this.Sr=n[n.length-1].date;var e=this.Bi.stringifyEvents();if(e.length>this.br){var s=this.Mr();if(s.length>0){var u=ot(s);this.er.send(u)||this.ir.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:J(J({},i),{datatype:"json"}),events:u}),this.Fi.increment()}if(this.Bi.eventsCount()>0){i.ri=this.Fi.getCurrentIndex().toString();var o=this.Bi.stringifyEvents();this.ir.save({key:"".concat(i.sn,".").concat(i.pn,
".").concat(i.ri,".last"),metadata:J(J({},i),{datatype:"json"}),events:o}),this.Fi.increment()}}else this.er.send(e)||this.ir.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:J(J({},i),{datatype:"json"}),events:e}),this.Fi.increment();this.er.removeQueryParams(),this.Bi.clearEvents()}}},n.prototype.Pr=function(){var t=this;if(this.canSendEvents()){var n=this.nr.getQueryParams();this.ir.saveBatchesInProgress(),n.rst=this.getRecordingStartTimestamp(),delete n.ri,n.hlm="true",
this.er.removeQueryParams(),ni(this.li,function(n){var i,r;return ni(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],function(n){return t.Bi.addEvent(n)})});var i=this.Bi.getEvents();if(0===i.length)return delete n.let,delete n.rst,this.er.setQueryParams(n),this.er.send(),void this.er.removeQueryParams();this.Sr=i[i.length-1].date,n.let=this.getRecordingLastEventTimestamp(),this.er.setQueryParams(n);var r=this.Bi.stringifyEvents();if(r.length>this.br){var e=
this.Mr();if(e.length>0){var s=ot(e);this.er.send(s)||this.ir.save({key:"".concat(n.sn,".").concat(n.pn,".last"),metadata:J(J({},n),{datatype:"json"}),events:s})}else delete n.let,delete n.rst,delete n.ri,this.er.removeQueryParams(),this.er.setQueryParams(n),this.er.send(),this.er.removeQueryParams();if(this.Bi.eventsCount()>0){n.rst=this.getRecordingStartTimestamp(),n.let=this.getRecordingLastEventTimestamp();var u=this.Fi.getCurrentIndex();n.ri=u.toString();var o=this.Bi.stringifyEvents();this.ir.save({key:"".concat(n.sn,
".").concat(n.pn,".").concat(n.ri,".last"),metadata:J(J({},n),{datatype:"json"}),events:o}),this.Fi.increment()}}else this.er.send(r)||(this.ir.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:J(J({},n),{datatype:"json"}),events:r}),this.Fi.increment());this.er.removeQueryParams(),this.Bi.clearEvents()}},n.prototype.isMutationTrackerStarted=function(){return this.Vi.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.vr.allowFromQuotaService=!1},
n.prototype.allowSendingEventsFromQuotaService=function(){this.vr.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.vr.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.vr.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.vr.allowFromQuotaService&&this.vr.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.Lr(t)},n.prototype.onIframeDetailedApiError=function(t){this.Dr(t)},
n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.mr(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.$i.isCurrentPageviewValid()&&this.Ur(t)},n.prototype.mr=function(t){this.$i.isSessionValid()&&this.Ur(t)},n.prototype.Ur=function(t){this.Bi.addEvent(t),this.Bi.isThresholdReached()?this.pushEvents():
this.Bi.isFull()&&this.lr(),this.jr(t)},n.prototype.jr=function(t){this.L.emitDebugEvents&&this.ar.emit("recordingEvent",J(J({},t),{typeName:Sn[t.type]}))},n.prototype.onStart=function(){var t=this;this.Er.start(),this.initStates(),this.Gi.start(),this.Ir.start(),this.Ji.start(),this.Yi.start(),this.Ki&&this.Zi&&this.Ki.subscribe(n.Hr,function(n){return t.Lr(n)}),this.Xi&&this.Qi&&this.Xi.subscribe(n.Hr,function(n){return t.Dr(n)},{detailedEvent:!0}),this.L.emitDebugEvents&&this.ar.emit("replayRecordingStarted"),
csArray.prototype.forEach.call(this.Tr,function(n){return t.zr(n)}),this.Tr=[]},n.prototype.onStop=function(){this.Er.stop(),this.Gi.stop(),this.Wi.stop(),this.Yi.stop(),this.Ki&&this.Ki.unsubscribe(n.Hr),this.Xi&&this.Xi.unsubscribe(n.Hr),this.Ir.stop(),this.Ji.stop(),this.Nr=!1},n.prototype.clearStates=function(){this.Vi.flushEvents(),this.lr.cancel(),this.pushEvents(),this.nr.removeQueryParams()},n.prototype.initStates=function(){this.gr=At(),this.Fi.reset(),this.ur=0,this.hr=0,this.cr=0,this.nr.setQueryParams(this.qi.getRequestParameters())},
n.prototype.pushEvents=function(){ni(this.li,function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)}),this.Bi.eventsCount()>0&&(this.isStarted?this.wr():this.Bi.clearEvents())},n.prototype.wr=function(){if(this.canSendEvents()){var t=this.Bi.getEvents();this.Sr=t[t.length-1].date;var n=this.Fi.getCurrentIndex();this.nr.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.nr.getQueryParams();this.ir.addBatchInProgress("".concat(i.sn,
".").concat(i.pn,".").concat(n),this.nr.getQueryParams(),t),this.nr.send(t),this.Fi.increment(),this.Bi.clearEvents(),this.Br&&this.Br()}},n.prototype.addInitialDom=function(t){this.Bi.addEventByTimestamp(t),this.jr(t)},n.prototype.Dr=function(t){if(t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody){if(this.tr)return void this.tr.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody=
""}this.Cr(t)},n.prototype.Cr=function(t){if(this.hr<n.qr){var i={type:Sn.API_ERROR,date:At(),args:[this.Qi.anonymize(t)]};this.yr(i),this.hr=this.hr+1}},n.prototype.Lr=function(t){if(this.ur<n.Fr){var i={type:Sn.JAVASCRIPT_ERROR,date:At(),args:[this.Zi.anonymize(t)]};this.yr(i),this.ur=this.ur+1}},n.prototype.Gr=function(t){if(this.cr<n.Vr){var i={type:Sn.CUSTOM_ERROR,date:At(),args:[t]};this.yr(i),this.cr=this.cr+1}},n.prototype.Wr=function(t){var i,r;t===ci.ETR_SESSION?this.nr.setQueryParams(((i=
{})[n.Yr]=n.Jr,i)):t===ci.ETR_PAGE&&this.nr.setQueryParams(((r={})[n.$r]=n.Jr,r))},n.prototype.clearEvents=function(){this.Bi.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.Lr(t)},n.prototype.onCustomErrorEvent=function(t){this.Gr(t)},n.prototype.onPageEvent=function(t){this.Kr(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:At(),keyId:this.L.encryptionPublicKeyId};null===(n=this.tr)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=
function(t,n){this.isStarted?this.zr({eventName:t,eventType:n}):csArray.prototype.push.call(this.Tr,{eventName:t,eventType:n})},n.prototype.zr=function(t){this.Wr(t.eventType),this.Kr(t.eventName),this.pushEvents()},n.prototype.Kr=function(t){var i={type:Sn.PAGE_EVENT,date:At(),args:[{eventName:csString.prototype.slice.call(t,0,n.Zr)}]};this.Bi.addEvent(i)},n.prototype.triggerUnanonymizationConsentGranted=function(){var t={date:At(),type:Sn.UNANONYMIZED_CONSENT_GRANTED};this.Bi.addEvent(t)},n.prototype.triggerUnanonymizationConsentWithdrawn=
function(){var t={date:At(),type:Sn.UNANONYMIZED_CONSENT_WITHDRAWN};this.Bi.addEvent(t)},n.prototype.triggerRecordingForSessionGranted=function(){var t={date:At(),type:Sn.RECORDING_INFO_EVENT,args:[En.RECORDING_CONSENT_FOR_SESSION_GRANTED]};this.Bi.addEvent(t)},n.prototype.triggerRecordingForSessionWithdrawn=function(){var t={date:At(),type:Sn.RECORDING_INFO_EVENT,args:[En.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN]};this.Bi.addEvent(t)},n.prototype.activateOnlineAssetsOnNextPageview=function(){this.Rr=
!0,this.Nr=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.rr?{isStarted:this.L.useStaticResourceManager&&this.rr.isSupported(),onlineAssets:{activated:this.rr.isOnlineAssetsActivated(),enabledOnNextPageview:this.Rr,enabledForChildrenOnNextStart:this.Nr}}:null},n.prototype.updateStaticResourceManagerOnlineAssets=function(){this.rr&&this.Rr&&(this.rr.enableOnlineAssets(),this.Nr=!0,this.Rr=!1)},n.prototype.onRecordingRequestSent=function(t){this.Br=t},n.prototype.getRecordingStartTimestamp=
function(){return this.gr.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.Sr.toString()},n.prototype.Mr=function(){return this.Bi.extractEvents(Sn.API_ERROR,Sn.JAVASCRIPT_ERROR,Sn.CUSTOM_ERROR,Sn.TEXT_VISIBILITY,Sn.POINTER_DOWN)},n.Hr="RecordingService",n.Zr=255,n.Fr=20,n.qr=20,n.Vr=20,n.$r="etrp",n.Yr="etrs",n.Jr="1",$([Vn("addInitialDom")],n.prototype,"addInitialDom",null),n}(wi),rr=function(t){function n(n,i,r){var e=t.call(this)||this;return e.Yt=n,e.er=i,e.nr=r,
e.Xr=!1,e.Qr={},e.te=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],s=r.metadata,u=r.events;e.ne(s.rt)&&e.nr.send(u,s)}},window.addEventListener("focus",function(){e.recover()}),e}return Y(n,t),n.prototype.onStart=function(){this.Qr={}},n.prototype.onStop=function(){},n.prototype.recover=function(){this.Yt.recover(this.te)},n.prototype.addBatchInProgress=function(t,n,i){this.Qr[t]={metadata:J({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.Qr[t]},
n.prototype.blockSendingLastMessage=function(){this.Xr=!1},n.prototype.allowSendingLastMessage=function(){this.Xr=!0},n.prototype.sendLastMessageBeacon=function(){if(this.Xr){var t=this.nr.getQueryParams(),n=(t.ri,t.rst,t.let,function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(t,
r[e])&&(i[r[e]]=t[r[e]])}return i}(t,["ri","rst","let"]));n.hlm="true",this.er.setQueryParams(n),this.er.send()}},n.prototype.ne=function(t){return!!t&&-1===csString.prototype.indexOf.call(t,oi.TEMPORARILY_RECORDED)},n.prototype.saveBatchesInProgress=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.Qr),function(n){var i=t.Qr[n],r=i.metadata,e=i.events;t.Yt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:J(J({},r),{datatype:"json"}),events:csJSON.stringify(e)})})},
n.prototype.save=function(t){this.Yt.save(t)},$([vn("RecordingRecovery")],n.prototype,"recover",null),n}(wi),er=/[^\s]/g;function sr(t){return csString.prototype.replace.call(t,er,"a")}var ur,or,hr,cr,ar=function(){function t(t,n,i,r){this.ie=t,this.hn=n,this.re=i,this.tr=r,this.ee=!1}return t.prototype.setAnonymization=function(t){this.se=t},t.prototype.isDOMSerializationInProgress=function(){return this.ee},t.prototype.serializeInitialDom=function(t,n){if(this.ie.isAsynchronous())this.serializeDocumentAsync(t).then(function(t){t&&
n(t)}).catch(function(t){un.error(t)});else{var i=this.ue(t);n(i)}},t.prototype.ue=function(t){return{args:[this.ie.serialize(t,{withAnonymization:this.se})],date:At(),type:Sn.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return K(this,void 0,void 0,function(){return Z(this,function(n){switch(n.label){case 0:this.ee=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.ie.startSerializeAsync(t,{withAnonymization:this.se})];case 2:return[2,n.sent()];case 3:return this.ee=!1,[7];case 4:return[2]}})})},
t.prototype.serializeMutationCharacterData=function(t){var n,i=this.hn.getId(t.target);if(!i)return null;var r=t.target;if(r.data===t.oldValue)return null;if(f(r)&&(null===(n=this.tr)||void 0===n?void 0:n.shouldEncrypt(r)))return this.tr.registerTextNodeMutationToEncrypt({targetId:i,textNode:r,serializedTextData:sr(r.data),date:t.date}),null;var e=this.re.getAnonymizedText(this.se,r,r.data);f(r)&&(e=this.ie.serializeTextMutation(r,e));var s=[i,e];return this.oe(this.ie)&&this.isDOMSerializationInProgress()&&
this.ie.handleMutationCharacterData(t,s),s},t.prototype.serializeAttachShadowEvent=function(t){var n=this.hn.getId(t.target);return n?[n,this.ie.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=this.hn.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,e=t.attributeNamespace,s=Bi.getAttributeNS(t.target,e,r);s&&(s=this.re.getAnonymizedAttributeValue(i,this.se,r,s),s=this.ie.serializeAttributeMutationValue(t.target,r,s));var u=[n,e,r,s];return this.oe(this.ie)&&
this.isDOMSerializationInProgress()&&this.ie.handleMutationAttribute(t.oldValue?this.re.getAnonymizedAttributeValue(i,this.se,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.hn.getId(t.target);return i?this.oe(this.ie)&&this.isDOMSerializationInProgress()?this.ie.serializeMutationChildList(t,this.se,n):{removedNodes:this.he(t),addedNodes:this.ce(t,i,n)}:(ni(t.addedNodes,function(t){var i=n.get(t);i&&n.set(t,i-1)}),null)},t.prototype.oe=function(t){return t.isAsynchronous()},
t.prototype.he=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.hn.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.ce=function(t,n,i){var r=[],e=null;if(t.nextSibling){var s=this.hn.getId(t.nextSibling);e=void 0!==s?s:null}for(var u=0;u<t.addedNodes.length;u+=1){var o=t.addedNodes[u],h=this.ie.serialize(o,{excludedNodes:i,withAnonymization:this.se}),c=i.get(o);c&&i.set(o,c-1),csArray.prototype.push.call(r,[n,e,h])}return r},$([Wn("serializeDocumentAsync")],
t.prototype,"serializeDocumentAsync",null),t}(),fr=function(){function t(t,n,i,r){var e=this;this.hn=t,this.cn=n,this.Mn=i,this.Gi=r,this.ae()&&(this.fe=Hi(window.CSSStyleDeclaration.prototype,"cssText",function(t,n){return e.setStyleDeclarationCssText(t,n)}))}return t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){this.ve=this.Gi.registerToInsertRuleInterceptor(this.sendInsertion.bind(this)),this.le=this.Gi.registerToDeleteRuleInterceptor(this.sendDeletion.bind(this)),this.fe&&
this.fe.activate()},t.prototype.stop=function(){var t,n;null===(t=this.ve)||void 0===t||t.call(this),null===(n=this.le)||void 0===n||n.call(this),this.fe&&this.fe.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.de(t);if((null==i?void 0:i.ownerNode)&&(!a(i.ownerNode)||!this.cn.isSensitiveChild(i.ownerNode))){var r=this.hn.getId(i.ownerNode);if(r){var e=this.we(i.cssRules,t.parentRule),s={date:At(),type:Sn.STYLESHEET_CSS_TEXT_UPDATE,args:[r,e,n]};this.Hn(s),this.Mn.scanCssString(n)}}},
t.prototype.de=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.we=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.ae=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!a(t.ownerNode)||!this.cn.isSensitiveChild(t.ownerNode))){var e=this.hn.getId(t.ownerNode);
if(e){var s={date:At(),type:Sn.STYLESHEET_RULE_INSERT,args:_t(r)?[e,i,r]:[e,i]};this.Hn(s),this.Mn.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!a(t.ownerNode)||!this.cn.isSensitiveChild(t.ownerNode))){var r=this.hn.getId(t.ownerNode);if(r){var e={date:At(),type:Sn.STYLESHEET_RULE_DELETE,args:[r,i]};this.Hn(e)}}},$([vn("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),$([vn("styleSheetRuleTracker.sendInsertion")],
t.prototype,"sendInsertion",null),$([vn("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),vr="data-cs-mask",lr=function(){function t(t){this.cn=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.cn.isSensitive(t)||this.ye(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this.cn.isSensitive(t)&&!S(t)&&(csArray.prototype.push.call(n,this.pe(t)),t.hasAttribute(vr)||csArray.prototype.push.call(n,document.createAttribute(vr))),
csArray.prototype.filter.call(n,function(n){return!i.cn.isSensitiveAttribute(t,n.name)})},t.prototype.ye=function(t){return N(t)&&this.cn.isSensitive(t.host)},t.prototype.pe=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),t.__contentsquare_height=n.height,t.__contentsquare_width=n.width,i},t}(),dr=null!==(ur=qt.Element)&&void 0!==ur?ur:{prototype:{}},wr=null!==(or=qt.Node)&&
void 0!==or?or:{prototype:{}},yr=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},pr=null!==(hr=yr(dr))&&void 0!==hr?hr:yr(wr);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(cr||(cr={}));var mr=function(t){this.csId=t.__contentsquare_identifier,this.format=cr.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var gr=function(t){function n(n){var i,r=t.call(this,
n)||this;return r.attributes=[],r.localName=(i=n,pr.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=1,r}return Y(n,t),n}(mr),Sr=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot",D],Er=function(){function t(t,n){this.D=t,this.L=n,this.ge=new Set,this.Se=""}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(Sr,function(n){t.ge.add(n)}),
csArray.prototype.forEach.call(this.L.whitelistedAttributes,function(n){t.ge.add(n)})},t.prototype.beforeSerializeChildren=function(t,n,i){return(p(t)||this.Ee(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var e=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=e},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=
function(t,n,i){var r=t.data;return n.data=i.withAnonymization?sr(r):this.D.anonymizePII(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(p(csNodeparentNode.apply(n)))return i;if(t&&this.Ee(csNodeparentNode.apply(n)))return this.D.anonymizeCreditCard(this.D.anonymizeEmail(i))}return t?sr(i):this.D.anonymizeCreditCard(this.D.anonymizeEmail(i))},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.Ae(i)||E(t)||a(e=t)&&"slot"===e.localName?r:n&&m(t)&&
("submit"===t.type||"button"===t.type)&&"value"===i?sr(r):n?"":this.D.anonymizeCreditCard(this.D.anonymizeEmail(r));var e},t.prototype.setWhitelistedElementsSelector=function(t){this.Se=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Se},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof gr&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.Ae=function(t){return this.ge.has(t)},
t.prototype.Ee=function(t){return a(t)&&(t.hasAttribute("data-cs-capture")||this.be(t))},t.prototype.be=function(t){return!!this.Se&&_.call(t,this.Se)},t}(),Ar=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Re=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Re,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Re,function(t,n){return J(J({},n.getRequestParameters()),t)},{})},t}();function br(t,
n){var i,r,e,s,u=null,o=function(h){var c=At();if(!h&&null!==u){var a=n-(c-u);if(a>0)return void(r=window.setTimeout(o,a))}var f=c-e;r=null,u=null,e=null,s=t.apply(void 0,xn([f],i,!1))},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(i=xn([],t,!0),!e)return e=At(),r=window.setTimeout(o,n),s;u=At()};return h.flushPending=function(){r&&(window.clearTimeout(r),o(!0))},h.cancel=function(){u=null,e=null,r&&(window.clearTimeout(r),r=null)},h}function Rr(t){return void 0===t&&(t=
0),function(n,i,r){var e=r.value,s=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];s||(s=!0,setTimeout(function(){s=!1,e.apply(n,i)},t))}}}var Nr=function(){function t(t){var n=this;this.L=t,this.Ne=!1,this.Te=br(function(){n.Ne=!1,n.Oe()},this.L.pendingInactivityTimeout)}return t.prototype.start=function(){this.Ne=!0,this.Te()},t.prototype.stop=function(){this.Ne=!1,this.Te.cancel()},t.prototype.trackActivity=function(){this.Ne||(this.Ne=!0,this.Ie()),this.Te()},
t.prototype.isUserActive=function(){return this.Ne},t.prototype.onActivityStopped=function(t){this.Oe=t},t.prototype.onActivityResumed=function(t){this.Ie=t},t}(),Tr=function(){function t(t,n,i){var r=this;this.ke=t,this.D=n,this.Ce=i,this._e=[{boundElement:window,type:"resize",listener:function(){return r.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return r.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return r.visibilityChangeListener()}}]}
return t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){this.En(),this.triggerInitialEvents(),this.Ce&&(this.Ce.setOnScreenChangedCallback(this.Hn),this.Ce.start())},t.prototype.stop=function(){var t;this.On(),null===(t=this.Ce)||void 0===t||t.stop()},t.prototype.En=function(){csArray.prototype.forEach.call(this._e,function(t){return In(t)})},t.prototype.On=function(){csArray.prototype.forEach.call(this._e,function(t){return kn(t)})},t.prototype.triggerInitialEvents=function(){this.resizeListener(),
this.hashChangeListener()},t.prototype.resizeListener=function(){var t,n={type:Sn.RESIZE,args:[xi.windowWidth(),xi.windowHeight()],date:At()};this.Hn(n),null===(t=this.Ce)||void 0===t||t.onScreenPotentiallyChanged()},t.prototype.hashChangeListener=function(){var t={type:Sn.HASH_CHANGE,args:[this.D.anonymizePII(this.ke.href)],date:At()};this.Hn(t)},t.prototype.visibilityChangeListener=function(){var t={type:Sn.VISIBILITY_CHANGE,args:[document.visibilityState],date:At()};this.Hn(t)},$([vn("resize")],
t.prototype,"resizeListener",null),$([vn("hashChange")],t.prototype,"hashChangeListener",null),$([vn("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Or=function(t){function n(n,i,r,e,s,u,o){var h=t.call(this)||this;return h.Wi=n,h.Vi=i,h.Pe=r,h.Me=e,h._n=s,h.Le=u,h.Ln=o,h.xe=0,h}return Y(n,t),n.prototype.init=function(){var t=this;this.Wi.onEvent(function(n,i){i||t.De()}),this.Me.onRecordingRequestSent(function(){t.xe+=1,t.Ue()}),this.Pe.onActivityStopped(function(){t.Ue()}),
this.Pe.onActivityResumed(function(){t.Vi.isStarted()||t.je()})},n.prototype.onIframeRecordingUserEvent=function(t){this.De()},n.prototype.onStart=function(){this.Pe.start()},n.prototype.onStop=function(){this.Pe.stop()},n.prototype.Ue=function(){this.Vi.isStarted()&&!this._n.isDOMSerializationInProgress()&&!this.Pe.isUserActive()&&this.xe>=2&&this.He()},n.prototype.De=function(){this.Pe.trackActivity(),this.xe=0},n.prototype.He=function(){this.Vi.stop(),this.Ln.emitRecordingStatusChange()},n.prototype.je=
function(){this._n.setAnonymization(this.Le.shouldUseAnonymization()),this.Vi.start(),this.Ln.emitRecordingStatusChange()},n}(wi);var Ir=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function kr(t,n){var i=t.replace(Ir,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],e=t[9]||t[10]||t[11],s=(r||e).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;
var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"\ufffd":String.fromCodePoint(e)});return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(s)||s)+")"});return i}function Cr(t){var n=[];return kr(t,function(t){return n.push(t),t}),n}function _r(t){return Rt(t,"data:")}function Pr(t){return Rt(t,"#")}function Mr(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,
/\s(.+)/)),e=r[0],s=r[1];return s?(Nt(e,",")||(s=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(s)),xn([Lr(e)],Mr(s),!0)):[Lr(e)]}function Lr(t){return csString.prototype.split.call(t,/,$/)[0]}var xr,Dr=function(){function t(){this.ze=!0}return t.prototype.enable=function(){this.ze||(this.ze=!0)},t.prototype.disable=function(){this.ze&&(this.ze=!1)},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.onAsset=function(t){this.Be=t},t.prototype.onStyleSheetFound=function(t){this.qe=
t},t.prototype.serializeElementNode=function(t){this.ze&&this.Fe(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.ze&&this.Ge(t,n),n},t.prototype.scanAttribute=function(t,n){this.Ve(t,n)},t.prototype.scanText=function(t){f(t)&&csNodeparentNode.apply(t)&&p(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.scanCssString=function(t){this.We(Cr(t))},t.prototype.Fe=function(t){this.Ve(t)},t.prototype.Ge=function(t,n){var i=this;p(t)&&ni(n,function(t){f(t)&&i.scanCssString(t.data)})},
t.prototype.Ve=function(t,n){this.Ye(t,n)||(this.Je(t,n),this.$e(t,n),this.Ke(t,n))},t.prototype.Ye=function(t,n){var i,r,e;if(w(t)&&(!n||"href"===n)&&t.href){var s=(null===(i=t.sheet)||void 0===i?void 0:i.href)||t.href,u={assetId:s,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};return null===(r=this.qe)||void 0===r||r.call(this,u),null===(e=this.Be)||void 0===e||e.call(this,u),this.Ze(s),!0}return!1},t.prototype.Xe=function(t){return!this.Qe(t)&&!_r(t)&&!Pr(t)},t.prototype.Je=
function(t,n){var i;if(y(t)){if(!n||"src"===n){var r=t.getAttribute("src");r&&this.Xe(r)&&(this.Ze(t.src),null===(i=this.Be)||void 0===i||i.call(this,{assetId:t.src,assetRawPath:r,assetBasePath:window.location.href}))}n&&"srcset"!==n||!t.srcset||this.ns(t.srcset)}},t.prototype.$e=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.ns=function(t){this.We(Mr(t))},
t.prototype.Ke=function(t,n){var i,r;if((E(r=t)&&"image"===r.localName||function(t){return E(t)&&"use"===t.localName}(t)||function(t){return E(t)&&"feImage"===t.localName}(t))&&(!n||"href"===n||"xlink:href"===n)){var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e&&this.Xe(e)){var s=Wt(e);this.Ze(s),null===(i=this.Be)||void 0===i||i.call(this,{assetId:s,assetRawPath:e,assetBasePath:window.location.href})}}},t.prototype.We=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,
function(t){return!n.Qe(t)}),function(t){return!_r(t)}),function(t){return!Pr(t)}),function(t){return{rawUrl:t,absoluteUrl:Wt(t)}}),function(t){var i;n.Hn&&n.Ze(t.absoluteUrl),null===(i=n.Be)||void 0===i||i.call(n,{assetId:t.absoluteUrl,assetBasePath:window.location.href,assetRawPath:t.rawUrl})})},t.prototype.Ze=function(t){var n,i={date:At(),type:Sn.STATIC_RESOURCE_URL,args:[t]};null===(n=this.Hn)||void 0===n||n.call(this,i)},t.prototype.Qe=function(t){return/^https:\/\/\w+:\w+@/.test(t)},t}();!function(t){t.REQUEST_START=
"requestStart",t.DOM_INTERACTIVE="domInteractive",t.TIME_ORIGIN="timeOrigin"}(xr||(xr={}));var Ur=function(){function t(t){this.rs=t.performance}return t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){this.es()&&this.ss()},t.prototype.ss=function(){var t={args:this.us(),date:At(),type:Sn.PERFORMANCE_TIMINGS};this.Hn(t)},t.prototype.es=function(){return!(!this.rs||!this.rs.timing)},t.prototype.us=function(){return[{performanceTiming:xr.REQUEST_START,timestamp:this.rs.timing.requestStart},
{performanceTiming:xr.DOM_INTERACTIVE,timestamp:this.rs.timing.domInteractive},{performanceTiming:xr.TIME_ORIGIN,timestamp:this.rs.timeOrigin}]},t}(),jr=function(t){function n(n){var i=t.call(this)||this;return i.hs=n,i.cs=new Map,i}return Y(n,t),n.prototype.init=function(){this.fs(),this.vs()},n.prototype.vs=function(){var t=this;this.Li=new csMutationObserver(function(n){si(function(){return t.handleMutations(n)})})},n.prototype.fs=function(){var t=this;this.ls()&&(this.ds=ji({target:Element.prototype,
methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.ws()&&(this.ys=ji({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.ps=t},n.prototype.onCharacterDataMutation=function(t){this.gs=t},n.prototype.onAttributesMutation=function(t){this.Ss=t},n.prototype.onAttachShadowMutation=function(t){this.Es=t},n.prototype.observe=
function(t,n){this.isStarted&&this.Li.observe(t,n)},n.prototype.onStart=function(){this.ds&&this.ds.activate(),this.ys&&this.ys.activate()},n.prototype.onStop=function(){this.ds&&this.ds.deactivate(),this.ys&&this.ys.deactivate(),this.hs.clearQueue(),this.Li.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.hs.runPendingTasks();var t=this.Li.takeRecords();this.handleMutations(t,!0)}},n.prototype.ls=function(){return window.Element&&window.Element.prototype&&"function"==
typeof window.Element.prototype.attachShadow},n.prototype.ws=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=At(),e=t.length>1?this.As(t):t;this.hs.isEmpty()&&this.cs.clear(),this.bs(e);for(var s=function(t){var s=e[t];s.date=r,u.hs.schedule(function(){i.processMutation(s,i.cs)},n)},u=this,o=0;o<e.length;o+=1)s(o)},n.prototype.As=function(t){for(var n=
new Map,i=0;i<t.length;i+=1)if("attributes"===(f=t[i]).type){var r=f.target,e=f.attributeNamespace,s=f.attributeName,u="".concat(e||""," ").concat(s),o=n.get(r),h=Bi.getAttributeNS(r,e,s)===f.oldValue?"none":"last";if(o)o.has(u)||o.set(u,h);else{var c=new Map;c.set(u,h),n.set(r,c)}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,e=f.attributeNamespace,s=f.attributeName,u="".concat(e||""," ").concat(s);"last"===(o=n.get(r)).get(u)&&(csArray.prototype.push.call(a,
f),o.set(u,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.Es({shadowRoot:n,date:At(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case "attributes":this.Ss(t);break;case "characterData":this.gs(t);break;case "childList":this.ps(t,n);break;default:throw new Error("mutation type is not supported");}},n.prototype.bs=function(t){var n=this;csArray.prototype.forEach.call(t,function(t){ni(t.addedNodes,
function(t){var i=n.cs.get(t);i?n.cs.set(t,i+1):n.cs.set(t,1)})})},$([vn("handleMutations")],n.prototype,"handleMutations",null),$([Vn("handleAttachShadow")],n.prototype,"handleAttachShadow",null),$([Vn("processMutation")],n.prototype,"processMutation",null),n}(wi),Hr=function(t){function n(n,i){var r=t.call(this,n)||this;return r.hn=i,r.Rs={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},r}return Y(n,t),n.prototype.init=function(){t.prototype.init.call(this),
this.Sn()},n.prototype.Sn=function(){var t=this;this.hn.onDocumentIdentified(function(n){t.observe(n,t.Rs)})},n}(jr),zr=function(){function t(t){this.Ns=[],this.Ts=[],this.Ht={},this.zt=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),function(i){n.Ht[i]=t[i]})},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,function(t){delete n.Ht[t]}):this.Ht={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.Ns,
t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.Ts,t)},t.prototype.send=function(t){var n=this,i=ut.toQuery(J(J({},this.Ht),{ct:yn.UNCOMPRESSED})),r=this.Os(i,t);return r?csArray.prototype.forEach.call(this.Ns,function(t){return t()}):csArray.prototype.forEach.call(this.Ts,function(t){return t(n.Ht)}),r},t.prototype.Os=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.zt,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==
typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.zt,"?").concat(t),n||"")},t}();function Br(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,e=t.length;r<e;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}function qr(t){var n=-1!==csString.prototype.indexOf.call(t,";base64,"),i=csString.prototype.indexOf.call(t,","),r=n?[csString.prototype.substring.call(t,0,i-7),csString.prototype.substring.call(t,i+1)]:[csString.prototype.substring.call(t,0,i),csString.prototype.substring.call(t,
i+1)];!n&&/^%3Csvg/i.test(r[1])&&(r[1]=decodeURIComponent(r[1]));var e,s=n?(e=r[1],Br(self.atob(e))):Br(r[1]);return new Blob([s],{type:csString.prototype.replace.call(r[0],"data:","")})}function Fr(t){var n=csArray.from(new Uint8Array(t));return csArray.prototype.join.call(csArray.prototype.map.call(n,function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")}),"")}var Gr,Vr,Wr=function(){function t(t){this.Is=t,this.ks=!1}return t.prototype.init=function(){this.ks=this.Cs(),this.ks&&
(this._s=new TextEncoder)},t.prototype.isSupported=function(){return this.ks},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.digest=function(t,n){return K(this,void 0,void 0,function(){var i,r;return Z(this,function(e){switch(e.label){case 0:if(!this.ks)return[2,null];i=this.Ps(t,n),r=this._s.encode(i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return[2,Fr(e.sent())];case 3:return e.sent(),[2,null];case 4:return[2]}})})},t.prototype.Cs=
function(){return!!(this.Is&&this.Is.subtle&&this.Is.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.Ps=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t}();!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(Gr||(Gr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(Vr||
(Vr={}));var Yr=function(){function t(t,n,i){this.Ms=t,this.hn=n,this.cn=i}return t.prototype.start=function(){var n=this;this.Ms.subscribe(t.Ls,function(t,i){return n.processGesture(t,i)})},t.prototype.stop=function(){this.Ms.unsubscribe(t.Ls)},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.processGesture=function(t,n){if(t.target&&(!a(t.target)||!this.cn.isSensitiveChild(t.target))){var i=this.hn.getId(t.target);if(i)switch(t.type){case Gr.DRAG:case Gr.FLICK:this.xs(bn.SWIPE,t,i,n);break;
case Gr.LONG_PRESS:this.xs(bn.LONG_PRESS,t,i,n);break;case Gr.TAP:this.xs(bn.TAP,t,i,n);break;case Gr.PINCH_IN:this.xs(bn.PINCH_IN,t,i,n);break;case Gr.PINCH_OUT:this.xs(bn.PINCH_OUT,t,i,n)}}},t.prototype.xs=function(t,n,i,r){var e=this.Ds(n,t,r),s={type:Sn.GESTURE_RECOGNITION,args:[i,e],date:At()};this.Hn(s)},t.prototype.Ds=function(t,n,i){var r={type:n};if(t.direction&&(r.direction=t.direction),t.distance&&(r.distance=t.distance),t.velocity&&(r.velocity=t.velocity),n===bn.TAP&&i.changedTouches&&
1===i.changedTouches.length){var e=i.changedTouches[0];r.pageX=Cn(e.pageX,1),r.pageY=Cn(e.pageY,1)}return r},t.Ls="RecordingGesturesTracker",$([Jn()],t.prototype,"processGesture",null),t}(),Jr=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=10,i}return Y(n,t),n}(mr),$r=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},Kr=function(t){function n(n){var i=
t.call(this,n)||this;return i.data=n.data,i.nodeType=3,i}return Y(n,t),n}(mr),Zr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=4,i}return Y(n,t),n}(mr),Xr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=8,i}return Y(n,t),n}(mr),Qr=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=9,r}return Y(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");
n=0!==i.length?i[0].href:t.URL}return n},n}(mr),te=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=11,i}return Y(n,t),n}(mr),ne=function(){function t(n){for(var i=function(i){var e=csArray.prototype.map.call(csArray.prototype.filter.call(n,function(t){return t[i]}),function(t){return function(n,r,e,s){return t[i](n,r,e,s)}}),s=t.Us(e);r[i]=s},r=this,e=0,s=t.js;e<s.length;e++)i(s[e])}return t.create=function(n){return new t(n)},t.Us=function(t){var n=
csArray.prototype.map.call(t,function(t){return function(n,i,r,e){return t(n,i,r,e)||i}}),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4];switch(t.length){case 0:return function(t,n){return n};case 1:return t[0];case 2:return function(t,n,e,s){return r(t,i(t,n,e,s),e,s)};case 3:return function(t,n,s,u){return e(t,r(t,i(t,n,s,u),s,u),s,u)};case 4:return function(t,n,u,o){return s(t,e(t,r(t,i(t,n,u,o),u,o),u,o),u,o)};case 5:return function(t,n,o,h){return u(t,s(t,e(t,r(t,i(t,n,o,h),o,h),o,h),o,h),o,h)};default:return function(n,
i,r,e){for(var s=i,u=0;u<t.length;u++)s=t[u](n,i,r,e)||s;return i}}},t.js=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeDocumentNode","serializeShadowRootNode","serializeTextMutation","serializeAttributeMutationValue"],t}(),ie=function(){function t(t){this.Hs=ne.create(t)}return t.prototype.isAsynchronous=function(){return!0},
t.prototype.serializeTextMutation=function(t,n){return this.Hs.serializeTextMutation(t,n)},t.prototype.serializeAttributeMutationValue=function(t,n,i){return this.Hs.serializeAttributeMutationValue(t,i,n)},t.prototype.serialize=function(t,n){var i,r=J({},n),e=t.nodeType;switch(e){case 1:i=this.zs(t,r);break;case 3:i=this.Bs(t,r);break;case 4:i=this.qs(t,r);break;case 7:case 8:i=this.Fs(t,r);break;case 10:i=new Jr(t);break;case 9:i=this.Gs(t,r);break;case 11:i=this.Vs(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(e,
")"));}return this.Hs.afterSerialize(t,i,r),i},t.prototype.zs=function(t,n){var i=new gr(t);this.Hs.serializeElementNode(t,i,n),i.attributes=this.Ws(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this.Ys(r,n)),i.children=this.Js(t,n),i},t.prototype.Ws=function(t,n){var i=Qn(t.attributes);i=this.Hs.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var e=i[r];i[r]=this.$s(t,e,n)}return i},t.prototype.$s=function(t,n,i){var r=new $r(n);return this.Hs.serializeAttribute(t,
n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?ii(r,function(t){return!n.excludedNodes.get(t)}):r,Qn(r=this.Hs.beforeSerializeChildren(t,r,n))},t.prototype.Js=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var e=i[r];i[r]=this.serialize(e,n)}return i},t.prototype.Bs=function(t,n){var i=new Kr(t);return this.Hs.serializeTextNode(t,i,n),i},t.prototype.qs=
function(t,n){var i=new Zr(t);return this.Hs.serializeCDATASectionNode(t,i,n),i},t.prototype.Fs=function(t,n){var i=new Xr(t);return this.Hs.serializeCommentNode(t,i,n),i},t.prototype.Gs=function(t,n){var i=new Qr(t);return this.Hs.serializeDocumentNode(t,i,n),i.children=this.Js(t,n),i},t.prototype.Ys=function(t,n){var i=new te(t);return this.Hs.serializeShadowRootNode(t,i,n),i.children=this.Js(t,n),this.Hs.afterSerializeShadowRoot(t,i,n),i},t.prototype.Vs=function(t,n){if(t.mode)return this.Ys(t,
n);throw new Error("Not implemented yet.");},t}();function re(){return K(this,void 0,void 0,function(){return Z(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){setTimeout(function(){t()},0)})];case 1:return t.sent(),[2]}})})}var ee=function(){function t(t){this.hn=t,this.Ks=!1,this.Zs=new Map,this.Xs={},this.Qs=new Map,this.tu=new Map,this.nu=new Set,this.iu=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.Ks?ii(n,function(t){return!i.isAddedNodeDuringSerialization(t)}):
n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.Ks)return n;var r=this.hn.getId(t);if(!r)return n;var e=this.tu.get(r);return e?csArray.prototype.filter.call(n,function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=e.get(n);return!(i&&null===i.value)}):n},t.prototype.serializeTextNode=function(t,n,i){if(this.Ks){var r=this.Qs.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.Ks){var i=this.Qs.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=
function(t,n,i){this.Ks&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.ru(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.Ks&&(i.skipRegisterNode||this.ru(n,i))},t.prototype.enable=function(){this.Ks=!0,this.eu()},t.prototype.disable=function(){this.Ks=!1,this.eu()},t.prototype.setDefaultSerializationOptions=function(t){this.Xs=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.Zs.get(t))||
void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.hn.getId(t);if(i)return null===(n=this.Zs.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.hn.getId(t);return i&&(null===(n=this.Zs.get(i))||void 0===n?void 0:n.options)||this.Xs},t.prototype.registerInitialCharacterData=function(t,n){this.Qs.get(t)||this.Qs.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var e=this.tu.get(t),s="".concat(i).concat(n||
"");if(e){if(e.has(s))return}else e=new Map,this.tu.set(t,e);var u={name:i,namespaceURI:n||"",value:r};e.set(s,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.hn.getId(n);r&&this.nu.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.hn.getId(i),e=this.hn.getId(t);if(r&&e){var s=this.iu.get(r);if(s)csArray.prototype.push.call(s.removedNodeIds,e),csArray.prototype.indexOf.call(s.childNodeIds,
e)<0&&csArray.prototype.push.call(s.childNodeIds,e);else{for(var u=[],o=n?this.hn.getId(n):null,h=0;h<csNodechildNodes.apply(i).length;h+=1){var c=this.hn.getId(csNodechildNodes.apply(i)[h]);c&&!this.nu.has(c)&&(o&&c===o&&csArray.prototype.push.call(u,e),csArray.prototype.push.call(u,c))}null===o&&csArray.prototype.push.call(u,e);var a=[e];this.iu.set(r,{childNodeIds:u,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&ue(r)&&this.su(n,
r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.hn.getId(t);return!!n&&this.nu.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.hn.getId(n),r=this.hn.getId(t);if(!i||!r)return-1;var e=this.iu.get(i);return e?csArray.prototype.indexOf.call(e.childNodeIds,r):-1},t.prototype.eu=function(){this.Zs.clear(),this.Qs.clear(),this.tu.clear(),this.nu.clear(),this.iu.clear()},t.prototype.ru=function(t,n){t.csId&&(this.ou(t.csId,t,n),this.hu(t.csId,t),this.Zs.set(t.csId,
{serializedNode:t,options:n}))},t.prototype.ou=function(t,n,i){if(function(t){return t instanceof gr}(n)){var r=this.tu.get(t);if(r){for(var e=0,s=n.attributes;e<s.length;e++){var u=s[e],o="".concat(u.name).concat(u.namespaceURI||""),h=r.get(o);h&&null!==h.value&&(u.value=h.value,r.delete(o))}r.forEach(function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})})}}},t.prototype.su=function(t,n,i){(i.csId||
se(i))&&(t>=0?csArray.prototype.splice.call(n.children,t,0,i):se(i)&&csArray.prototype.push.call(n.children,i))},t.prototype.hu=function(t,n){var i;if(ue(n)){var r=this.iu.get(t);if(r)for(var e=0,s=r.removedNodeIds;e<s.length;e++){var u=s[e],o=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==o){var h=null===(i=this.Zs.get(u))||void 0===i?void 0:i.serializedNode;void 0!==h&&this.su(o,n,h)}}}},t}();function se(t){return"artificial"in t}function ue(t){return"children"in t}var oe,he,ce={taskTime:25},
ae=function(t){function n(n,i,r,e){void 0===r&&(r=new ee(i)),void 0===e&&(e=ce);var s=t.call(this,X([r],n,!0))||this;return s.au=i,s.fu=r,s.vu=e,s.lu=0,s.du=s.vu.taskTime,s}return Y(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],e=n[2];this.fu.getSerializedNodeById(i)||this.fu.registerInitialAttributes(i,r,e,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.fu.getSerializedNodeById(i)||this.fu.registerInitialCharacterData(i,
t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.ce(t,n,i);return this.wu(t),{removedNodes:this.he(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),K(this,void 0,void 0,function(){return Z(this,function(i){return this.lu+=1,this.fu.setDefaultSerializationOptions(n),[2,this.yu(t,n)]})})},n.prototype.ce=function(t,n,i){var r=[],e=null;if(t.nextSibling){var s=this.au.getId(t.nextSibling);e=void 0!==s?s:null}for(var u=this.au.getId(t.target),
o=0;o<t.addedNodes.length;o+=1){var h=t.addedNodes[o],c=this.serialize(h,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(h);a&&i.set(h,a-1),csArray.prototype.push.call(r,[u,e,c])}return r},n.prototype.wu=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.fu.markAddedTreeAsProcessed(i)}},n.prototype.pu=function(t,n){if(!n)return-1;var i=this.fu.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.he=
function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var e=t.removedNodes[r];if(this.fu.markRemovedNodeAsProcessed(e,t.nextSibling,t.target),this.mu(e))this.gu(e)&&this.Su(e,n);else{var s=this.serialize(e,{withAnonymization:n});if(this.gu(t.target)){var u=this.pu(e,t.target);this.fu.addSerializedChildToParent(t.target,u,s)}}var o=this.au.getId(e);o&&csArray.prototype.push.call(i,[o])}return i},n.prototype.Su=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];
if(this.gu(r))this.Su(r,n);else if(!this.fu.isAddedNodeDuringSerialization(r)){var e=this.serialize(r,{withAnonymization:n}),s=this.pu(r,t);this.fu.addSerializedChildToParent(t,s,e)}}},n.prototype.gu=function(t){return!!this.fu.getSerializedNodeByNode(t)},n.prototype.mu=function(t){return this.gu(t)||this.fu.isAddedNodeDuringSerialization(t)},n.prototype.yu=function(t,n){return void 0===n&&(n={}),K(this,void 0,void 0,function(){var i,r,e,s,u,o,h,c,f,v,l;return Z(this,function(d){switch(d.label){case 0:return i=
this.lu,r=At(),this.fu.enable(),n.skipChildrenSerialization=!0,e=[t],[4,re()];case 1:if(d.sent(),i!==this.lu)return[2,null];this.Eu=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(e.length>0))return[3,7];s=csArray.prototype.pop.call(e),u=this.fu.getOptions(s),o=this.runBeforeSerializeChildrenHook(s,u),h=csArray.prototype.shift.call(o),d.label=3;case 3:return h?csDate.now()-this.Eu>this.du?[4,re()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.lu)return[2,null];this.Eu=csDate.now(),d.label=5;case 5:return this.mu(h)?
(h=csArray.prototype.shift.call(o),[3,3]):(csArray.prototype.push.call(e,h),c=this.serialize(h,u),f=this.pu(h,s),this.fu.addSerializedChildToParent(s,f,c),a(h)&&csElementshadowRoot.apply(h)&&(v=csElementshadowRoot.apply(h),csArray.prototype.push.call(e,v)),h=csArray.prototype.shift.call(o),[3,3]);case 6:return[3,2];case 7:if(!(l=this.fu.getSerializedNodeByNode(t)))throw this.fu.disable(),new Error("traverseAndSerialize : fail to serialize");return this.fu.disable(),[2,{args:[l],date:r,type:Sn.INITIAL_DOM}]}})})},
n}(ie),fe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.isAsynchronous=function(){return!1},n}(ie),ve=function(){function t(){this.Au=new Map,this.bu=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!p(t))return n;var i=this.Ru(t);if(null===i||0===i.length)return n;if(function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;
default:return!1}return!0}(t.textContent)){var r=Qn(n);return csArray.prototype.push.call(r,this.Nu(i)),r}var e=this.Tu(t);if(e===i.length)return n;for(var s=new csArray(i.length-e),u=e,o=0;u<i.length;u+=1,o+=1)s[o]=i[u];r=Qn(n);return csArray.prototype.push.call(r,this.Nu(s)),r},t.prototype.Tu=function(t){var n=this.Au.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.bu.head.appendChild(i);var r=this.Ru(i);return n=r?r.length:0,this.Au.set(t.textContent,n),
this.bu.head.removeChild(i),n},t.prototype.Ru=function(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Nu=function(t){var n="";ni(t,function(t){return n+=t.cssText});var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),le=function(){function t(t,n){this.hn=t,this.Gi=n,this.Ou=1,this.Dn=!1}return t.prototype.isAdoptedStyleSheetsSupported=
function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){this.isAdoptedStyleSheetsSupported()&&(this.Iu=new Set,this.ku=Hi(window.ShadowRoot.prototype,"adoptedStyleSheets",this.Cu.bind(this)),this._u=Hi(window.Document.prototype,"adoptedStyleSheets",this.Cu.bind(this)))},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){!this.Dn&&this.isAdoptedStyleSheetsSupported()&&(this.Dn=!0,this.Pu(),this.ku&&this.ku.activate(),this._u&&
this._u.activate())},t.prototype.stop=function(){this.Dn&&this.isAdoptedStyleSheetsSupported()&&(this.Dn=!1,this.Mu(),this.Iu.clear(),this.ku&&this.ku.deactivate(),this._u&&this._u.deactivate())},t.prototype.serializeDocumentNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.Cu(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.Cu(t,t.adoptedStyleSheets)},t.prototype.Pu=
function(){this.ve=this.Gi.registerToInsertRuleInterceptor(this.Lu.bind(this)),this.le=this.Gi.registerToDeleteRuleInterceptor(this.xu.bind(this))},t.prototype.Mu=function(){var t,n;null===(t=this.ve)||void 0===t||t.call(this),null===(n=this.le)||void 0===n||n.call(this)},t.prototype.Cu=function(t,n){var i=this;this.Dn&&si(function(){csArray.prototype.forEach.call(n,function(t){return i.Du(t)});var r=csArray.prototype.map.call(n,function(t){return i.Uu(t)}),e=i.hn.getId(t);if(e){var s={type:Sn.SET_ADOPTED_STYLE_SHEETS,
args:[e,r],date:At()};i.Hn(s)}})},t.prototype.Uu=function(t){return t.__adopted_stylesheet_id},t.prototype.Lu=function(t,n){var i=n[0],r=n[1],e=this.ju(t);if(e){var s={date:At(),type:Sn.ADOPTED_STYLESHEET_RULE_INSERT,args:_t(r)?[e,i,r]:[e,i]};this.Hn(s)}},t.prototype.xu=function(t,n){var i=n[0],r=this.ju(t);if(r&&r){var e={date:At(),type:Sn.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.Hn(e)}},t.prototype.ju=function(t){return this.Iu.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:
null},t.prototype.Du=function(t){if(!this.Iu.has(t)){var n=this.Ou++;t.__adopted_stylesheet_id=n,this.Iu.add(t);var i=this.Hu(t),r={type:Sn.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:At()};this.Hn(r)}},t.prototype.Hu=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,function(t){return t.cssText})}catch(t){un.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",
t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(oe||(oe={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(he||(he={}));var de,we=function(){function t(t,n,i,r){this.zu=t,this.L=n,this.X=i,this.Bu=r}return t.prototype.init=
function(){this.qu()},t.prototype.shouldUseAnonymization=function(){if(this.zu.isReplayUnanonymizedAllowedByConsent()){switch(this.L.anonymisationMethod){case null:case oe.replayRecordingMaskedUrlRegex:return!(!this.L.replayRecordingMaskedUrlRegex||!this.L.replayRecordingMaskedUrlRegex.test(this.X.getAnonymizedUrl()));case oe.replayRecordingMaskedUrlRegexRules:return this.Bu.evaluateUrl(this.X.getAnonymizedUrl())}return!1}switch(this.L.anonymisationMethod){case null:case oe.replayRecordingUnmaskedUrlRegex:return!(this.L.replayRecordingUnmaskedUrlRegex&&
this.L.replayRecordingUnmaskedUrlRegex.test(this.X.getAnonymizedUrl()));case oe.replayRecordingUnmaskedUrlRegexRules:return!this.Bu.evaluateUrl(this.X.getAnonymizedUrl())}return!0},t.prototype.qu=function(){this.L.anonymisationMethod===oe.replayRecordingMaskedUrlRegexRules&&this.L.replayRecordingMaskedUrlRegexRules?this.Bu.setRegexRules(this.L.replayRecordingMaskedUrlRegexRules):this.L.anonymisationMethod===oe.replayRecordingUnmaskedUrlRegexRules&&this.L.replayRecordingUnmaskedUrlRegexRules&&this.Bu.setRegexRules(this.L.replayRecordingUnmaskedUrlRegexRules)},
t}(),ye=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),pe=function(){function t(){this.Dn=!1,this.Fu=[],this.Gu=[],this.Vu()}return t.prototype.registerToInsertRuleInterceptor=function(t){var n=this;return this.Wu(this.Fu,t)?function(){}:(csArray.prototype.push.call(this.Fu,t),function(){n.Fu=csArray.prototype.filter.call(n.Fu,
function(n){return n!==t})})},t.prototype.registerToDeleteRuleInterceptor=function(t){var n=this;return this.Wu(this.Gu,t)?function(){}:(csArray.prototype.push.call(this.Gu,t),function(){n.Gu=csArray.prototype.filter.call(n.Gu,function(n){return n!==t})})},t.prototype.start=function(){var t,n;this.Dn||(this.Dn=!0,null===(t=this.Yu)||void 0===t||t.activate(),null===(n=this.Ju)||void 0===n||n.activate())},t.prototype.stop=function(){var t,n;this.Dn&&(this.Dn=!1,null===(t=this.Yu)||void 0===t||t.deactivate(),
null===(n=this.Ju)||void 0===n||n.deactivate())},t.prototype.Wu=function(t,n){return csArray.prototype.indexOf.call(t,n)>-1},t.prototype.$u=function(t,n){csArray.prototype.forEach.call(this.Fu,function(i){return i(t,n)})},t.prototype.Ku=function(t,n){csArray.prototype.forEach.call(this.Gu,function(i){return i(t,n)})},t.prototype.Vu=function(){var t=this;this.Zu()&&(this.Yu=ji({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(n){var i=n.context,r=n.args;t.$u(i,r)}})),this.Xu()&&
(this.Ju=ji({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(n){var i=n.context,r=n.args;return t.Ku(i,r)}}))},t.prototype.Zu=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.Xu=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t}(),me=function(){function t(t){this.Qu=
{},this.no=new fi(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.no.isThresholdReached()||(this.no.addString(n),"string"==typeof r?this.no.addString(r):this.no.addArrayBuffer(r),this.no.isThresholdReached()||(this.Qu[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.io(),function(t){var r=n.Qu[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.ro(t))}),0!==i.length&&(t(i),this.no.reset())},
t.prototype.io=function(){return Object.keys(this.Qu)},t.prototype.ro=function(t){delete this.Qu[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(de||(de={}));var ge,Se,Ee,Ae,be=function(){function t(t,n,i){this.eo=t,this.so=i,this.uo=de.NOT_STARTED,this.oo=[],this.ho=0,this.co=self.origin,this.ao="object"==typeof window?"":"worker-",this.no=new fi(n),this.fo()}return t.prototype.fo=function(){return K(this,
void 0,void 0,function(){return Z(this,function(t){switch(t.label){case 0:return[4,this.vo()];case 1:return t.sent(),this.uo===de.READY?this.lo():this.so(this.oo),[2]}})})},t.prototype.lo=function(){var t=this;csArray.prototype.forEach.call(this.oo,function(n){t.save(n)}),this.oo=[]},t.prototype.save=function(t){return K(this,void 0,void 0,function(){var n,i,r;return Z(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.uo===de.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.oo,
t),[2]):this.uo!==de.READY||this.no.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.no.addString(n),"string"==typeof r?this.no.addString(r):this.no.addArrayBuffer(r),this.no.isThresholdReached()?[2]:[4,this.do.put("".concat(this.co,"/").concat(n),new Response(r,{headers:i}))]);case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})},t.prototype.recover=function(t){return K(this,void 0,void 0,function(){return Z(this,function(n){switch(n.label){case 0:return this.do?
[3,2]:[4,this.vo()];case 1:if(n.sent(),this.uo!==de.READY)return[2];n.label=2;case 2:return this.wo(t),[2]}})})},t.prototype.vo=function(){return K(this,void 0,void 0,function(){var t;return Z(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.uo=de.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.ao).concat(this.eo))];case 1:return t.do=n.sent(),this.uo=de.READY,[3,3];case 2:return n.sent(),this.uo=de.OPEN_FAILED,[3,3];case 3:return[2]}})})},t.prototype.wo=function(t){return K(this,
void 0,void 0,function(){var n,i,r,e,s=this;return Z(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.ho++,this.ho>1?[2]:[4,this.do.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.do.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,function(t){var n={};t.headers.forEach(function(t,i){n[i]=t}),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then(function(t){return{metadata:n,events:t}}):t.arrayBuffer().then(function(t){return{metadata:n,
events:t}})}),[4,Promise.all(r)];case 3:return e=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,function(t){return s.do.delete(t)}))];case 4:return u.sent(),t(e),this.no.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.ho--,[7];case 7:return[2]}})})},t}(),Re=function(){function t(t){self.caches?this.yo(t):this.po()}return t.prototype.save=function(t){this.mo.save(t)},t.prototype.recover=function(t){this.mo.recover(t)},t.prototype.yo=function(n){var i=this;this.mo=new be(n,t.So,
function(t){i.po(t)})},t.prototype.po=function(n){var i=this;this.mo=new me(t.So),n&&csArray.prototype.forEach.call(n,function(t){i.mo.save(t)})},t.So=16777216,t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(ge||(ge={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(Se||(Se={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",
t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(Ee||(Ee={})),function(t){function n(){return"orientation"in screen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(screen.orientation.type){case Se.PORTRAIT_PRIMARY:case Se.PORTRAIT_SECONDARY:return ge.PORTRAIT;case Se.LANDSCAPE_PRIMARY:case Se.LANDSCAPE_SECONDARY:return ge.LANDSCAPE;default:return ge.PORTRAIT}}:i()?function(){switch(window.orientation){case Ee.PORTRAIT:case Ee.PORTRAIT_REVERSE:return ge.PORTRAIT;
case Ee.LANDSCAPE:case Ee.LANDSCAPE_REVERSE:return ge.LANDSCAPE;default:return ge.PORTRAIT}}:function(){return ge.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Ae||(Ae={}));var Ne,Te=function(){function t(){this.Eo=null,this.Ao=null,this.Dn=!1}return t.prototype.start=function(){this.Dn||(this.Dn=!0,this.onScreenPotentiallyChanged())},t.prototype.stop=function(){this.Dn&&(this.Dn=!1,this.Eo=null,this.Ao=null)},t.prototype.setOnScreenChangedCallback=function(t){this.bo=t},t.prototype.onScreenPotentiallyChanged=
function(){var t;if(this.Dn){var n=Ae.getCurrentOrientation(),i=this.Ro(n),r=i.screenWidth,e=i.screenHeight;if(r!==this.Eo||e!==this.Ao){this.Eo=r,this.Ao=e;var s={type:Sn.SCREEN_RESIZE,args:[r,e],date:At()};null===(t=this.bo)||void 0===t||t.call(this,s)}}},t.prototype.Ro=function(t){var n,i,r=xi.screenWidth(),e=xi.screenHeight();return t===ge.PORTRAIT?(n=r,i=e):(n=Math.max(r,e),i=Math.min(r,e)),{screenWidth:n,screenHeight:i}},t}(),Oe=function(){function t(t,n){this.rr=t,this.cn=n,this.To="cssrm://",
this.Oo=0}return t.prototype.beforeSerializeAttributes=function(t,n){if(this.cn.isSensitive(t))return n;if(y(t)||v(t)&&l(csNodeparentNode.apply(t))){var i=n,r=t.getAttribute("src");if(null!==r&&r.length>0&&(_r(r)||this.rr.isOnlineAssetsActivated()))return this.Oo++,this.Io(t.src,this.Oo),this.ko(n,this.Oo);if(null!==t.getAttribute("srcset")&&this.rr.isOnlineAssetsActivated()){for(var e=Mr(t.srcset),s=this.Oo+1,u=0,o=e;u<o.length;u++){var h=o[u];this.Oo++,this.Io(Wt(h),this.Oo)}i=this.Co(n,s,e)}return i}return w(t)&&
""!==t.getAttribute("href")&&this.rr.isOnlineAssetsActivated()?(this.Oo++,this._o(t.href,this.Oo),this.Po(n,this.Oo)):null!==t.getAttribute("style")?this.Mo(n):n},t.prototype.serializeTextNode=function(t,n,i){t.parentElement&&p(t.parentElement)&&(n.data=this.Lo(n.data))},t.prototype.serializeTextMutation=function(t,n){return csNodeparentNode.apply(t)&&p(csNodeparentNode.apply(t))?this.Lo(n):n},t.prototype.serializeAttributeMutationValue=function(t,n,i){if(this.cn.isSensitive(t))return n;if(y(t)||
v(t)&&l(csNodeparentNode.apply(t))){if("src"===i&&(_r(n)||this.rr.isOnlineAssetsActivated()))return this.Oo++,this.Io(n,this.Oo),this.To+this.Oo;if("srcset"===i&&this.rr.isOnlineAssetsActivated()){for(var r=Mr(n),e=this.Oo+1,s=0,u=r;s<u.length;s++){var o=u[s];this.Oo++,this.Io(Wt(o),this.Oo)}return this.xo(e,n,r).value}}return w(t)&&"href"===i&&this.rr.isOnlineAssetsActivated()?(this.Oo++,this._o(n,this.Oo),this.To+this.Oo):"style"===i?this.Lo(n):n},t.prototype.Lo=function(t){var n,i=csArray.from(new Set(Cr(t)));
if(this.Do(i)||this.rr.isOnlineAssetsActivated()&&this.Uo(i)){for(var r=t,e=0,s=i;e<s.length;e++){var u=s[e];(this.rr.isOnlineAssetsActivated()||_r(u))&&(this.Oo++,r=csString.prototype.replace.call(r,u,this.To+this.Oo)),_r(u)?this.Io(u,this.Oo):this.rr.isOnlineAssetsActivated()&&((n=u)&&Nt(n,".css")?this._o(u,this.Oo):this.Io(u,this.Oo))}return r}return t},t.prototype.Do=function(t){return csArray.prototype.some.call(t,function(t){return _r(t)})},t.prototype.Uo=function(t){return csArray.prototype.some.call(t,
function(t){return!_r(t)})},t.prototype.Mo=function(t){var n=this;return csArray.prototype.map.call(t,function(t){if("style"!==t.name)return t;var i=document.createAttribute(t.name);return i.value=n.Lo(t.value),i})},t.prototype.ko=function(t,n){var i=this;return csArray.prototype.map.call(t,function(t){if("src"!==t.name)return t;var r=document.createAttribute(t.name);return r.value=i.To+n,r})},t.prototype.Co=function(t,n,i){var r=this;return csArray.prototype.map.call(t,function(t){return"srcset"!==
t.name?t:r.xo(n,t.value,i)})},t.prototype.xo=function(t,n,i){var r=t,e=document.createAttribute("srcset");e.value=n;for(var s=0,u=i;s<u.length;s++){var o=u[s];e.value=csString.prototype.replace.call(e.value,o,this.To+r),r++}return e},t.prototype.Po=function(t,n){for(var i=[],r=0,e=t;r<e.length;r++){var s=e[r],u=document.createAttribute(s.name);if(csArray.prototype.push.call(i,u),"href"===s.name){var o=document.createAttribute("data-cs-original-href");o.value=s.value,csArray.prototype.push.call(i,
o),u.value=this.To+n}else u.value=s.value}return i},t.prototype.Io=function(t,n){this.rr.processStaticResource({id:n,input:t})},t.prototype._o=function(t,n){this.rr.processStaticCssLinkResource({id:n,input:t})},t}();!function(t){t[t.NOT_EXIST=2]="NOT_EXIST"}(Ne||(Ne={}));var Ie=function(t){function n(n,i,r){var e=t.call(this)||this;return e.rr=n,e.jo=i,e.Ho=r,e.zo={},e.Bo=new Set,e.oi=!1,e}return Y(n,t),n.prototype.onStart=function(){this.rr.start()},n.prototype.onStop=function(){this.rr.stop()},
n.prototype.initState=function(){var t=this;this.rr.isStaticResourceManagerSupported()&&(this.qo=this.Ho.getRequestParameters(),this.Fo="".concat(this.jo,"/exist?").concat(ut.toQuery(this.qo)),this.Go="".concat(this.jo,"/putTag?").concat(ut.toQuery(this.qo)),this.Vo=br(function(){return K(t,void 0,void 0,function(){return Z(this,function(t){switch(t.label){case 0:return this.oi?(this.Vo(),[2]):(this.oi=!0,[4,this.Wo()]);case 1:return t.sent(),this.oi=!1,[2]}})})},300),this.rr.sendStaticResource(function(n){t.Bo.has(n.hash)||
(t.Bo.add(n.hash),t.zo[n.hash]=n,t.Vo())}))},n.prototype.onIframeStaticResource=function(t){this.rr.isStaticResourceManagerSupported()&&!this.Bo.has(t.hash)&&(this.Bo.add(t.hash),this.zo[t.hash]=t,this.Vo())},n.prototype.Wo=function(){return K(this,void 0,void 0,function(){var t,n,i,r=this;return Z(this,function(e){switch(e.label){case 0:return t=this.zo,this.zo={},[4,this.Yo(t)];case 1:return(n=e.sent()).length?(i=this.Jo(n),[4,Promise.all(csArray.prototype.map.call(i,function(t){return window.fetch(r.Go,
{method:"POST",body:t})}))]):[2];case 2:return e.sent(),[2]}})})},n.prototype.$o=function(t){return K(this,void 0,void 0,function(){var n,i;return Z(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(n=Object.keys(t)).length?(i={projectId:this.qo.pid,filter:Ne.NOT_EXIST,hashes:n,touch:!0},[4,window.fetch(this.Fo,{method:"POST",body:csJSON.stringify(i)})]):[2,[]];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()];case 3:return r.sent(),[2,[]];case 4:return[2]}})})},n.prototype.Yo=
function(t){return K(this,void 0,void 0,function(){var n,i,r;return Z(this,function(e){switch(e.label){case 0:n=[],e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.$o(t)];case 2:return i=e.sent(),csArray.prototype.forEach.call(i,function(i){var r=t[i];r?csArray.prototype.push.call(n,r):un.warn("SRM: received unknown hash: "+i)}),[3,4];case 3:return r=e.sent(),un.warn("SRM Service,getUnknownHashes error: ".concat(r.message," ")),[3,4];case 4:return[2,n]}})})},n.prototype.Jo=function(t){for(var n=
0,i=[new FormData],r=0,e=t;r<e.length;r++){var s=e[r],u=s.blob,o=s.hash,h=i.length-1;if((n+=u.size)<8388608)i[h].append("",u,o);else{var c=new FormData;c.append("",u,o),n=u.size,csArray.prototype.push.call(i,c)}}return i},n}(wi),ke=function(){function t(){this.Ko=[]}return t.prototype.setRegexRules=function(t){var n=this;this.Ko=csArray.prototype.map.call(t,function(t){return n.Zo(t)})},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this.Ko,function(i){var r,e,s=
n.Xo(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(s)):null===(e=i.regex)||void 0===e?void 0:e.test(s)})},t.prototype.Xo=function(t,n){var i=Kt(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.Qo=function(t){return t.ignoreCaseSensitivity?"i":""},
t.prototype.Zo=function(t){switch(t.operator){case he.NOT_START:t.notOperator=!0;case he.START:t.regex=new RegExp("^".concat(t.value),this.Qo(t));break;case he.NOT_END:t.notOperator=!0;case he.END:t.regex=new RegExp("".concat(t.value,"$"),this.Qo(t));break;case he.NOT_CONTAIN:t.notOperator=!0;case he.CONTAIN:t.regex=new RegExp("".concat(t.value),this.Qo(t));break;case he.NOT_EXACT:t.notOperator=!0;case he.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.Qo(t));break;default:un.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},
t}(),Ce=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};var _e,Pe,Me,Le=function(){function t(t,n){void 0===n&&(n=100),this.th=t,this.nh=n,this.ih="original-resource-name",this.rh=!1,this.Dn=!1,this.eh=!1,this.uh="SHA-256",this.oh={},this.hh=null}return t.prototype.init=function(){"Promise"in window&&"function"==typeof window.Promise&&this.th.isSupported()&&(this.rh=!0)},t.prototype.enableOnlineAssets=
function(){this.eh=!0},t.prototype.isOnlineAssetsActivated=function(){return this.eh},t.prototype.isSupported=function(){return this.rh},t.prototype.processStaticResource=function(t){var n;return K(this,void 0,void 0,function(){var i,r,e,s,u,o;return Z(this,function(h){switch(h.label){case 0:return h.trys.push([0,7,,8]),this.rh?(i=void 0,_r(t.input)?[3,3]:[4,window.fetch(t.input)]):[2];case 1:return[4,h.sent().blob()];case 2:return i=h.sent(),[3,4];case 3:if(!(r=qr(t.input)))return[2];i=r,h.label=
4;case 4:return[4,i.arrayBuffer()];case 5:return e=h.sent(),[4,crypto.subtle.digest(this.uh,e)];case 6:return s=h.sent(),u=Fr(s),o=_r(t.input)?void 0:t.input,this.ah(t.id,u,o),null===(n=this.fh)||void 0===n||n.call(this,{hash:u,blob:i}),[3,8];case 7:return h.sent(),[3,8];case 8:return[2]}})})},t.prototype.processStaticCssLinkResource=function(t){return K(this,void 0,void 0,function(){var n;return Z(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.rh?[4,this.lh(t.input)]:[2];
case 1:return n=i.sent(),this.ah(t.id,n.get(Wt(t.input)).hash,t.input),this.yh(n),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}})})},t.prototype.isStaticResourceManagerSupported=function(){return this.rh},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.sendStaticResource=function(t){this.fh=t},t.prototype.flushEvents=function(){var t;if(Object.keys(this.oh).length){this.hh&&clearTimeout(this.hh);var n={type:Sn.RESOURCE_HASHES,date:Ce(),args:[this.oh]};this.hh=null,this.oh={},null===
(t=this.Hn)||void 0===t||t.call(this,n)}},t.prototype.start=function(){this.Dn||(this.Dn=!0)},t.prototype.stop=function(){this.Dn&&(this.Dn=!1,this.eh=!1,this.flushEvents())},t.prototype.ah=function(t,n,i){var r=this,e=n;i&&(e+="?".concat(this.ih,"\x3d").concat(i)),this.oh[t]=e,this.hh&&clearTimeout(this.hh),this.hh=window.setTimeout(function(){return r.flushEvents()},this.nh)},t.prototype.lh=function(t){return K(this,void 0,void 0,function(){var n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p;return Z(this,function(m){switch(m.label){case 0:n=
new Map,i=Wt(t),r=[{resourceRawPath:t,resourceAbsolutePath:i}],m.label=1;case 1:if(!(r.length>0))return[3,17];if(e=csArray.prototype.pop.call(r),!this.isOnlineAssetsActivated()&&null!==e.resourceAbsolutePath&&!_r(e.resourceAbsolutePath))return n.set(e.resourceAbsolutePath,null),[3,1];if(void 0!==n.get(e.resourceAbsolutePath))return[3,1];m.label=2;case 2:return m.trys.push([2,15,,16]),null===e.resourceRawPath||csString.prototype.indexOf.call(e.resourceRawPath,".css")>0?e.data?[3,5]:[4,fetch(e.resourceAbsolutePath)]:
[3,8];case 3:return w=m.sent(),s=e,[4,w.text()];case 4:s.data=m.sent(),m.label=5;case 5:for(e.nestedResources||(e.nestedResources=csArray.from(new Set(Cr(e.data)))),u=!1,o=!1,h=function(t){var i,s,h=_r(t)?t:e.resourceAbsolutePath?(i=t,s=e.resourceAbsolutePath,(new csURL(i,s)).href):Wt(t),a=n.get(h);if(void 0!==a){if(null!==a){var f=c.ph(a,t);e.data=csString.prototype.replaceAll.call(e.data,t,f)}return"continue"}var v=void 0!==csArray.prototype.find.call(r,function(t){return t.resourceAbsolutePath===
h});v||(u=!0,o||(csArray.prototype.push.call(r,e),o=!0),csArray.prototype.push.call(r,{resourceRawPath:t,resourceAbsolutePath:h}))},c=this,a=0,f=e.nestedResources;a<f.length;a++)v=f[a],h(v);return u?[3,7]:[4,this.mh(e.data)];case 6:l=m.sent(),n.set(e.resourceAbsolutePath,{hash:l.hash,blob:l.blob}),m.label=7;case 7:return[3,14];case 8:return d=void 0,_r(e.resourceAbsolutePath)?[3,11]:[4,fetch(e.resourceAbsolutePath)];case 9:return[4,(w=m.sent()).blob()];case 10:return d=m.sent(),[3,12];case 11:if(!(y=
qr(e.resourceAbsolutePath)))return n.set(e.resourceAbsolutePath,null),[3,1];d=y,m.label=12;case 12:return[4,this.gh(d)];case 13:p=m.sent(),n.set(e.resourceAbsolutePath,{hash:p,blob:d}),m.label=14;case 14:return[3,16];case 15:return m.sent(),n.set(e.resourceAbsolutePath,null),[3,16];case 16:return[3,1];case 17:return[2,n]}})})},t.prototype.ph=function(t,n){var i="cs://resources/".concat(t.hash);return _r(n)||(i+="?".concat(this.ih,"\x3d").concat(n)),i},t.prototype.mh=function(t){return K(this,void 0,
void 0,function(){var n,i,r;return Z(this,function(e){switch(e.label){case 0:return[4,(n=new Blob([t],{type:"text/css"})).arrayBuffer()];case 1:return i=e.sent(),[4,crypto.subtle.digest(this.uh,i)];case 2:return r=e.sent(),[2,{blob:n,hash:Fr(r)}]}})})},t.prototype.gh=function(t){return K(this,void 0,void 0,function(){var n;return Z(this,function(i){switch(i.label){case 0:return[4,t.arrayBuffer()];case 1:return n=i.sent(),[4,crypto.subtle.digest(this.uh,n)];case 2:return[2,Fr(i.sent())]}})})},t.prototype.yh=
function(t){var n=this;t.forEach(function(t){var i;t&&(null===(i=n.fh)||void 0===i||i.call(n,{hash:t.hash,blob:t.blob}))})},t}(),xe=function(){function t(){this.Sh=[],this.Eh=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var e=csArray.prototype.pop.call(i),s=e.root;null!==s;)if(r&&n&&n.get(s)>0){for(var u=e.nextSibling();null===u&&null!==e.parentNode();)u=e.nextSibling();s=u}else s.__contentsquare_identifier=
this.Eh,this.Eh+=1,a(s)&&csElementshadowRoot.apply(s)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(s),NodeFilter.SHOW_ALL,null,!1)):b(s)&&this.Ah(s),s=e.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var e=n.__contentsquare_identifier;if(e&&
i.add(e),a(n)&&csElementshadowRoot.apply(n)){var s=csElementshadowRoot.apply(n);this.getIds(s).forEach(function(t){return i.add(t)})}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Sh,t)},t.prototype.Ah=function(t){for(var n=0,i=this.Sh;n<i.length;n++)(0,i[n])(t)},t}(),De=function(){function t(){this.bh=new Map,this.Rh={},this.Nh=!1}return t.prototype.start=function(){},t.prototype.stop=function(){this.flushEvents(),this.bh.clear()},t.prototype.serializeTextNode=
function(t,n){var i=this.setReferenceId(n.data);return n.data="cstextref://".concat(i),n},t.prototype.serializeCDATASectionNode=function(t,n){var i=this.setReferenceId(n.data);return n.data="cstextref://".concat(i),n},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.flushEvents=function(){var t=this.Th();t&&this.Hn(t)},t.prototype.getPendingEvents=function(){var t=this.Th();return t?[t]:[]},t.prototype.getReferenceId=function(t){return this.bh.get(t)},t.prototype.setReferenceId=function(t){return this.Oh(t)},
t.prototype.Th=function(){if(0!==Object.keys(this.Rh).length){var t={type:Sn.TEXT_REF,date:At(),args:[this.Rh]};return this.Rh={},t}},t.prototype.Oh=function(t){var n=this,i=this.bh.get(t);return i||(i=this.bh.size+1,this.bh.set(t,i),this.Rh[i]=t,this.Nh||(this.Nh=!0,si(function(){n.Nh=!1,n.flushEvents()})),i)},t}(),Ue=(_e=qt.Element,window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector),
je=function(){function t(t,n,i){var r,e=this;this.hn=t,this.cn=n,this.tr=i,this.Hn=tt,this.Dn=!1,this.Ih=new Set,this.kh=zi(),this.Ch=function(t){return e.inputHandler(t)},this._h=function(t,n,i,r){if(i&&e.Dn&&t.isConnected){var s=e.hn.getId(t);s&&e.Ph(t)&&si(function(){e.Mh(t,s)})}return r.apply(t,[n])},this.Lh(),this.xh(),this.Dh(),null===(r=this.tr)||void 0===r||r.onInputNodeToEncrypt(function(t){e.Hn(t)})}return t.prototype.start=function(){this.Dn||(this.Dn=!0,In({type:"keyup",boundElement:document,
listener:this.Ch}),In({type:"change",boundElement:document,listener:this.Ch}))},t.prototype.stop=function(){var t=this;this.Dn&&(this.Dn=!1,kn({type:"keyup",boundElement:document,listener:this.Ch}),kn({type:"change",boundElement:document,listener:this.Ch}),this.Ih.forEach(function(n){kn({type:"change",boundElement:n,listener:t.Ch})}),this.Ih.clear())},t.prototype.serializeElementNode=function(t,n){var i=this;if(this.Dn){if(!this.Ph(t))return;si(function(){i.Mh(t,n.csId)})}},t.prototype.onEvent=function(t){this.Hn=
t},t.prototype.Mh=function(t,n){var i,r,e;if(!this.kh.has(t))if(this.kh.add(t),this.Uh(t)){var s={type:Sn.INPUT_SELECT,args:[n,t.selectedIndex],date:At()};this.Hn(s)}else if(this.jh(t)){var u={type:Sn.INPUT_CHECKABLE,args:[n,t.checked],date:At()};this.Hn(u)}else{var o=this.Hh(t),h=this.zh(t);if(o||h){var c=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.tr)||void 0===r?void 0:r.shouldEncrypt(t))return void(null===(e=this.tr)||void 0===e||e.registerInputNodeToEncrypt({targetId:n,targetValue:c,
date:At()}));var a=h?"0":"\u2022",f={type:Sn.INPUT_TEXT,args:[n,csString.prototype.replace.call(c,/\S/g,a)],date:At()};this.Hn(f)}}},t.prototype.inputHandler=function(t){var n=this,i=Yn(t),r=this.hn.getId(i);r&&this.Ph(i)&&i.isConnected&&si(function(){n.Mh(i,r)})},t.prototype.afterSerializeShadowRoot=function(t){this.Ih.has(t)||(In({type:"change",listener:this.Ch,boundElement:t}),this.Ih.add(t))},t.prototype.Lh=function(){var t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");if(null==
t?void 0:t.configurable){var n=t.set,i=this;t.set=function(t){var r=t!==this.value;return i._h(this,t,r,n)},Object.defineProperty(HTMLInputElement.prototype,"value",t)}},t.prototype.xh=function(){var t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked");if(null==t?void 0:t.configurable){var n=t.set,i=this;t.set=function(t){var r=t!==this.checked;return i._h(this,t,r,n)},Object.defineProperty(HTMLInputElement.prototype,"checked",t)}},t.prototype.Dh=function(){var t=Object.getOwnPropertyDescriptor(HTMLSelectElement.prototype,
"selectedIndex");if(null==t?void 0:t.configurable){var n=t.set,i=this;t.set=function(t){var r=t!==this.selectedIndex;return i._h(this,t,r,n)},Object.defineProperty(HTMLSelectElement.prototype,"selectedIndex",t)}},t.prototype.Uh=function(n){return Ue.call(n,t.Bh)},t.prototype.Hh=function(n){return Ue.call(n,t.qh)},t.prototype.zh=function(n){return Ue.call(n,t.Fh)},t.prototype.jh=function(n){return Ue.call(n,t.Gh)},t.prototype.Ph=function(t){return!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)&&
(m(t)||A(t)||g(t))},t.qh=csArray.prototype.join.call(["textarea","input:not([type])",'input[type\x3d"text"]','input[type\x3d"email"]','input[type\x3d"search"]','input[type\x3d"tel"]','input[type\x3d"url"]','input[type\x3d"password"]'],","),t.Fh='input[type\x3d"number"]',t.Gh=csArray.prototype.join.call(['input[type\x3d"checkbox"]','input[type\x3d"radio"]'],","),t.Bh="select",$([Jn()],t.prototype,"inputHandler",null),t}(),He="v2/recording",ze=["setCapturedElementsSelector"],Be=["setPIISelectors"],
qe=["isRecording"],Fe=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Ge=["replay:resourceManager:getStatus","cssrm:getStatus"],Ve=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,S,E,A){this.Vh=t,this.J=n,this.L=i,this.Wh=r,this.zu=e,this.qo=s,this.Yh=u,this.D=o,this.$i=h,this.X=c,this.cn=a,this.Ki=f,this.Zi=v,this.Xi=l,this.Ms=d,this.Qi=w,this.Ln=y,this.Jh=p,this.$h=m,this.Kh=g,this.hs=S,this.Zh=E,this.Xh=A,this.rr=null,
this.Qh=null}return t.prototype.init=function(){var t=this,n=[],i=new Re("csPersisted");this.tc(i);var r=new li;this.Bi=new vi;var e=new xe,s=new lr(this.cn);this.nc=new Er(this.D,this.L),this.nc.init();var u=new Dr;csArray.prototype.push.call(n,u);var o=new Hr(this.hs,e),h=[new ve,s,this.nc,u],c=null;if(this.L.useStaticResourceManager){var a=new Wr(window.crypto);a.init(),this.rr=new Le(a),this.rr.init(),csArray.prototype.push.call(n,this.rr),this.rr.isStaticResourceManagerSupported()&&(c=new Oe(this.rr,
this.cn),csArray.prototype.push.call(h,c),this.Qh=new Ie(this.rr,this.L.getStaticResourceManagerUri(),this.qo))}var f=new pe,v=new le(e,f);v.init(),csArray.prototype.push.call(n,v),v.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(h,v);var l=new De;csArray.prototype.push.call(h,l),csArray.prototype.push.call(n,l);var d,w=new je(e,this.cn,this.tr);csArray.prototype.push.call(h,w),d=this.ic()?new ae(h,e):new fe(h);var y=new Ar(r,this.qo,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},
{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}},{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.J.getRecordingStates(),",")}}}),p=new zr("".concat(this.L.getRecordingUri(),"/").concat(He)),m=new ke;this.Le=new we(this.zu,this.L,this.X,m),this.Le.init(),this._n=new ar(d,e,this.nc,this.tr),this._n.setAnonymization(this.Le.shouldUseAnonymization()),this.Wi=new Xn(e,this.cn),this.Wi.init();var g=new ai(this._n,o,u,this.Ln,e,this.cn);
this.ir=new rr(i,p,this.nr),csArray.prototype.push.call(n,new fr(e,this.cn,u,f)),csArray.prototype.push.call(n,new Ur(window)),csArray.prototype.push.call(n,new Tr(window.location,this.D,new Te)),this.recordingService=new ir(this.L,this.Bi,y,r,f,g,this.Wi,w,new Yr(this.Ms,e,this.cn),this.$i,this.J,this.Ki,this.Zi,this.Xi,this.Qi,this.tr,this.nr,this.ir,this.rr,n,p),this.rc=new Or(this.Wi,g,new Nr(this.L),this.recordingService,this._n,this.Le,this.Ln),this.Jh.addListener(this.recordingService),this.$h.addListener(this.recordingService),
this.$h.addListener(this.rc),this.Qh&&this.$h.addListener(this.Qh),o.init(),this.rc.init(),this.recordingService.init(),this.Yh.register(qe,function(){return t.J.isReplayRecorded()&&!t.Kh.isUrlExcludedForSessionReplay()}),this.Yh.register(ze,function(n){t.nc.setWhitelistedElementsSelector(n),t.Ln.emitRecordingStatusChange()}),this.Yh.register(Be,function(n){t.cn.setPIISelectors(n),t.Ln.emitRecordingStatusChange()}),this.Yh.register(Fe,function(){t.recordingService.activateOnlineAssetsOnNextPageview(),
t.Ln.emitRecordingStatusChange()}),this.Yh.register(Ge,function(){return t.recordingService.getStaticResourceManagerStatus()}),this.Vh.enableRecordingStatus(this.recordingService,this.cn,this.Le,this.nc,this.J,this.tr)},t.prototype.onAfterNaturalPageView=function(){var t;null===(t=this.Qh)||void 0===t||t.initState()},t.prototype.onStartTracking=function(){this.ir.recover(),this._n.setAnonymization(this.Le.shouldUseAnonymization()),this.J.isReplayRecorded()&&!this.Kh.isUrlExcludedForSessionReplay()&&
(this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ec())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.J.isReplayRecorded()||this.Kh.isUrlExcludedForSessionReplay()||this.J.isTemporarilyRecorded()||this.ir.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this._n.setAnonymization(this.Le.shouldUseAnonymization()),this.J.isReplayRecorded()&&!this.Kh.isUrlExcludedForSessionReplay()?(this.J.isTemporarilyRecorded()&&
this.recordingService.blockSendingEventsFromQuotaService(),this.sc()):this.oc()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.oc()},t.prototype.onOptout=function(){this.oc()},t.prototype.onReplayUnanonymizationConsentGranted=function(){this._n.setAnonymization(this.Le.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentGranted(),this.Ln.emitRecordingStatusChange()},t.prototype.onReplayUnanonymizationConsentWithdrawn=function(){this._n.setAnonymization(this.Le.shouldUseAnonymization()),
this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.Ln.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){t===oi.NOT_RECORDED&&n===hi.ETR_OFF?(this.recordingService.clearEvents(),this.oc()):(this.nr.setQueryParams({rt:csArray.prototype.join.call(this.J.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this._n.isDOMSerializationInProgress()||this.recordingService.pushEvents())},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),
this.ir.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.ir.allowSendingLastMessage(),this.Wi.start(),this.recordingService.pushEvents()},t.prototype.onAfterReplayRecordingConsentGranted=function(){this.J.isReplayRecorded()&&!this.Kh.isUrlExcludedForSessionReplay()&&(this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ec(),this.recordingService.triggerRecordingForSessionGranted())},
t.prototype.onAfterReplayRecordingConsentWithdrawn=function(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.oc())},t.prototype.ec=function(){var t;this.recordingService.updateStaticResourceManagerOnlineAssets(),this.rc.start(),this.recordingService.start(),null===(t=this.Qh)||void 0===t||t.start(),this.ir.start(),this.Ln.emitRecordingStatusChange()},t.prototype.oc=function(){var t;this.rc.stop(),this.recordingService.stop(),
null===(t=this.Qh)||void 0===t||t.stop(),this.ir.stop(),this.Ln.emitRecordingStatusChange()},t.prototype.sc=function(){this.oc(),this.ec()},t.prototype.tc=function(t){this.nr=this.Zh.create("".concat(this.L.getRecordingUri(),"/").concat(He),!0,"byteArray",t)},t.prototype.ic=function(){return ye.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.hc=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&this.cc.isSupported()&&this.ac.isSupported()},$([Vn("Recording.onStartTracking")],
t.prototype,"onStartTracking",null),$([Vn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}();!function(t){t[t.NOT_NEEDED=1]="NOT_NEEDED",t[t.NOT_EXPRESSED=2]="NOT_EXPRESSED",t[t.WITHDRAWN=3]="WITHDRAWN",t[t.GRANTED=4]="GRANTED"}(Pe||(Pe={})),function(t){t.isReplayConsentNeeded=function(t){return t.replayConsentRequiredForSession},t.isRecordingBlockedByConsent=function(t){return t.recordingState===oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED||t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN},
t.isRecordingWithDrawn=function(t){return t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN}}(Me||(Me={}));var We=function(){function t(t,n,i,r){this.Y=t,this.J=n,this.L=i,this.fc=r,this.vc=!1}return t.prototype.isNaturalPageViewSent=function(){return this.vc},t.prototype.setNaturalPageViewSent=function(t){this.vc=t},t.prototype.getTrackingContext=function(){var t=this.J.getSession();if(!t)return null;var n=this.getSessionKey();if(!n)return null;var i=this.lc(t),r=this.wc(),e=this.yc(),s=this.mc();
return{projectId:r,sessionKey:n,pageNumber:i,pageViewType:e,isRecording:this.gc(),uxaDomain:s,recordingConsentState:this.Sc(t)}},t.prototype.getSessionKey=function(){var t=this.Y.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.Sc=function(t){return Me.isReplayConsentNeeded(this.L)?t.recordingState===oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED?Pe.NOT_EXPRESSED:t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN?Pe.WITHDRAWN:Pe.GRANTED:Pe.NOT_NEEDED},t.prototype.lc=function(t){return t.pageNumber},
t.prototype.wc=function(){return this.L.projectId},t.prototype.yc=function(){return this.fc.getPageViewType()},t.prototype.mc=function(){return this.L.uxaDomain},t.prototype.gc=function(){return this.J.isReplayRecorded()},t}(),Ye=function(){function t(t){this.Ec=t,this.Ac=[]}return t.prototype.handleCommand=function(t){if(Mt(t)&&(this.bc(t),this.Ec.isNaturalPageViewSent())){var n=this.Ec.getTrackingContext();null!==n&&this.Rc(t,n)}},t.prototype.bc=function(t){csArray.prototype.push.call(this.Ac,t)},
t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Ec.getTrackingContext();null!==n&&csArray.prototype.map.call(this.Ac,function(i){return t.Rc(i,n)})},t.prototype.Rc=function(t,n){setTimeout(function(){t(n)})},t}(),Je=function(){function t(t){this.Ec=t,this.Nc=[]}return t.prototype.handleCommand=function(t){return this.Ec.isNaturalPageViewSent()?this.Tc(t):void this.Oc(t)},t.prototype.Tc=function(t){var n=this.Ec.getSessionKey();return this.Wu(t)&&null!==n&&this.Rc(t.callback,n),
n},t.prototype.Oc=function(t){this.Wu(t)&&csArray.prototype.push.call(this.Nc,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Ec.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.Nc,function(i){t.Rc(i,n)}),this.Nc=[]},t.prototype.Wu=function(t){return t&&"function"==typeof t.callback},t.prototype.Rc=function(t,n){setTimeout(function(){t(n)})},t}(),$e=function(){function t(t,n){this.Ic=t,this.Ec=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=
this.Ec.getTrackingContext();null!==n&&this.Ic.sendToChildren(Qt.TrackingContextResultMessage,J(J({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.Ec.isNaturalPageViewSent()){var n=this.Ec.getTrackingContext();null!==n&&(t.trackingContext=n,this.Ic.sendToChildren(Qt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Ec.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Zt.AfterPageView};this.Ic.sendToChildren(Qt.IntegrationCallback,
n)}},t}();var Ke,Ze,Xe=function(){function t(t){this.Ec=t}return t.prototype.handleCommand=function(t,n){Ct(t)&&Mt(n)&&this.Rc(t,n)},t.prototype.Rc=function(t,n){var i=this;setTimeout(function(){var r=i.Ec.getTrackingContext();if(r){var e=function(t,n){var i,r=t.isRecording,e=t.pageNumber,s=t.projectId,u=t.uxaDomain,o=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&o){var h=o[1],c=o[2];i="".concat(u,"/quick-playback/index.html?pid\x3d").concat(s,"\x26uu\x3d").concat(h,"\x26sn\x3d").concat(c,"\x26pvid\x3d").concat(e,
"\x26recordingType\x3dcs"),n.withTimestamp&&(i+="\x26t\x3d".concat(At()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}(r,t);n(e)}})},t}(),Qe=function(){function t(){this.Ac=new Set}return t.prototype.handleCommand=function(t,n){var i=this;return Mt(t)?this.Ac.has(t)?null:(this.Ac.add(t),n&&(this.ao=n,this.kc(t,n)),function(){return i.Ac.delete(t)}):null},t.prototype.executeCallbacks=function(t){var n=this;this.Cc(t)&&(this.ao=t,this.Ac.forEach(function(i){return n.kc(i,t)}))},t.prototype.kc=
function(t,n){setTimeout(function(){try{t(n)}catch(t){}})},t.prototype.Cc=function(t){var n=t.isRecording,i=t.recordingStartTimestamp,r=t.etrState;return this.ao&&(this.ao.isRecording!==n||this.ao.recordingStartTimestamp!==i||this.ao.etrState!==r)},t}(),ts=["afterPageView"],ns=["getSessionKey"],is=["onRecordingStateChange"],rs=["replay:link:generate"],es=function(){function t(t,n,i,r,e,s,u,o){this.Y=t,this.J=n,this.Yh=i,this._c=r,this.Ic=e,this.L=s,this.fc=u,this.Vh=o}return t.prototype.init=function(){var t=
this;this.Ec=new We(this.Y,this.J,this.L,this.fc),this.Pc=new Ye(this.Ec),this.Mc=new Je(this.Ec),this.Lc=new Qe,this.xc=new Xe(this.Ec),this.Dc=new $e(this.Ic,this.Ec),this._c.addListener(this.Dc),this.Yh.register(ns,function(n){return t.Mc.handleCommand(n)}),this.Yh.register(ts,function(n){return t.Pc.handleCommand(n)}),this.Yh.register(is,function(n){t.Lc.handleCommand(n,t.Vh.getRecordingStatus())}),this.Yh.register(rs,function(n,i){t.Me&&t.xc.handleCommand(J(J({},n),{recordingStartTimestamp:t.Vh.getRecordingStatus().recordingStartTimestamp}),
i)})},t.prototype.onAfterNaturalPageView=function(){this.Ec.setNaturalPageViewSent(!0),this.Mc.flushPendingCallbacks(),this.Pc.executeRegisteredCallbacks(),this.Dc.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Pc.executeRegisteredCallbacks(),this.Dc.sendAfterPageViewCallbackToChildren()},t.prototype.onRecordingStateChange=function(){this.Lc.executeCallbacks(this.Vh.getRecordingStatus())},t.prototype.onRecordingStatusChange=function(){this.Lc.executeCallbacks(this.Vh.getRecordingStatus())},
t.prototype.setRecordingService=function(t){this.Me=t},$([Rr()],t.prototype,"onRecordingStateChange",null),$([Rr()],t.prototype,"onRecordingStatusChange",null),t}(),ss=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=kt(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return kt(t)&&(kt(n)||It(n))},t}(),us=function(t){function n(n,i){var r=t.call(this)||this;return r.Uc=n,r.D=i,r.jc=[],r}return Y(n,t),n.prototype.onStart=function(){var t=
this;csArray.prototype.forEach.call(this.jc,function(n){return t.trackDynamicVariable(n.key,n.value)}),this.jc=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?ss.isValid(t,n)&&this.Uc.add(new ss(this.D.anonymizePII(t),this.D.anonymizePII(n))):csArray.prototype.push.call(this.jc,{key:t,value:n})},n}(wi),os=function(){function t(t){this.Wh=t,this.Uc=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Uc,t),this.setBatchReadyCall()},
t.prototype.clear=function(){this.Uc=[]},t.prototype.onBatchReady=function(t){this.Hc=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.Uc;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.Wh.compressSync(csJSON.stringify(t),"base64"),ct:this.Wh.algorithm}},t.prototype.setBatchReadyCall=function(){this.Hc()},$([Rr(),vn("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),hs=["trackDynamicVariable"],cs=function(){function t(t,n,i,r,e,s){this.Yh=t,
this.J=n,this.L=i,this.qo=r,this.Wh=e,this.D=s,this._=new ft(this.L.getTrackerUri(),"dvar"),this.Uc=new os(this.Wh),this.zc=new us(this.Uc,this.D)}return t.prototype.init=function(){var t=this;this._.setRequestParametersProviders(this.qo,this.Uc),this.J.setDynamicVariablesService(this.zc),this.Uc.onBatchReady(function(){return t._.send()}),this._.after(function(){return t.Uc.clear()}),this.Yh.register(hs,function(n){var i=void 0===n?{}:n,r=i.key,e=i.value;t.zc.trackDynamicVariable(r,e)})},t.prototype.onStartTracking=
function(){this.zc.start()},t}(),as=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),kt(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return Pt(t)&&Ot(t.revenue)&&kt(t.currency)&&t.currency.length<=
10&&(!Pt(t.id)||kt(t.id))},t}(),fs=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.Bc(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return _t(n.sku)&&(i.sku=n.sku),_t(n.category)&&(i.category=n.category),_t(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.Bc=function(t){return Pt(t)&&kt(t.id)&&kt(t.name)&&Ot(parseFloat(t.price))&&It(parseInt(t.quantity,10))&&(!_t(t.sku)||
kt(t.sku))&&(!_t(t.category)||kt(t.category))&&(!_t(t.merchant)||kt(t.merchant))},t}(),vs=function(){function t(t,n,i){this.D=t,this.qc=n,this.$i=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.D.anonymizeFields(t,["id"]);this.Fc=as.from(n)},t.prototype.getTransaction=function(){return this.Fc},t.prototype.sendTransaction=function(){null!==this.qc&&null!==this.$i&&this.$i.isSessionValid()&&(this.Fc.hasValidRevenue()?this.qc.send():un.warn("Transaction Service: unable to send transaction with invalid parameters"))},
t.prototype.addItem=function(t){if(!Mt(t)){var n=this.D.anonymizeFields(t,["id","name","sku","category"]),i=fs.from(n);null!==i&&csArray.prototype.push.call(this.Gc,i)}},t.prototype.getItems=function(){return this.Gc},t.prototype.clear=function(){this.Fc=as.from({revenue:NaN}),this.Gc=[]},t.prototype.getRequestParameters=function(){var t={id:this.Fc.id?"".concat(this.Fc.id):"",revenue:"".concat(this.Fc.revenue)};return _t(this.Fc.tax)&&(t.tax="".concat(this.Fc.tax)),_t(this.Fc.shipping)&&(t.shipping=
"".concat(this.Fc.shipping)),_t(this.Fc.currency)&&(t.cu="".concat(this.Fc.currency)),t.items=window.csJSON.stringify(this.Gc),t},t}(),ls=function(){function t(t,n){this.Vc=t,this.$i=n,this.Wc=null}return t.prototype.addToCart=function(t){var n={};kt(t.sku)&&(n.sku=csString.prototype.slice.call(t.sku,0,100)),kt(t.merchant)&&(n.merchant=csString.prototype.slice.call(t.merchant,0,100)),(n.sku||n.merchant)&&(this.Wc=n,this.sendCartItem())},t.prototype.getCartItem=function(){return this.Wc},t.prototype.sendCartItem=
function(){this.$i.isSessionValid()&&this.Vc.send()},t.prototype.clear=function(){this.Wc=null},t.prototype.getRequestParameters=function(){if(!this.Wc)return{};var t={};return kt(this.Wc.sku)&&this.Wc.sku.length>0&&(t.sku=this.Wc.sku),kt(this.Wc.merchant)&&this.Wc.merchant.length>0&&(t.me=this.Wc.merchant),t},t}(),ds=["ecommerce:addToCart","ec:cart:add"],ws=["ecommerce:addTransaction","ec:transaction:create"],ys=["ecommerce:addItem","ec:transaction:items:add"],ps=["ecommerce:send","ec:transaction:send"],
ms=function(){function t(t,n,i,r,e,s,u){this.L=t,this.Ho=n,this.Y=i,this.Yh=r,this.D=e,this.$i=s,this.X=u}return t.prototype.init=function(){var t=new ft(this.L.getTrackerUri(),"transaction"),n=new ft(this.L.getTrackerUri(),"addtocart"),i=new vs(this.D,t,this.$i),r=new ls(n,this.$i),e=new Ar(this.Ho,this.Y,this.X,i);t.setRequestParametersProviders(e),t.after(function(){i.clear()});var s=new Ar(this.Ho,this.Y,this.X,r);n.setRequestParametersProviders(s),n.after(function(){r.clear()}),this.Yh.register(ws,
function(t){i.addTransaction(t)}),this.Yh.register(ys,function(t){return i.addItem(t)}),this.Yh.register(ps,function(){return i.sendTransaction()}),this.Yh.register(ds,function(t){r.addToCart(t)})},t}(),gs=function(){function t(t){this.rs=t.performance}return t.prototype.getRequestParameters=function(){if(this.Yc())return{};var t=this.Jc();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.Jc=function(){var t=this.rs.timing;return{startRender:"".concat(t.domLoading-
t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.Yc=function(){return!(this.rs&&this.rs.timing&&this.rs.timing.loadEventEnd>0)},t}();function Ss(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",
t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.DEAD_CLICK=30]="DEAD_CLICK",t[t.DEAD_ZOOM=31]="DEAD_ZOOM",
t[t.PAGE_RELOAD=32]="PAGE_RELOAD",t[t.THRASHED_CURSOR=33]="THRASHED_CURSOR",t[t.BLANK_PAGE=34]="BLANK_PAGE"}(Ke||(Ke={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(Ze||(Ze={}));var Es,As,bs,Rs,Ns,Ts,Os=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,function(n,i){return i.enhanceAnalysisEvent(t,n)},n)},t}(),Is=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,
t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),ks=function(t){function n(n){var i=t.call(this)||this;return i.$c=n,i.supportedEventTypes=[Ke.MOUSEDOWN,Ke.MOUSEUP,Ke.CLICK,Ke.MOUSEOVER,Ke.TAP,Ke.DRAG,Ke.FLICK],i}return Y(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.$c.getEventTargetPath(t)),n},n}(Is),Cs=function(){function t(t,n,i,r){this.L=t,this.$c=n,this.Ms=i,this.Kc=r,this.Zc=
[],csArray.prototype.push.call(this.Zc,new ks(this.$c))}return t.prototype.processGesture=function(t,n){switch(t.type){case Gr.TAP:this.Xc(n);break;case Gr.FLICK:this.Qc(t,n);break;case Gr.DRAG:this.ta(t,n)}},t.prototype.Xc=function(t){var n={type:Ke.TAP,ts:0,x:0,y:0,tgt:""},i=Os.build(t,n,this.Zc);i.tgt!==q.INVALID_ELEMENT&&this.Hn(i)},t.prototype.ta=function(t,n){var i,r,e={type:Ke.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this.Kc)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),
(null===(r=this.Kc)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=Os.build(n,e,this.Zc);s.tgt!==q.INVALID_ELEMENT&&this.Hn(s)},t.prototype.Qc=function(t,n){var i,r,e={type:Ke.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this.Kc)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.Kc)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=Os.build(n,e,this.Zc);s.tgt!==q.INVALID_ELEMENT&&this.Hn(s)},t.prototype.onEvent=
function(t){this.Hn=t},t.prototype.start=function(){var n=this;this.Ms.subscribe(t.Ls,function(t,i){return n.processGesture(t,i)})},t.prototype.stop=function(){this.Ms.unsubscribe(t.Ls)},t.Ls="AnalysisGestureTracker",$([Jn()],t.prototype,"processGesture",null),t}(),_s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[Ke.CHANGE],n.na=["text","email","number","search","tel","url","password"],n}return Y(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,
n){var i=Yn(t);return m(i)&&csArray.prototype.indexOf.call(this.na,i.type)>=0&&(n.isBlank=""===i.value),n},n}(Is),Ps=function(){function t(t,n,i){var r=this;this.k=t,this.$c=n,this.ia=i,this.ra="select, select *, input, textarea",this.ea="select, select *, input, textarea",this.sa="a, a *, button, button *, select, select *, input, textarea",this.ua="input, select, textarea",this.oa=150,this.ha=400,this.ca=!1,this.aa=br(function(t,n){return r.scrollListener(t,n)},this.oa),this.fa=br(function(t){return r.resizeListener(t)},
this.oa),this.va=Dn(function(t){return r.mouseMoveListener(t)},this.ha),this.da=[{boundElement:window,type:"resize",listener:function(){return r.fa()}},{boundElement:document,type:"scroll",listener:function(t){return r.aa(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.va(function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t}(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},
{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.wa=[{type:"change",listener:this.ia.on(this.ea,function(t){return r.changeListener(t)})}],this.ya=X([{boundElement:document,type:"mouseover",listener:this.ia.on(this.sa,function(t){return r.mouseOverListener(t)})},{boundElement:document,type:"mouseout",listener:this.ia.on(this.sa,function(t){return r.mouseOutListener(t)})},
{boundElement:document,type:"focusin",listener:this.ia.on(this.ra,function(t){return r.focusInListener(t)})},{boundElement:document,type:"focusout",listener:this.ia.on(this.ra,function(t){return r.focusOutListener(t)})},{boundElement:document,type:"keyup",listener:this.ia.on(this.ua,function(t){return r.keyUpListener(t)})},{boundElement:document,type:"keydown",listener:this.ia.on(this.ua,function(t){return r.keyDownListener(t)})},{boundElement:document,type:"copy",listener:this.ia.on(this.ua,function(t){return r.copyListener(t)})},
{boundElement:document,type:"cut",listener:this.ia.on(this.ua,function(t){return r.cutListener(t)})},{boundElement:document,type:"paste",listener:this.ia.on(this.ua,function(t){return r.pasteListener(t)})}],csArray.prototype.map.call(this.wa,function(t){return J(J({},t),{boundElement:document})}),!0),this.Zc=[],this.Cn={},this.an=new Set,this.pa=function(t,n){switch(n){case "initial":r.an.add(t);break;case "added":r.an.has(t)||(r.an.add(t),r.En(t));break;case "removed":r.On(t),r.an.delete(t)}},Li.isSupported()&&
(this.ma=new Fi(this.pa)),this.gn(),this.k.mouseMoveHeatmapEnabled,csArray.prototype.push.call(this.Zc,new _s,new ks(this.$c))}return t.prototype.En=function(t){if(R(t)){var n=this.ga();csArray.prototype.forEach.call(n,function(t){return In(t)})}else{n=this.Sa();csArray.prototype.forEach.call(n,function(n){In(J(J({},n),{boundElement:t}))})}},t.prototype.On=function(t){if(R(t)){var n=this.ga();csArray.prototype.forEach.call(n,function(t){return kn(t)})}else{n=this.Sa();csArray.prototype.forEach.call(n,
function(n){kn(J(J({},n),{boundElement:t}))})}},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){var t,n=this;null===(t=this.ma)||void 0===t||t.observe(document),this.En(document),this.an.forEach(function(t){return n.En(t)}),this.resizeListener()},t.prototype.stop=function(){var t,n=this;this.On(document),this.an.forEach(function(t){return n.On(t)}),null===(t=this.ma)||void 0===t||t.disconnect(),this.an.clear()},t.prototype.flushPendingDebouncedListeners=function(){this.aa.flushPending(),
this.fa.flushPending()},t.prototype.Sa=function(){return this.ia.isMatchesSelectorSupported()?this.wa:(un.warn("Element.matches is not implemented yet"),[])},t.prototype.ga=function(){return this.ia.isMatchesSelectorSupported()?X(X([],this.da,!0),this.ya,!0):(un.warn("Element.matches is not implemented yet"),this.da)},t.prototype.resizeListener=function(t){var n=$n.getScrollContainer(),i=Lt(n);i&&(this.ca=!0);var r={type:Ke.RESIZE,ts:0,x:i?n.clientWidth:xi.windowWidth(),y:i?n.clientHeight:xi.windowHeight()};
void 0!==t&&(r.d=t),this.Hn(r)},t.prototype.scrollListener=function(t,n){var i=$n.isEventOnScrollContainer(n);!this.ca&&i&&this.resizeListener();var r={type:Ke.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:xi.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:xi.windowOffsetY(),d:t},e=Os.build(n,r,this.Zc);this.Hn(e)},t.prototype.mouseMoveListener=function(t){var n={type:Ke.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Os.build(t,n,this.Zc);this.Hn(i)},t.prototype.mouseDownListener=function(t){var n=
{type:Ke.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.mouseUpListener=function(t){var n={type:Ke.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.clickListener=function(t){var n={type:Ke.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.mouseOverListener=function(t){var n={type:Ke.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.mouseOutListener=
function(t){var n={type:Ke.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.$c.getEventTargetPath(t)},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.focusInListener=function(t){var n={type:Ke.FOCUSIN,ts:0,tgt:this.$c.getEventTargetPath(t)},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.focusOutListener=function(t){var n={type:Ke.FOCUSOUT,ts:0,tgt:this.$c.getEventTargetPath(t)},i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.changeListener=function(t){var n={type:Ke.CHANGE,ts:0,tgt:this.$c.getEventTargetPath(t)},
i=Os.build(t,n,this.Zc);this.Ea(i)},t.prototype.copyListener=function(t){var n={type:Ke.COMMAND,ts:0,tgt:this.$c.getEventTargetPath(t),key:jn.COPY};this.Ea(n)},t.prototype.cutListener=function(t){var n={type:Ke.COMMAND,ts:0,tgt:this.$c.getEventTargetPath(t),key:jn.CUT};this.Ea(n)},t.prototype.pasteListener=function(t){var n={type:Ke.COMMAND,ts:0,tgt:this.$c.getEventTargetPath(t),key:jn.PASTE};this.Ea(n)},t.prototype.keyUpListener=function(t){var n={type:Ke.KEYUP,ts:0,tgt:this.$c.getEventTargetPath(t),
key:this.Aa(t)};this.Ea(n)},t.prototype.keyDownListener=function(t){var n={type:Ke.KEYDOWN,ts:0,tgt:this.$c.getEventTargetPath(t),key:this.Aa(t)};this.Ea(n)},t.prototype.Aa=function(t){var n=this.Cn[t.key];return void 0===n?Un.ALPHANUMERICAL:n},t.prototype.Ea=function(t){Ss(t)&&t.tgt!==q.INVALID_ELEMENT&&this.Hn(t)},t.prototype.gn=function(){this.Cn[" "]=Un.SPACE,this.Cn.Spacebar=Un.SPACE,this.Cn.Enter=Un.ENTER,this.Cn.Backspace=Un.BACKSPACE,this.Cn.Delete=Un.DELETE,this.Cn.ArrowUp=Un.ARROWUP,this.Cn.ArrowDown=
Un.ARROWDOWN,this.Cn.ArrowLeft=Un.ARROWLEFT,this.Cn.ArrowRight=Un.ARROWRIGHT,this.Cn.Up=Un.ARROWUP,this.Cn.Down=Un.ARROWDOWN,this.Cn.Left=Un.ARROWLEFT,this.Cn.Right=Un.ARROWRIGHT,this.Cn.CapsLock=Un.CAPSLOCK,this.Cn.Shift=Un.SHIFT,this.Cn.Tab=Un.TAB},$([vn("Event handler type: resize")],t.prototype,"resizeListener",null),$([vn("Event handler type: scroll")],t.prototype,"scrollListener",null),$([vn("Event handler type: mouseMove"),Jn()],t.prototype,"mouseMoveListener",null),$([vn("Event handler type: mouseDown"),
Jn()],t.prototype,"mouseDownListener",null),$([vn("Event handler type: mouseUp"),Jn()],t.prototype,"mouseUpListener",null),$([vn("Event handler type: click"),Jn()],t.prototype,"clickListener",null),$([vn("Event handler type: mouseOver"),Jn()],t.prototype,"mouseOverListener",null),$([vn("Event handler type: mouseOut"),Jn()],t.prototype,"mouseOutListener",null),$([vn("Event handler type: focusIn")],t.prototype,"focusInListener",null),$([vn("Event handler type: focusOut")],t.prototype,"focusOutListener",
null),$([vn("Event handler type: change")],t.prototype,"changeListener",null),$([vn("Event handler type: copy")],t.prototype,"copyListener",null),$([vn("Event handler type: cut")],t.prototype,"cutListener",null),$([vn("Event handler type: paste")],t.prototype,"pasteListener",null),$([vn("Event handler type: keyup")],t.prototype,"keyUpListener",null),$([vn("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Ms=function(){function t(){var t=this;this.ba=100,this.Ra=0,this.Na=xi.documentHeight(),
this.Ta={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){In(this.Ta),this.reset()},t.prototype.stop=function(){kn(this.Ta)},t.prototype.reset=function(){this.Na=xi.documentHeight();var t=$n.getScrollContainer();if(null===t)this.Ra=this.Oa(xi.documentHeight());else{var n=this.Ia(t);this.Ra=this.ka(t,n)}this.Hn()},t.prototype.maxScrollRateListener=function(t){var n,i;if($n.isEventOnScrollContainer(t)){var r=
csEventtarget.apply(t),e=this.Ia(r);n=this.Ca(r,e),i=this.ka(r,e)}else n=xi.documentHeight(),i=this.Oa(n);(i>this.Ra||n>this.Na)&&(this.Ra=i,n>this.Na&&(this.Na=n),this.Hn())},t.prototype.Oa=function(t){var n=Math.round(this._a()/t*100);return Math.min(n,this.ba)},t.prototype._a=function(){var t=xi.windowHeight();return xi.windowOffsetY()+t},t.prototype.ka=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.Ca(t,n),e=Math.round(i/r*100);return Math.min(e,this.ba)},
t.prototype.Ia=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.Ca=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.Ra),mdh:"".concat(this.Na)}},$([vn("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Ls=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,S){this.L=t,this.Pa=n,this.Ms=i,this.Ma=r,this.La=e,this.xa=s,this.Da=u,this.Ua=
o,this.$i=h,this.Yt=c,this.ja=a,this.Ha=f,this.Er=v,this.nr=l,this.za=d,this.Ba=w,this.qa=y,this.Fa=p,this.Ga=m,this.Va=g,this.Wa=S,this.ar=new di,this.Ya=!1}return t.prototype.init=function(){var t,n,i,r,e,s,u,o=this;this.Pa.onEvent(function(t){return o.mr(t)}),this.Ms.onEvent(function(t){return o.mr(t)}),this.Ma.onEvent(function(){var t=o.Ma.getRequestParameters();o.nr.setQueryParams(t),o.Da.setQueryParams(t)}),this.Ha.onEvent(function(t){return o.Ja(t)}),this.$a(),null===(t=this.za)||void 0===
t||t.onEvent(function(t){return o.mr(t)}),null===(n=this.Ga)||void 0===n||n.onEvent(function(t){return o.mr(t)}),null===(i=this.Ba)||void 0===i||i.onEvent(function(t){return o.mr(t)}),null===(r=this.qa)||void 0===r||r.onEvent(function(t){return o.mr(t)}),this.Ka(),null===(e=this.Fa)||void 0===e||e.onEvent(function(t){return o.Ja(t)}),null===(s=this.Va)||void 0===s||s.onEvent(function(t){return o.Ja(t)}),null===(u=this.Wa)||void 0===u||u.onEvent(function(t){return o.Ja(t)})},t.prototype.Ka=function(){var t=
this;this.Da.onBeaconSuccess(function(){t.xa.clearEvents()}),this.Da.onBeaconFailure(function(n){t.Za(n)})},t.prototype.initStates=function(){var t=this.Ua.getRequestParameters(),n=this.La.getRequestParameters(),i=this.Ma.getRequestParameters();this.nr.setQueryParams(t),this.nr.setQueryParams(n),this.nr.setQueryParams(i),this.Da.setQueryParams(t),this.Da.setQueryParams(n),this.Da.setQueryParams(i),this.Xa()},t.prototype.start=function(t){var n,i,r,e,s,u,o;t||null===(n=this.Fa)||void 0===n||n.start(),
this.Er.start(),this.Pa.start(),this.Ma.start(),this.Ms.start(),null===(i=this.za)||void 0===i||i.start(),null===(r=this.qa)||void 0===r||r.start(),t||this.Ha.start(),null===(e=this.Ba)||void 0===e||e.start(),null===(s=this.Ga)||void 0===s||s.start(),null===(u=this.Va)||void 0===u||u.start(),null===(o=this.Wa)||void 0===o||o.start()},t.prototype.collectInitialEvents=function(){var t;null===(t=this.za)||void 0===t||t.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Ur(t)},
t.prototype.Ja=function(t){this.$i.isCurrentPageviewValid()&&this.Ur(t)},t.prototype.mr=function(t){this.$i.isSessionValid()&&this.Ur(t)},t.prototype.Ur=function(t){this.xa.addEvent(this.Qa(t)),this.xa.isFull()&&this.sendEvents(),this.L.emitDebugEvents&&this.ar.emit("analysisEvent",J(J({},t),{typeName:Ke[t.type]}))},t.prototype.Qa=function(t){return t.ts=this.tf(),t},t.prototype.nf=function(){this.Da.setQueryParams({hlm:"true"}),this.Ya=!0},t.prototype.sendLastMessageBeacon=function(){this.Da.setQueryParams(this.La.getRequestParameters()),
this.Da.send(this.xa.stringifyEvents()),this.Da.removeQueryParams(["hlm"]),this.Ya=!1},t.prototype.sendEvents=function(){this.xa.isEmpty()||(this.nr.setQueryParams(this.Ua.getRequestParameters()),this.nr.setQueryParams(this.La.getRequestParameters()),this.nr.send(this.xa.getEvents()),this.xa.clearEvents())},t.prototype.stop=function(){var t,n,i,r,e,s,u;this.Er.stop(),this.Pa.stop(),this.Ma.stop(),this.Ms.stop(),this.Ha.stop(),null===(t=this.za)||void 0===t||t.stop(),null===(n=this.Ba)||void 0===n||
n.stop(),null===(i=this.qa)||void 0===i||i.stop(),null===(r=this.Ga)||void 0===r||r.stop(),this.xa.empty(),null===(e=this.Fa)||void 0===e||e.stop(),null===(s=this.Va)||void 0===s||s.stop(),null===(u=this.Wa)||void 0===u||u.stop()},t.prototype.clearStates=function(t){var n,i;this.Pa.flushPendingDebouncedListeners(),null===(n=this.Ba)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.qa)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.nf(),this.sendLastMessageBeacon()):this.sendEvents(),
this.Ma.reset(),this.Ha.stop(),this.nr.removeQueryParams()},t.prototype.Xa=function(){this.if=At()},t.prototype.tf=function(){return At()-this.if},t.prototype.$a=function(){var t=this;this.Er.onEvent(function(n){var i,r;null===(i=t.Ba)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.qa)||void 0===r||r.flushPendingTextHighlightEvent(),n===Si.PagehideVisible?t.nf():n===Si.PagehideHidden?(t.nf(),t.sendLastMessageBeacon()):t.xa.isEmpty()&&!t.Ya||t.sendLastMessageBeacon()})},t.prototype.Za=
function(t){try{this.xa.isEmpty()&&!this.Ya||this.Yt.save({requestParameters:t,events:this.xa.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===Ze.SUCCESS||t===Ze.FAILURE||t===Ze.ATTEMPT}(t))if(Lt(n)){var i={status:t,type:Ke.SUBMIT,ts:0,tgt:this.ja.getElementPath(n)};i.tgt!==q.INVALID_ELEMENT&&this.Ja(i)}else un.warn("AnalysisEvents Service: invalid element: ".concat(n));else un.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),xs=
function(){function t(t,n){var i=this;this.Yt=t,this.nr=n,this.rf=function(){"visible"===document.visibilityState&&i.ef()}}return t.prototype.start=function(){this.ef(),this.mi()},t.prototype.stop=function(){this.Ei()},t.prototype.getRecoveryStorage=function(){return this.Yt},t.prototype.ef=function(){var t=this.Yt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.nr.send(r,i)}},t.prototype.mi=function(){document.addEventListener("visibilitychange",this.rf)},t.prototype.Ei=function(){document.removeEventListener("visibilitychange",
this.rf)},t}(),Ds=function(){function t(t){this.eo=t}return t.prototype.save=function(t){localStorage.setItem(this.eo,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.eo)},t.prototype.recover=function(){var t=localStorage.getItem(this.eo);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){un.error("Invalid item in localStorage.\n         (key:".concat(this.eo,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Us=function(){function t(t){var n=
this;this.sf=t,this.uf=function(t){return n.processMetric(t)},this.wi=!1}return t.prototype.onEvent=function(t){this.Hn=t},t.prototype.start=function(){this.wi||(this.wi=!0,this.sf.onFCP(this.uf),this.sf.onCLS(this.uf),this.sf.onFID(this.uf),this.sf.onLCP(this.uf),this.sf.onTTFB(this.uf),this.sf.onINP(this.uf))},t.prototype.stop=function(){this.wi=!1},t.prototype.processMetric=function(t){if(this.wi){var n={type:Ke.PERFORMANCE,name:t.name,val:t.value,ts:0};this.Hn(n)}},$([vn("Performance metric handler")],
t.prototype,"processMetric",null),t}(),js=-1,Hs=function(t){addEventListener("pageshow",function(n){n.persisted&&(js=n.timeStamp,t(n))},!0)},zs=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Bs=function(){var t=zs();return t&&t.activationStart||0},qs=function(t,n){var i=zs(),r="navigate";return js>=0?r="back-forward-cache":i&&(document.prerendering||Bs()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,
"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1E12),navigationType:r}},Fs=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver(function(t){Promise.resolve().then(function(){n(t.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},Gs=function(t,n,i,r){var e,s;return function(u){n.value>=0&&(u||r)&&((s=n.value-
(e||0))||void 0===e)&&(e=n.value,n.delta=s,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},Vs=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Ws=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ys=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},Js=-1,$s=function(){return"hidden"!==
document.visibilityState||document.prerendering?1/0:0},Ks=function(t){"hidden"===document.visibilityState&&Js>-1&&(Js="visibilitychange"===t.type?t.timeStamp:0,Xs())},Zs=function(){addEventListener("visibilitychange",Ks,!0),addEventListener("prerenderingchange",Ks,!0)},Xs=function(){removeEventListener("visibilitychange",Ks,!0),removeEventListener("prerenderingchange",Ks,!0)},Qs=function(){return Js<0&&(Js=$s(),Zs(),Hs(function(){setTimeout(function(){Js=$s(),Zs()},0)})),{get firstHiddenTime(){return Js}}},
tu=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},nu=[1800,3E3],iu=function(t,n){n=n||{},tu(function(){var i,r=Qs(),e=qs("FCP"),s=Fs("paint",function(t){t.forEach(function(t){"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<r.firstHiddenTime&&(e.value=Math.max(t.startTime-Bs(),0),e.entries.push(t),i(!0)))})});s&&(i=Gs(t,e,nu,n.reportAllChanges),Hs(function(r){e=qs("FCP"),i=Gs(t,e,nu,n.reportAllChanges),Vs(function(){e.value=performance.now()-
r.timeStamp,i(!0)})}))})},ru=[.1,.25],eu={passive:!0,capture:!0},su=new Date,uu=function(t,n){Es||(Es=n,As=t,bs=new Date,cu(removeEventListener),ou())},ou=function(){if(As>=0&&As<bs-su){var t={entryType:"first-input",name:Es.type,target:Es.target,cancelable:Es.cancelable,startTime:Es.timeStamp,processingStart:Es.timeStamp+As};Rs.forEach(function(n){n(t)}),Rs=[]}},hu=function(t){if(t.cancelable){var n=(t.timeStamp>1E12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=
function(){uu(t,n),e()},r=function(){e()},e=function(){removeEventListener("pointerup",i,eu),removeEventListener("pointercancel",r,eu)};addEventListener("pointerup",i,eu),addEventListener("pointercancel",r,eu)}(n,t):uu(n,t)}},cu=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return t(n,hu,eu)})},au=[100,300],fu=0,vu=1/0,lu=0,du=function(t){t.forEach(function(t){t.interactionId&&(vu=Math.min(vu,t.interactionId),lu=Math.max(lu,t.interactionId),fu=lu?(lu-vu)/7+1:0)})},
wu=function(){return Ns?fu:performance.interactionCount||0},yu=function(){"interactionCount"in performance||Ns||(Ns=Fs("event",du,{type:"event",buffered:!0,durationThreshold:0}))},pu=[200,500],mu=0,gu=function(){return wu()-mu},Su=[],Eu={},Au=function(t){var n=Su[Su.length-1],i=Eu[t.interactionId];if(i||Su.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};Eu[r.id]=r,Su.push(r)}Su.sort(function(t,
n){return n.latency-t.latency}),Su.splice(10).forEach(function(t){delete Eu[t.id]})}},bu=[2500,4E3],Ru={},Nu=[800,1800],Tu=function t(n){document.prerendering?tu(function(){return t(n)}):"complete"!==document.readyState?addEventListener("load",function(){return t(n)},!0):setTimeout(n,0)},Ou=function(t,n){n=n||{};var i=qs("TTFB"),r=Gs(t,i,Nu,n.reportAllChanges);Tu(function(){var e=zs();if(e){var s=e.responseStart;if(s<=0||s>performance.now())return;i.value=Math.max(s-Bs(),0),i.entries=[e],r(!0),Hs(function(){i=
qs("TTFB",0),(r=Gs(t,i,Nu,n.reportAllChanges))(!0)})}})},Iu=function(){function t(){}return t.prototype.onFCP=function(t){iu(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},iu(Ys(function(){var i,r=qs("CLS",0),e=0,s=[],u=function(t){t.forEach(function(t){if(!t.hadRecentInput){var n=s[0],i=s[s.length-1];e&&t.startTime-i.startTime<1E3&&t.startTime-n.startTime<5E3?(e+=t.value,s.push(t)):(e=t.value,s=[t])}}),e>r.value&&(r.value=e,r.entries=s,i())},o=Fs("layout-shift",u);
o&&(i=Gs(t,r,ru,n.reportAllChanges),Ws(function(){u(o.takeRecords()),i(!0)}),Hs(function(){e=0,r=qs("CLS",0),i=Gs(t,r,ru,n.reportAllChanges),Vs(function(){return i()})}),setTimeout(i,0))}))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},tu(function(){var i,r=Qs(),e=qs("FID"),s=function(t){t.startTime<r.firstHiddenTime&&(e.value=t.processingStart-t.startTime,e.entries.push(t),i(!0))},u=function(t){t.forEach(s)},o=Fs("first-input",u);i=Gs(t,e,au,n.reportAllChanges),
o&&Ws(Ys(function(){u(o.takeRecords()),o.disconnect()})),o&&Hs(function(){var r;e=qs("FID"),i=Gs(t,e,au,n.reportAllChanges),Rs=[],As=-1,Es=null,cu(addEventListener),r=s,Rs.push(r),ou()})})}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},tu(function(){var i,r=Qs(),e=qs("LCP"),s=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(e.value=Math.max(n.startTime-Bs(),0),e.entries=[n],i())},u=Fs("largest-contentful-paint",s);if(u){i=Gs(t,e,bu,n.reportAllChanges);
var o=Ys(function(){Ru[e.id]||(s(u.takeRecords()),u.disconnect(),Ru[e.id]=!0,i(!0))});["keydown","click"].forEach(function(t){addEventListener(t,function(){return setTimeout(o,0)},!0)}),Ws(o),Hs(function(r){e=qs("LCP"),i=Gs(t,e,bu,n.reportAllChanges),Vs(function(){e.value=performance.now()-r.timeStamp,Ru[e.id]=!0,i(!0)})})}})}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){Ou(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},tu(function(){var i;yu();var r,e=
qs("INP"),s=function(t){t.forEach(function(t){t.interactionId&&Au(t),"first-input"===t.entryType&&!Su.some(function(n){return n.entries.some(function(n){return t.duration===n.duration&&t.startTime===n.startTime})})&&Au(t)});var n,i=(n=Math.min(Su.length-1,Math.floor(gu()/50)),Su[n]);i&&i.latency!==e.value&&(e.value=i.latency,e.entries=i.entries,r())},u=Fs("event",s,{durationThreshold:null!==(i=n.durationThreshold)&&void 0!==i?i:40});r=Gs(t,e,pu,n.reportAllChanges),u&&("PerformanceEventTiming"in window&&
"interactionId"in PerformanceEventTiming.prototype&&u.observe({type:"first-input",buffered:!0}),Ws(function(){s(u.takeRecords()),e.value<0&&gu()>0&&(e.value=0,e.entries=[]),r(!0)}),Hs(function(){Su=[],mu=wu(),e=qs("INP"),r=Gs(t,e,pu,n.reportAllChanges)}))})}(t,{reportAllChanges:!0})},t}(),ku=function(){function t(t){void 0===t&&(t=[]),this.Yn=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.Yn)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.Yn,t)},t.prototype.eventsCount=
function(){return this.Yn.length},t.prototype.clearEvents=function(){this.Yn=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.Yn.length},t.prototype.getEvents=function(){return this.Yn},t}(),Cu="v2/events",_u=["submit"],Pu=function(){function t(t,n,i,r,e,s,u,o,h,c){this.L=t,this.Ho=n,this.Y=i,this.ja=r,this.ia=e,this.Yh=s,this.$i=u,this.Ms=o,this._c=h,this.Zh=c}return t.prototype.init=function(){var t=
this,n=new ku,i=this.Zh.create("".concat(this.L.getTrackerUri(),"/").concat(Cu),!0,"base64");this.hf=this.cf(i),this.af=this.ff(n,this.hf.getRecoveryStorage(),i),this.af.init(),this._c.addListener(this.af),this.Yh.register(_u,function(n,i){t.af.pushSubmitEvent(n,i)})},t.prototype.onStartTracking=function(t){this.hf.start(),this.af.start(t)},t.prototype.onAfterNaturalPageView=function(){this.af.initStates()},t.prototype.onAfterArtificialPageView=function(){this.af.initStates(),this.af.collectInitialEvents()},
t.prototype.onArtificialPageViewEnd=function(){this.af.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.af.clearStates(),this.af.stop(),this.hf.stop()},t.prototype.onOptout=function(){this.af.stop(),this.hf.stop()},t.prototype.ff=function(t,n,i){var r=new gs(window),e=new Ms,s=new Ps(this.L,this.ja,this.ia),u=new Cs(this.L,this.ja,this.Ms),o=new Us(new Iu),h=new Ri;var c=new zr("".concat(this.L.getTrackerUri(),"/").concat(Cu)),a=new Ar(this.Ho,this.Y);return new Ls(this.L,s,u,e,
r,t,c,a,this.$i,n,this.ja,o,h,i,undefined,undefined,undefined,undefined,undefined,undefined,undefined)},t.prototype.cf=function(t){return new xs(new Ds("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Ts||(Ts={}));var Mu=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.Ln=n,s.vf=i,s.X=r,s.fc=e,s}return Y(n,t),n.prototype.init=function(){this.lf()},n.prototype.onStart=function(t){t?this.df():this.wf()},n.prototype.onStop=function(){},
n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.yf(t):this.X.overridePath(t)},n.prototype.wf=function(){this.fc.setPageViewType(Ts.Natural),this.Ln.emitBeforeNaturalPageView(),this.vf.send(),this.Ln.emitAfterNaturalPageView()},n.prototype.df=function(){this.fc.setPageViewType(Ts.Renewal),this.Ln.emitBeforeNaturalPageView(),this.vf.send(),this.Ln.emitAfterNaturalPageView()},n.prototype.yf=function(t){this.fc.setPageViewType(Ts.Artificial),this.Ln.emitArtificialPageViewEnd(),t&&
this.X.overridePath(t),this.Ln.emitBeforeArtificialPageView(),this.vf.send(),this.Ln.emitAfterArtificialPageView()},n.prototype.lf=function(){var t=this;window.addEventListener("pageshow",function(n){t.isStarted&&n.persisted&&t.yf()})},n}(wi),Lu=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function xu(){return{la:Lu}}var Du,Uu,ju=function(){function t(t){this.Xh=t,this.pf=[],this.mf=!1}return t.prototype.getRequestParameters=
function(){return{dr:this.gf()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Xh.getUrlMaskingPattern(t);csArray.prototype.push.call(this.pf,n)},t.prototype.enableRemoveQueryString=function(){this.mf=!0},t.prototype.disableRemoveQueryString=function(){this.mf=!1},t.prototype.gf=function(){var t=this.mf?this.Xh.removeQueryString(this.Sf()):this.Sf();return this.Xh.anonymizeUrl(t,this.pf)},t.prototype.Sf=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=
window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),Hu=function(){function t(t){this.J=t,this.Ef=this.Af()&&"currentScript"in document}return t.prototype.bf=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.Rf(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.Rf=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:
t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.Ef||1!==this.lc())return{};var t=this.bf();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.lc=function(){var t;return(null===(t=this.J.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.Af=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),zu=["trackPageview"],Bu=["setPath"],qu=["setQuery"],Fu=["referrer:maskUrl"],
Gu=["referrer:removeQueryString"],Vu=["referrer:keepQueryString"],Wu=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f){this.L=t,this.Yh=n,this.Ln=i,this.qo=r,this.Y=e,this.J=s,this.zu=u,this.en=o,this.Xh=h,this.X=c,this.Kh=a,this.fc=f}return t.prototype.init=function(){var t=this,i=new ft(this.L.getTrackerUri(),"pageview");this.Nf=new Mu(this.Ln,i,this.X,this.fc);var r=new ju(this.Xh);this.Nf.init();var e=new Ar(this.qo,this.Y,xi,r,this.X,this.zu,n,this.en,this.fc,new Hu(this.J),this.Kh);i.setRequestParametersProviders(e),
this.Yh.register(zu,function(n){return t.Nf.triggerArtificialPageView(n)}),this.Yh.register(Bu,function(n){return t.X.overridePath(n)}),this.Yh.register(qu,function(n){return t.X.overrideQuery(n)}),this.Yh.register(Fu,function(t){return r.addUrlMaskingPattern(t)}),this.Yh.register(Gu,function(){return r.enableRemoveQueryString()}),this.Yh.register(Vu,function(){return r.disableRemoveQueryString()})},t.prototype.start=function(t){this.Nf.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Nf.stop()},
t}(),Yu=function(){function t(t){this.$c=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.$c.hasValidEventTarget(r)&&i.Tf(r,t)&&n(r)}},t.prototype.Tf=function(t,n){var i=Yn(t);return _.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!_},t}(),Ju=function(){function t(){}return t.prototype.onLoad=function(t){this.Kt=t},t.prototype.onLoadCallbackExecute=function(){this.Kt()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Of(t)},
t.prototype.Of=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},$([vn("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),$u=function(){function t(t,n,i){this.L=t,this.Y=n,this.J=i,this.if=At()}return t.prototype.resetStartTime=
function(){this.if=At()},t.prototype.getSessionData=function(){var t=this.L.projectId,n=this.Y.getVisitor();null==n&&un.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,e=i.visitsCount,s=this.J.getSession();return null===s&&un.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:e,pageNumber:(null!=s?s:{}).pageNumber,
relativeTimestamp:At()-this.if}},t}(),Ku=["clearSession"],Zu=["extendSession"],Xu=["getSessionData"],Qu=["session:start:newVisitor"],to=["session:clear:visitor"],no=function(){function t(t,n,i,r){this.L=t,this.Y=n,this.J=i,this.Yh=r}return t.prototype.init=function(){var t=this;this.If=new $u(this.L,this.Y,this.J),this.Yh.register(Ku,function(){return t.J.removeSession()}),this.Yh.register(Zu,function(){return t.J.extendSessionPeriodically()},{disableApplyPending:!0}),this.Yh.register(Xu,function(){return t.If.getSessionData()},
{disableApplyPending:!0}),this.Yh.register(Qu,function(){return t.Y.renewVitor()}),this.Yh.register(to,function(){t.Y.resetVisitor()},{disableApplyImmediate:!0})},t.prototype.onBeforeNaturalPageView=function(){this.Y.createOrUpdateVisitor(),this.J.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.J.abortQuotaServiceRequest(),this.Y.createOrUpdateVisitor(),this.J.createOrUpdateSession()},t.prototype.onAfterNaturalPageView=function(){this.If.resetStartTime()},t.prototype.onAfterArtificialPageView=
function(){this.If.resetStartTime()},t.prototype.onOptout=function(){this.Y.removeVisitor(),this.J.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.J.updateRecordingState(t,n)},t}(),io=function(){function t(t,n){this.J=t,this.Y=n,this.kf=!1}return t.prototype.onSessionExpired=function(t){this.Cf=t},t.prototype.isSessionValid=function(){if(this.kf)return!0;var t=this.J.hasValidSession(),n=!1;return this.J.pollCacheRefreshEvent()&&(n=this.Y.isSessionRenewed()),t&&!n||!this._f()?
t:(this.Pf=At(),this.kf=!0,this.Cf(),this.kf=!1,this.J.hasValidSession())},t.prototype.isCurrentPageviewValid=function(){var t=this.J.hasValidSession();return this.J.pollCacheRefreshEvent(!1)?!this.Y.isSessionRenewed():t},t.prototype.startNewSession=function(){this.Cf()},t.prototype._f=function(){return!_t(this.Pf)||At()-this.Pf>6E4},t}();function ro(t){return t.tagDeploymentMode===Du.DualCollectionReview||t.tagDeploymentMode===Du.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale=
"LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}(Du||(Du={})),function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},
t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(Uu||(Uu={}));var eo="@user-identifier@",so=function(t){function n(n,i,r,e,s){var u=t.call(this)||this;return u.L=n,u.Mf=i,u.Wh=r,u.Lf=e,u.xf=s,u.Df=[],u.Tr=[],u}return Y(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Df,function(n){return t.trackPageEvent(n)}),this.Df=[],csArray.prototype.forEach.call(this.Tr,
function(n){return t.trackEventTriggerRecording(n)}),this.Tr=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Uf(t)&&(this.jf(t)?this.xf.isSupported()&&this.Hf(t):this.zf(t)):csArray.prototype.push.call(this.Df,t)},n.prototype.jf=function(t){return nt(t,eo)},n.prototype.Hf=function(t){return K(this,void 0,void 0,function(){var n,i;return Z(this,function(r){switch(r.label){case 0:return this.L.customHashIdEnabled?(n=csString.prototype.slice.call(t,17),this.xf.isValidInput(n)?
[4,this.xf.digest(n,this.L.projectId)]:(un.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.Bf={eventName:i,isETR:!1,isCustomHashId:!0},this.qf()):un.warn("Page event: unable to compute customHashId"),this.L.encryptionEnabled?(this.Lf.emitUserIdentifierEvent(n),[2]):[2]}})})},n.prototype.zf=function(t){this.Lf.emitPageEvent(t),this.Bf={eventName:t,isETR:!1,isCustomHashId:!1},this.qf(),this.L.tagDeploymentMode===Du.LoadClicktalePtc&&Uu.sendPageEvent(t)},
n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Uf(t)&&(this.L.malkaEtrEnabled?this.Ff(t):this.Gf(t)):csArray.prototype.push.call(this.Tr,t)},n.prototype.Ff=function(t){nt(t,"@ETP@")?this.Lf.emitEventTriggerRecording(t,ci.ETR_PAGE):this.Lf.emitEventTriggerRecording(t,ci.ETR_SESSION),this.Bf={eventName:t,isETR:!0,isCustomHashId:!1},this.qf()},n.prototype.Gf=function(t){(function(t){return ro(t)||t.tagDeploymentMode===Du.LoadClicktalePtc})(this.L)&&(this.Lf.emitEventTriggerRecording(t,
ci.ETR_LEGACY),this.Bf={eventName:t,isETR:!0,isCustomHashId:!1},this.qf(),this.L.tagDeploymentMode===Du.LoadClicktalePtc&&Uu.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.Wh.compressSync(this.Bf.eventName,"base64"),ct:this.Wh.algorithm,isETR:"".concat(this.Bf.isETR),isCustomHashId:"".concat(this.Bf.isCustomHashId)}},n.prototype.qf=function(){this.Mf.send()},n.Uf=function(t){return kt(t)&&!!csString.prototype.trim.call(t)},n}(wi),uo=["trackPageEvent"],
oo=["trackEventTriggerRecording"],ho=function(){function t(t,n,i,r,e){this.L=t,this.Yh=n,this.Wh=i,this.qo=r,this.Lf=e}return t.prototype.init=function(){var t=this,n=new ft(this.L.getTrackerUri(),"pageEvent"),i=new Wr(window.crypto);i.init(),this.Vf=new so(this.L,n,this.Wh,this.Lf,i),n.setRequestParametersProviders(this.Vf,this.qo),this.Yh.register(uo,function(n){t.Vf.trackPageEvent(n)}),this.Yh.register(oo,function(n){t.Vf.trackEventTriggerRecording(n)})},t.prototype.onStartTracking=function(){this.Vf.start()},
t}(),co=document.createElement("div");function ao(t){if(!(!!t&&kt(t)))return un.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return _.call(co,t),!0}catch(n){return un.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var fo,vo=["#c1_card_info_id"];!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(fo||(fo={}));var lo,wo=function(){function t(t){var n;this.L=t,this.Wf=["value","checked","src","data","alt"],this.Yf=X(["[data-cs-mask]",
"script"],vo,!0),this.Jf=[{selector:"input:not([type\x3dbutton]):not([type\x3dsubmit])",attrName:"value"}],this.$f={PIISelectors:X([".ctHidden, textarea","#c1_card_info_id"],vo,!0),Attributes:[{selector:".ctHidden, input:not([type\x3dbutton]):not([type\x3dsubmit])",attrName:"value"}]},this.Kf=[],this.Zf="",this.Xf=function(){},ro(this.L)||(this.Zf=this.Qf(this.Zf,this.Yf),(n=csArray.prototype.push).call.apply(n,X([this.Kf],this.Jf,!1))),this.tv=this.nv()}return t.prototype.nv=function(){var t=this;
if(window.ResizeObserver)return new ResizeObserver(function(n){csArray.prototype.forEach.call(n,function(n){t.Xf(n)})})},t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,function(t){return ao(t)});this.Zf=this.Qf(this.Zf,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,function(t){t&&t.attrName&&ao(t.selector)&&!i.iv(t)&&csArray.prototype.push.call(i.Kf,
t)})}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.Zf],Attributes:this.Kf}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.Zf=this.Qf(this.Zf,this.$f.PIISelectors),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var e=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,function(t){return ao(t)});this.Zf=this.Qf(this.Zf,e),(t=csArray.prototype.push).call.apply(t,X([this.Kf],
this.$f.Attributes,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,function(t){t.attr&&ao(t.rule)&&csArray.prototype.push.call(r.Kf,{selector:t.rule,attrName:t.attr})})}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(this.Wf,n)||this.rv(t,n,this.Kf)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===fo.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===
fo.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(a(t)||b(t)){this.ev(t);var i=Li.getAllShadowHosts(t);csArray.prototype.forEach.call(i,function(t){return csElementshadowRoot.apply(t)&&n.ev(csElementshadowRoot.apply(t))})}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(a(t)||b(t)){this.sv(t);var i=Li.getAllShadowHosts(t);csArray.prototype.forEach.call(i,function(t){return csElementshadowRoot.apply(t)&&n.sv(csElementshadowRoot.apply(t))})}},t.prototype.onSensitiveElementResize=
function(t){this.Xf=t},t.prototype.disconnectResizeObserver=function(){var t;null===(t=this.tv)||void 0===t||t.disconnect()},t.prototype.sv=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.ev=function(t){var n=this;if(this.uv(t))return this.ov(t),void this.hv(t);this.cv(t,this.Zf)?(this.av(t),this.hv(t)):ni(window.csquerySelectorAll[t.nodeType].call(t,this.Zf),function(t){n.av(t),
n.hv(t)})},t.prototype.av=function(t){t.__contentsquare_sensitive=fo.Sensitive,this.fv(t)},t.prototype.fv=function(t){this.tv&&a(t)&&!S(t)&&this.tv.observe(t)},t.prototype.ov=function(t){t.__contentsquare_sensitive=fo.SensitiveChild},t.prototype.hv=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.ov(i),i=n.nextNode()},t.prototype.uv=function(t){return!(!csNodeparentNode.apply(t)||!a(csNodeparentNode.apply(t))&&!b(csNodeparentNode.apply(t))||
!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||N(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.cv=function(t,n){return a(t)&&_.call(t,n)},t.prototype.rv=function(t,n,i){return csArray.prototype.some.call(i,function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&_.call(t,i.selector)})},t.prototype.Qf=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,
",");for(var i=csString.prototype.split.call(t,","),r=0,e=n;r<e.length;r++)for(var s=e[r],u=0,o=csString.prototype.split.call(s,",");u<o.length;u++){var h=o[u];-1===csArray.prototype.indexOf.call(i,h)&&csArray.prototype.push.call(i,h)}return csArray.prototype.join.call(i,",")},t.prototype.iv=function(t){return csArray.prototype.some.call(this.Kf,function(n){return n.selector===t.selector&&n.attrName===t.attrName})},t}(),yo=function(){function t(t){this.Yh=t}return t.prototype.init=function(){this.vv(t.lv,
Ht),this.vv(t.wv,jt)},t.prototype.vv=function(t,n){this.Yh.register([t],function(t,i){kt(t)&&(kt(i)||xt(i))&&un.error(i,"".concat(n).concat(t))})},t.wv="logSnippetError",t.lv="logImplementationSnippetError",t}(),po=function(){function t(t,n,i,r){this.L=t,this.Ic=n,this.Vh=i,this._c=r}return t.prototype.init=function(){var t=this;this.Ic.onChildMessage(function(n,i,r){return t._c.emitIframeEvent(n,i,r)}),this.Ic.setRecordingStatusCallback(function(){return t.Vh.getRecordingStatus()})},t.prototype.onStartTracking=
function(){this.L.iframesTracking&&this.Ic.start()},t.prototype.onOptout=function(){this.L.iframesTracking&&this.Ic.stop()},t.prototype.onRecordingStatusChange=function(){this.L.iframesTracking&&this.Ic.onRecordingStatusChange(this.Vh.getRecordingStatus())},t}(),mo=function(t){function n(n,i){var r=t.call(this)||this;return r.L=n,r.cn=i,r.yv=0,r.pv=new Map,r.mv={boundElement:window,type:"message",listener:function(t){return r.gv(t)}},r}return Y(n,t),n.prototype.onChildMessage=function(t){this.Sv=
t},n.prototype.setRecordingStatusCallback=function(t){this.Ev=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=tn.buildBaseMessage(Qt.RecordingStatus,Xt.Parent,this.L.projectId);i.content=t,this.pv.forEach(function(t){!n.Av(t)&&t.port&&tn.sendChannelMessage(t.port,i)})},n.prototype.sendToChildren=function(t,n){var i=tn.buildBaseMessage(t,Xt.Parent,this.L.projectId);i.content=n,this.bv(i)},n.prototype.onStart=function(){In(this.mv,!1),this.Rv()},n.prototype.onStop=function(){this.Nv(),
kn(this.mv,!1),this.Tv()},n.prototype.Rv=function(){var t=this,n=this.Ov();this.Iv(n),csArray.prototype.forEach.call(n,function(n){if(null===t.kv(n)){var i={iframe:n};t.pv.set(t.yv,i),t.yv+=1}}),this.Cv()},n.prototype.Ov=function(){var t=this;return csArray.prototype.filter.call(Bi.findAllElements("iframe"),function(n){return t._v(n)})},n.prototype.Iv=function(t){var n=this;this.pv.forEach(function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Pv(r,i)})},n.prototype.Pv=function(t,
n){n.port&&tn.closeChannelPort(n.port),this.pv.delete(t)},n.prototype.Tv=function(){this.pv.forEach(function(t){t.port&&tn.closeChannelPort(t.port)}),this.pv.clear()},n.prototype.kv=function(t){var n=null;return this.pv.forEach(function(i,r){null===n&&i.iframe===t&&(n=r)}),n},n.prototype._v=function(t){return t.id!==i&&(!t.src||Jt(Yt(t.src),this.L.hostnames))},n.prototype.bv=function(t){this.pv.forEach(function(n){n.port&&tn.sendChannelMessage(n.port,t)})},n.prototype.Cv=function(){var t=this;this.pv.forEach(function(n,
i){if(n.iframe.contentWindow){var r=t.Mv(i);tn.sendPostMessage(n.iframe.contentWindow,"*",r)}})},n.prototype.Nv=function(){var t=this.Lv();this.pv.forEach(function(n){n.port?tn.sendChannelMessage(n.port,t):n.iframe.contentWindow&&tn.sendPostMessage(n.iframe.contentWindow,"*",t)})},n.prototype.Mv=function(t){return tn.buildBaseMessage(Qt.Discovery,Xt.Parent,this.L.projectId,t)},n.prototype.Lv=function(){return tn.buildBaseMessage(Qt.Stop,Xt.Parent,this.L.projectId)},n.prototype.xv=function(t,n){var i=
this,r=this.pv.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Dv(t,r)}):un.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.yv,")"))},n.prototype.Uv=function(t){if(t.port){var n=tn.buildBaseMessage(Qt.RecordingStatus,Xt.Parent,this.L.projectId),i=this.Ev();this.Av(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,tn.sendChannelMessage(t.port,n)}},n.prototype.Dv=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;
i===Qt.EndOfBufferedMessages?this.Uv(n):this.Sv(n.iframe,i,r)}else un.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.gv=function(t){if(tn.isMessageValid(t,Xt.Child,this.L.projectId,this.L.hostnames))switch(t.data.type){case Qt.Discovery:if(void 0===t.data.id)return void this.Rv();if(t.ports&&1===t.ports.length&&this.pv.has(t.data.id))return void this.xv(t.data.id,t.ports[0]);un.error("Parent received wrong channelMessage initialization : (".concat(t.origin,
") : ").concat(csJSON.stringify(t.data)));break;case Qt.ChildLogMessage:this.Sv(null,Qt.ChildLogMessage,t.data.content);break;default:un.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Av=function(t){return this.cn.isSensitive(t.iframe)||this.cn.isSensitiveChild(t.iframe)},n}(wi),go=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.jv(n.x)-this.jv(t.x),r=this.jv(n.y)-this.jv(t.y),e=n.time-
t.time;return{duration:e,distance:this.Hv(i,r),direction:this.zv(i,r),velocity:this.Bv(i,r,e)}},t.prototype.computePinchMetrics=function(t,n){var i=this.jv(n.x)-this.jv(t.x),r=this.jv(n.y)-this.jv(t.y);return{duration:n.time-t.time,distance:this.Hv(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.jv=function(t){return t/window.devicePixelRatio},t.prototype.Hv=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.Bv=function(t,n,i){var r=i/1E3,e=t/r,s=n/r;return Math.round(Math.abs(e)+
Math.abs(s))},t.prototype.zv=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?Vr.RIGHT:Vr.LEFT:n>0?Vr.DOWN:Vr.UP},t}(),So=function(){function t(){this.qv={},this.Fv=new go,this.Gv()}return t.prototype.onGesture=function(t){this.Vv=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.Wv(t)){this.Yv(t)&&this.Gv();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:At()};if(1===t.touches.length)this.qv.startPinchTime=
n.time,this.qv.firstTouch=n;else if(2===t.touches.length&&(this.qv.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:At()},this.qv.firstTouch&&this.qv.secondTouch)){var i=this.Fv.computePinchMetrics(this.qv.firstTouch,this.qv.secondTouch);this.Jv=i.distance}csArray.prototype.push.call(this.$v,n),this.Kv=Yn(t)}},t.prototype.processActionMove=function(){this.Zv=!0},t.prototype.processActionUp=function(t){if(this.Xv(t)){if(csArray.prototype.push.call(this.$v,{x:t.changedTouches[0].clientX,
y:t.changedTouches[0].clientY,time:At()}),this.Qv(t)&&this.qv.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.qv.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:At()};this.qv.firstTouch&&(this.qv.firstTouch=n,this.qv.secondTouch=i),this.tl(t)}this.Jv||this.nl()&&this.il(t)}},t.prototype.Gv=function(){this.$v=[],this.Kv=null,this.Zv=!1,this.Jv=null,this.rl=!0},t.prototype.il=function(t){var n=this.Fv.compute(this.$v[0],this.$v[1]);
this.rl=t.isTrusted;var i=this.Zv?this.el(n):this.sl(n);this.Vv(i,t)},t.prototype.tl=function(t){if(this.qv.firstTouch&&this.qv.secondTouch){var n=this.Fv.computePinchMetrics(this.qv.firstTouch,this.qv.secondTouch);this.rl=t.isTrusted;var i=this.ul(n);i&&this.Vv(i,t)}},t.prototype.ul=function(t){if(this.Jv&&!(this.Fv.getScale(this.Jv,t.distance)<.1))return{type:this.Jv>t.distance?Gr.PINCH_IN:Gr.PINCH_OUT,target:this.Kv,distance:t.distance,isTrusted:this.rl}},t.prototype.el=function(t){return{type:t.velocity<
100?Gr.DRAG:Gr.FLICK,target:this.Kv,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.rl}},t.prototype.sl=function(t){return{type:t.duration<1E3?Gr.TAP:Gr.LONG_PRESS,target:this.Kv,isTrusted:this.rl}},t.prototype.Yv=function(t){return 1===t.touches.length},t.prototype.nl=function(){return 2===this.$v.length},t.prototype.Wv=function(t){return t.touches.length>0},t.prototype.Xv=function(t){return t.changedTouches.length>0},t.prototype.Qv=function(t){return this.Zv&&!!this.Jv&&
1===t.changedTouches.length&&1===t.touches.length},t}(),Eo=function(t){function n(n){var i=t.call(this)||this;return i.ol=n,i._e=[{boundElement:document,type:"touchstart",listener:function(t){return i.Ur(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Ur(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Ur(t)}}],i.hl=new So,i.hl.onGesture(function(t,n){return i.cl(t,n)}),i}return Y(n,t),n.prototype.cl=function(t,n){for(var i in this.subscriptions)(0,
this.subscriptions[i])(t,n)},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this._e,function(t){return In(t)})},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this._e,function(t){return kn(t)})},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Ur=function(t){var n=this;this.ol.tryToExecute("process gesture event",function(){if(n.hl.isValidTouchEvent(t))switch(t.type){case "touchstart":n.hl.processActionDown(t);
break;case "touchmove":n.hl.processActionMove();break;case "touchend":n.hl.processActionUp(t)}})()},n.isSwipe=function(t){return t.type===Gr.FLICK||t.type===Gr.DRAG},n}(function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}()),Ao=function(t){function n(n,
i){var r=t.call(this)||this;return r.nr=n,r.al=i,r.vl=0,r}return Y(n,t),n.prototype.onStart=function(){var t=this;un.isPerfLoggingActive()&&(this.ll=window.setInterval(function(){return t.dl()},n.wl))},n.prototype.onStop=function(){un.isPerfLoggingActive()&&(this.dl(),clearInterval(this.ll))},n.prototype.dl=function(){if(!(Hn.isEmpty()||this.vl>=n.yl)){var t=Hn.getAll();this.vl++;var i=J({a:n.pl,l:n.ml},this.al.getRequestParameters()),r=csArray.prototype.map.call(t,function(t){return J(J({},t),i)});
this.nr.send(r),Hn.clear()}},n.pl="uxa",n.ml="perf",n.wl=5E3,n.yl=5,n}(wi),bo=function(){function t(t,n,i){this.L=t,this.al=n,this.Zh=i}return t.prototype.init=function(){this.gl=new Ao(this.Zh.create(this.L.getLoggerUri(),!0),this.al)},t.prototype.onStartTracking=function(){this.gl.start()},t.prototype.onOptout=function(){this.gl.stop()},t}(),Ro=function(){function t(){this.Sl=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,e,s){this.Sl=!0,this.Me=t,this.cn=n,this.Le=i,this.nc=r,this.J=
e,this.tr=s},t.prototype.getRecordingStatus=function(){var t,n,i,r;return this.Sl?{isRecording:this.Me.isRecording(),isMutationTrackerStarted:this.Me.isMutationTrackerStarted(),PIISelectors:this.cn.getPIISelectors(),capturedElementSelector:this.nc.getWhitelistedElementsSelector(),useAnonymization:this.Le.shouldUseAnonymization(),encryptionSelectors:null===(t=this.tr)||void 0===t?void 0:t.getEncryptionSelectors(),activateOnlineAssetsOnNextStart:null===(n=this.Me.getStaticResourceManagerStatus())||
void 0===n?void 0:n.onlineAssets.enabledForChildrenOnNextStart,recordingStartTimestamp:parseInt(this.Me.getRecordingStartTimestamp(),10),etrState:null!==(r=null===(i=this.J.getSession())||void 0===i?void 0:i.etrState)&&void 0!==r?r:hi.ETR_OFF}:{isRecording:!1,recordingStartTimestamp:0,etrState:hi.ETR_OFF}},t}(),No=function(){function t(){this.El=Ts.Natural}return t.prototype.setPageViewType=function(t){this.El=t},t.prototype.getPageViewType=function(){return this.El},t.prototype.getRequestParameters=
function(){return{pvt:this.El}},t}(),To=function(){function t(t){this.$i=t}return t.prototype.onAfterVisitorRenewal=function(){this.$i.startNewSession()},t}(),Oo=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,S,E,A,b,R){var N=this;this.Ho=t,this.Wh=n,this.Y=i,this.J=r,this.Ln=e,this.Yh=s,this.Al=u,this.L=o,this.bl=h,this.Rl=c,this.Nl=a,this.zu=f,this.D=v,this.ja=l,this.Xh=d,this.X=w,this.Tl=y,this.Lf=p,this._c=m,this.en=g,this.Ol=S,this.Kh=E,this.Il=A,this.hs=b,this.Zh=R,this.kl=function(t){void 0===
t&&(t=!1),N.Cl.start(t),N._l.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w=this;(this.bl.init(),this.Rl.init(),this.Rl.isActive())||(this.hs.schedule(function(){f=new io(w.J,w.Y),d=new To(f),a=new Yu(w.ja),l=new Eo(un),t=new Pu(w.L,w.Ho,w.Y,w.ja,a,w.Yh,f,l,w._c,w.Zh),n=new cs(w.Yh,w.J,w.L,w.Ho,w.Wh,w.D),v=new wo(w.L),c=new Ro;var y=new mo(w.L,v);(h=new po(w.L,y,c,w._c)).init();var p=new No;i=new es(w.Y,w.J,w.Yh,w._c,y,w.L,p,c),r=new ms(w.L,w.Ho,w.Y,w.Yh,w.D,f,w.X),
w.Cl=new Wu(w.L,w.Yh,w.Ln,w.Ho,w.Y,w.J,w.zu,w.en,w.Xh,w.X,w.Kh,p),e=new no(w.L,w.Y,w.J,w.Yh),s=new ho(w.L,w.Yh,w.Wh,w.Ho,w.Lf),u=new yo(w.Yh),o=new bo(w.L,new Tt(w.L,w.D),w.Zh),w._l=new Ju}),this.hs.schedule(function(){w.Nl.init()}),this.hs.schedule(function(){i.init()}),this.hs.schedule(function(){n.init()}),this.hs.schedule(function(){r.init()}),this.hs.schedule(function(){w.Ol.init()}),this.hs.schedule(function(){w.Cl.init()}),this.hs.schedule(function(){e.init()}),this.hs.schedule(function(){s.init()}),
this.hs.schedule(function(){w.Tl.init()}),this.hs.schedule(function(){u.init()}),this.hs.schedule(function(){o.init()}),this.hs.schedule(function(){w.Il.init()}),this.hs.schedule(function(){w.Ln.addListener(e),w.Ln.addListener(w.Al),w.Ln.addListener(t),w.Ln.addListener(w.Nl),w.Ln.addListener(i),w.Ln.addListener(w.Ol),w.Ln.addListener(w.Cl),w.Ln.addListener(s),w.Ln.addListener(n),w.Ln.addListener(h),w.Ln.addListener(o),w.Ln.addListener(d)}),ye.isRecordingSupported()&&this.hs.schedule(function(){var t=
new Ve(c,w.J,w.L,w.Wh,w.zu,w.Ho,w.Yh,w.D,f,w.X,v,w.Ki,w.Zi,w.Xi,l,w.Qi,w.Ln,w.Lf,w._c,w.Kh,w.hs,w.Zh,w.Xh);t.init(),w.Ln.addListener(t),i.setRecordingService(t.recordingService)}),this.hs.schedule(function(){t.init()}),this.hs.schedule(function(){f.onSessionExpired(function(){w.Ln.emitBeforeSessionRenewal(),w.Pl(!0),w.Ln.emitAfterSessionRenewal()}),w.Pl()}))},t.prototype.Pl=function(t){var n=this;void 0===t&&(t=!1),this.Yh.start(),this._l.onLoad(function(){n.Ln.emitStartTracking(t)}),ro(this.L)&&
!t||this.kl(t)},t}(),Io=function(){function t(t,n,i,r,e,s,u,o){this.L=t,this.Y=n,this.rn=i,this.Ml=r,this.Ll=e,this.xl=s,this.Dl=u,this.Ul=o}return t.prototype.compute=function(t){var n,i,r=this;this.L.crossDomainTracking&&!this.L.cookielessTrackingEnabled?this.L.crossDomainSingleIframeTracking?null===(n=this.Dl)||void 0===n||n.start(function(){return r.jl(t)}):null===(i=this.xl)||void 0===i||i.applyUpToDate(function(){return r.jl(t)}):this.jl(t)},t.prototype.jl=function(t){this.Ll.handle(),this.Ml.clear(),
this.Hl()?(this.Ml.restoreClearedVisitor(),t(!0)):(this.rn.exclude(this.L),t(!1))},t.prototype.Hl=function(){var t=rt.boolean(this.L.sampleRate);return this.Ul.isForceIncluded()||!this.rn.isExcluded()&&this.Y.doesVisitorExist()||!this.rn.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),
-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)});return csString.prototype.replace.call(r,"hhhh",n)}}(lo||(lo={}));var ko,Co=function(){function t(t,n,i,r){this.L=t,this.zl=n,this.J=i,this.Ln=r,this.Bl=1E4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.ql(),this.J.removeSession()),this.Fl(t),this.setVisitor(t)},t.prototype.ql=
function(){return{id:lo.generate(),visitsCount:0,appliedTrackingDraw:this.L.lastTrackingDraw,creationTimestamp:bt(),lastVisitTimestamp:0,hitTimestamp:0,expires:At()+this.L.visitorCookieTimeout,allowSubdomains:this.L.allowSubdomains}},t.prototype.Fl=function(t){var n=bt();this.J.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.L.lastTrackingDraw,this.Gl=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?
{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.zl.get()},t.prototype.setVisitor=function(t){this.zl.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.zl.get()},t.prototype.resetVisitor=function(){this.Vl(),this.Ln.emitAfterVisitorCleared()},t.prototype.removeVisitor=function(){this.zl.remove()},t.prototype.hasAllowSubdomainsChanged=function(){var t=this.getVisitor();return!!t&&t.allowSubdomains!==this.L.allowSubdomains},
t.prototype.handleSubdomainChange=function(){this.zl.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.Gl&&t.visitsCount!==this.Gl},t.prototype.Wl=function(){return!_t(this.Yl)||At()-this.Yl>this.Bl},t.prototype.renewVitor=function(){this.Wl()?(this.Yl=At(),this.Vl(),this.Ln.emitAfterVisitorRenewal()):un.warn("session:start:newVisitor is trying to renew visitor under time limit")},t.prototype.Vl=function(){this.Ln.emitBeforeVisitorRenewal(),
this.removeVisitor()},t}(),_o="_cs_s",Po=18E5,Mo=/^(\d+\.[013567TBW](\.[01])?)(\.\d+)?$/,Lo=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(ko||(ko={}));var xo,Do=function(){function t(t,n,i){this.L=t,this.Jl=n,this.$l=i,this.do=null,this.Kl=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.Zl();return t.Xl(i)}var r=this.Ql(),e=r.sessionString,
s=r.status,u=t.Xl(e);if(s!==ko.EXPIRED)return u;if(this.L.cookielessTrackingEnabled)return null;var o=this.Zl();if(!o)return null;var h=csString.prototype.split.call(o,Lo);if(!t.td(h))return o;var c=h[h.length-1],a=parseInt(c,10);return isNaN(a)||this.nd(a),u},t.prototype.onCookieToSet=function(t){this.rd=t},t.prototype.onCookieToRemove=function(t){this.sd=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=Po);var r=At()+n,e=this.toString(t);e+="".concat(Lo).concat(r),this.ud(e,r),this.L.cookielessTrackingEnabled?
this.$l.setItem(_o,e):(this.Jl.set(_o,e,n),null===(i=this.rd)||void 0===i||i.call(this,_o,e,n))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.$l.removeItem(_o):(this.Jl.delete(_o),null===(t=this.sd)||void 0===t||t.call(this,_o)),this.od()},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.L.allowSubdomains?this.Jl.delete(_o,ln.CURRENT_DOMAIN):this.Jl.delete(_o,this.Jl.getRootDomain()),this.set(t))}},t.prototype.isValid=
function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],Lo)},t.prototype.ud=function(t,n){this.do={sessionString:t,expires:n}},t.prototype.Ql=function(){return this.do?this.do&&At()<=this.do.expires?{sessionString:this.do.sessionString,status:ko.FOUND}:{sessionString:this.do.sessionString,status:ko.EXPIRED}:{sessionString:this.Zl(),status:ko.NOT_FOUND}},t.prototype.od=function(){this.do=
null},t.prototype.nd=function(t){this.do&&(this.do.expires=t,this.Kl=!0)},t.prototype.isCacheRefreshed=function(){return this.Kl},t.prototype.resetCacheRefreshed=function(){this.Kl=!1},t.prototype.Zl=function(){if(this.L.cookielessTrackingEnabled){var t=this.$l.getItem(_o);return!t||this.ad(t)?null:t}var n=this.Jl.get(_o);return!n||this.ad(n)?null:n},t.prototype.ad=function(n){var i=csString.prototype.split.call(n,Lo);if(!t.td(i))return!1;var r=parseInt(i[i.length-1],10);return!isNaN(r)&&At()>r},
t.td=function(t){return 13===t[t.length-1].length},t.Xl=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,Mo))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.Xl(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n,i=csString.prototype.split.call(t,Lo),r=i[0];return{recordingState:i[1],etrState:null!==(n=i[2])&&void 0!==n?n:hi.ETR_OFF,pageNumber:parseInt(r,10)}},t.isValidSessionString=function(t){return Mo.test(t)},
t}();!function(t){t[t.NO=0]="NO",t[t.WITHDRAWN=1]="WITHDRAWN",t[t.GRANTED=2]="GRANTED"}(xo||(xo={}));var Uo,jo=function(){function t(t,n){this.vd=t,this.ld=n,this.dd=null,this.wd=0,this.yd=xo.NO}return t.prototype.setDynamicVariablesService=function(t){this.pd=t},t.prototype.createOrUpdateSession=function(){this.md(),this.gd=At(),this.wd=0;var t=this.Sd();null===t?(t=this.Ed(),this.Ad(t),this.bd(t)):(t=this.ld.sanitizeSessionRecordingState(t),this.Ad(t),t.recordingState=this.ld.updateRecordingState(t)),
this.setSession(t)},t.prototype.grantReplayRecording=function(t){t.recordingState=this.ld.getDisabledRecordingState(),t.recordingState=this.ld.computeInitialRecordingStateFromRecordingConsentGranted(t),this.setSession(t)},t.prototype.grantReplayRecordingBeforeSessionStart=function(){this.yd=xo.GRANTED},t.prototype.withdrawnReplayRecording=function(t){t.recordingState=this.ld.getConsentWithdrawnRecordingState(),this.setSession(t)},t.prototype.withdrawnReplayRecordingBeforeSessionStart=function(){this.yd=
xo.WITHDRAWN},t.prototype.bd=function(t){this.yd===xo.WITHDRAWN?(t.recordingState=this.ld.getConsentWithdrawnRecordingState(),this.setSession(t)):this.yd===xo.GRANTED?t.recordingState=this.ld.computeInitialRecordingStateFromRecordingConsentGranted(t):t.recordingState=this.ld.computeInitialRecordingState(t),this.yd=xo.NO},t.prototype.Ed=function(){return{pageNumber:0,recordingState:this.ld.getDisabledRecordingState(),etrState:hi.ETR_OFF}},t.prototype.Ad=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=
function(){var t=this.getSession();return!!t&&this.ld.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===oi.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.ld.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber)),t},t.prototype.getSession=function(){return this.vd.get()},t.prototype.Sd=function(){return this.vd.get(!0)},
t.prototype.doesSessionExist=function(){return null!==this.vd.get()},t.prototype.setSession=function(t){this.vd.set(t)},t.prototype.removeSession=function(){this.vd.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==oi.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===hi.ETR_ON&&csArray.prototype.push.call(n,oi.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=
t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.vd.getRawSession();return this.vd.isValid(t)},t.prototype.handleSubdomainChange=function(){this.vd.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(t){void 0===t&&(t=!0);var n=this.vd.isCacheRefreshed();return n&&t&&this.vd.resetCacheRefreshed(),n},t.prototype.extendSessionPeriodically=function(){this.dd||this.Rd()},t.prototype.Rd=function(){if(this.Nd())this.md();else{var t=this.getSession();
if(null===t)return un.warn("extendSession is trying to extend an expired session"),void this.md();this.vd.set(t,Po),this.Td(),this.Od()}},t.prototype.Od=function(){var t=this;this.dd=window.setTimeout(function(){t.Rd()},174E4)},t.prototype.Nd=function(){return 1434E4-(At()+Po-this.gd)<0},t.prototype.md=function(){this.dd&&(window.clearTimeout(this.dd),this.dd=null)},t.prototype.Td=function(){this.wd+=1,this.pd.trackDynamicVariable("session_expiry_update",this.wd)},t}(),Ho=function(){function t(t,
n,i){this.L=t,this.Y=n,this.rn=i}return t.prototype.clear=function(){this.Id()&&(this.kd=this.Y.getVisitor(),this.Y.removeVisitor()),this.Cd()&&this.rn.removeExclusion()},t.prototype.Id=function(){return this.Y.doesVisitorExist()&&this.Y.getVisitor().appliedTrackingDraw!==this.L.lastTrackingDraw},t.prototype.Cd=function(){return this.rn.getAppliedTrackingDraw()!==this.L.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.kd&&this.Y.setVisitor(this.kd)},t}(),zo=function(){function t(t,
n,i){this.Y=t,this.J=n,this._d=i}return t.prototype.handle=function(){this.Y.hasAllowSubdomainsChanged()&&(this.Y.handleSubdomainChange(),this.J.handleSubdomainChange(),this._d.handleSubdomainChange())},t}(),Bo=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),qo=function(t){function n(n){var i=t.call(this)||this;return i.hs=n,i}return Y(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<
n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.hs.schedule(function(){return n.onStartTracking(t)})},
i=this,r=0,e=this.listeners;r<e.length;r++)n(e[r])},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){un.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=
n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitReplayUnanonymizationConsentGranted=
function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentGranted&&i.onReplayUnanonymizationConsentGranted()}},n.prototype.emitReplayUnanonymizationConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentWithdrawn&&i.onReplayUnanonymizationConsentWithdrawn()}},n.prototype.emitAfterReplayRecordingConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentGranted&&
i.onAfterReplayRecordingConsentGranted()}},n.prototype.emitAfterReplayRecordingConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentWithdrawn&&i.onAfterReplayRecordingConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onRecordingStateChange&&e.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=
n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},
n.prototype.emitAfterVisitorCleared=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorCleared&&i.onAfterVisitorCleared()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},$([Vn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(Bo),Fo="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",
t[t.WITHDRAWN=3]="WITHDRAWN"}(Uo||(Uo={}));var Go,Vo=function(){function t(t,n,i){this.L=t,this.Jl=n,this.Pd=i}return t.prototype.get=function(){var t;return null===(t=this.L.cookielessTrackingEnabled?this.Pd.getItem(Fo):this.Jl.get(Fo))?t:Number(t)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.Pd.setItem(Fo,csString(t)):this.Jl.set(Fo,csString(t),it)},t.prototype.remove=function(){this.L.cookielessTrackingEnabled?this.Pd.removeItem(Fo):this.Jl.delete(Fo)},t.prototype.handleSubdomainChange=
function(){this.L.cookielessTrackingEnabled||(this.L.allowSubdomains?this.Jl.delete(Fo,ln.CURRENT_DOMAIN):this.Jl.delete(Fo,this.Jl.getRootDomain()))},t}(),Wo=function(){function t(t,n,i){this.L=t,this.J=n,this.Ln=i}return t.prototype.grantReplayConsent=function(){if(Me.isReplayConsentNeeded(this.L)){var t=this.J.getSession();t?Me.isRecordingBlockedByConsent(t)&&(this.J.grantReplayRecording(t),this.Ln.emitAfterReplayRecordingConsentGranted()):this.J.grantReplayRecordingBeforeSessionStart()}},t.prototype.withdrawReplayConsent=
function(){if(Me.isReplayConsentNeeded(this.L)){var t=this.J.getSession();t?Me.isRecordingWithDrawn(t)||(this.J.withdrawnReplayRecording(t),this.Ln.emitAfterReplayRecordingConsentWithdrawn()):this.J.withdrawnReplayRecordingBeforeSessionStart()}},t}(),Yo=["replay:consent:unanonymized:granted","trackConsentGranted"],Jo=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],$o=["replay:consent:startForSession:granted"],Ko=["replay:consent:startForSession:withdrawn"],Zo=function(){function t(t,
n,i,r,e){this.L=t,this.Yh=n,this.zu=i,this.J=r,this.Ln=e}return t.prototype.init=function(){this.Md=new Wo(this.L,this.J,this.Ln),this.zu.setInitialConsent(),this.Ld()},t.prototype.Ld=function(){var t=this;this.Yh.register(Yo,function(){t.zu.grantReplayAnonymizationConsent()}),this.Yh.register(Jo,function(){t.zu.withdrawReplayAnonymizationConsent()}),this.Yh.register($o,function(){t.Md.grantReplayConsent()}),this.Yh.register(Ko,function(){t.Md.withdrawReplayConsent()})},t.prototype.onOptout=function(){this.zu.removeAllConsents()},
t.prototype.onBeforeVisitorRenewal=function(){this.zu.removeAllConsents()},t.prototype.onAfterVisitorRenewal=function(){this.zu.setInitialConsent()},t.prototype.onAfterVisitorCleared=function(){this.zu.setInitialConsent()},t}(),Xo=function(){function t(t,n,i){this.L=t,this.zl=n,this.Ln=i}return t.prototype.setInitialConsent=function(){var t=this.zl.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.L.consentRequired;
return n&&t===Uo.NOT_REQUIRED||!n&&t!==Uo.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.zl.handleSubdomainChange()},t.prototype.setDefaultReplayAnonymization=function(){var t=this.L.consentRequired?Uo.NOT_EXPRESSED:Uo.NOT_REQUIRED;this.zl.set(t)},t.prototype.grantReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.zl.set(Uo.GRANTED),this.Ln.emitReplayUnanonymizationConsentGranted())},t.prototype.withdrawReplayAnonymizationConsent=function(){this.L.consentRequired&&
(this.zl.set(Uo.WITHDRAWN),this.Ln.emitReplayUnanonymizationConsentWithdrawn())},t.prototype.removeAllConsents=function(){this.zl.remove()},t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.L.consentRequired||this.zl.get()===Uo.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.zl.get())}},t}(),Qo=function(){function t(t,n,i,r,e,s,u){this.Ln=t,this.Yh=n,this.Al=i,this.bl=r,this.Rl=e,this.xd=s,this.Nl=u}return t.prototype.start=function(){this.Ln.addListener(this.xd),
this.Ln.addListener(this.Nl),this.Ln.addListener(this.Al),this.Nl.init(),this.bl.init(),this.Rl.init(),this.Rl.isActive()||this.Yh.start()},t}(),th="_cs_ex",nh=2592E6,ih=/^[0-9]+$/,rh=function(){function t(t,n,i){this.L=t,this.Jl=n,this.$l=i}return t.prototype.onCookieToSet=function(t){this.rd=t},t.prototype.onCookieToRemove=function(t){this.sd=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?Number(this.$l.getItem(th)):Number(this.Jl.get(th))},t.prototype.set=function(t){var n;
this.L.cookielessTrackingEnabled?this.$l.setItem(th,t):(this.Jl.set(th,t,nh),null===(n=this.rd)||void 0===n||n.call(this,th,t,nh))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.$l.removeItem(th):(this.Jl.delete(th),null===(t=this.sd)||void 0===t||t.call(this,th))},t.isValidExclusionString=function(t){return ih.test(t)},t}(),eh=function(){function t(t,n){this.ke=t,this.zl=n}return t.prototype.exclude=function(t){this.zl.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=
function(){this.zl.remove()},t.prototype.isExcluded=function(){return this.Dd()||this.Ud()},t.prototype.Dd=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.zl.get()},t.prototype.Ud=function(){return csString.prototype.indexOf.call(this.ke.href,th)>0},t}(),sh=function(){function t(t){this.zc=t}return t.prototype.onOptout=function(){this.zc.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Go||(Go={}));var uh=function(){function t(t){this.X=
t,this.jd=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.jd=new RegExp(t)},t.prototype.Hd=function(){return this.jd.test(this.X.getAnonymizedUrl())?Go.SessionReplay:Go.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Hd()===Go.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Hd()}},t}(),oh=["excludeURLforReplay"],hh=function(){function t(t,n){this.zc=t,this.Yh=n}return t.prototype.init=function(){var t=this;
this.Yh.register(oh,function(n){kt(n)&&t.zc.setExcludeUrlForSessionReplay(n)})},t}(),ch="_cs_inc",ah=function(){function t(t,n){this.ke=t,this.Jl=n}return t.prototype.isForceIncluded=function(){return this.zd()||this.Bd()},t.prototype.isForceReplayRecorded=function(){return this.qd(oi.GLOBAL_SAMPLING)},t.prototype.zd=function(){return null!==this.Jl.get(ch)},t.prototype.qd=function(t){return this.Jl.get(ch)===t},t.prototype.Bd=function(){return csString.prototype.indexOf.call(this.ke.href,ch)>0},
t}(),fh="_cs_optout",vh=function(){function t(t,n,i){this.L=t,this.Jl=n,this.Pd=i}return t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.Pd.getItem(fh):this.Jl.get(fh)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.Pd.setItem(fh,t):this.Jl.set(fh,t,it)},t}(),lh=function(){function t(t,n,i){this.Ln=t,this.ke=n,this.zl=i}return t.prototype.init=function(){!this.isActive()&&this.Fd()&&this.activate()},t.prototype.isActive=function(){return"1"===this.zl.get()},
t.prototype.activate=function(){this.Ln.emitOptout(),this.zl.set("1")},t.prototype.Fd=function(){return csString.prototype.indexOf.call(this.ke.href,fh)>0},t}(),dh=["optout"],wh=function(){function t(t,n){this.Yh=t,this.Rl=n}return t.prototype.init=function(){var t=this;this.Yh.register(dh,function(){t.Rl.activate()})},t}(),yh=function(){function t(t,n){this.Yh=t,this._c=n}return t.prototype.init=function(){this._c.addListener(this.Yh)},t.prototype.onOptout=function(){this.Yh.stop()},t.prototype.onBeforeSessionRenewal=
function(){this.Yh.stop()},t}();var ph;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(ph||(ph={}));var mh=function(t){function n(n){var i=t.call(this)||this;return i.Gd=n,i.Vd={},i}return Y(n,t),n.prototype.register=function(t,n,i){for(var r=0,e=t;r<e.length;r++){var s=e[r];this.Vd[s]={callback:n,configuration:i},this.Vd}},n.prototype.onStart=function(){this.Wd(),this.Yd()},n.prototype.onStop=function(){for(var t=0,n=this.Gd;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.applyFromIntegration=function(t,
n,i){var r=this;this.isStarted?un.tryToExecute("Commands.apply.from.integration: ".concat(i),function(){var i;if(r.Vd[t])return(i=r.Vd[t]).callback.apply(i,n)})():window._uxa.push(X([t],n,!0))},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.Jd(r.name,r.params,t.iframePath)}},n.prototype.Jd=function(t,n,i){var r=this;un.tryToExecute("Commands.apply.from.iframe: ".concat(i),function(){var i;if(r.Vd[t])return(i=r.Vd[t]).callback.apply(i,n)})()},n.prototype.Wd=
function(){for(var t=this,n=0,i=this.Gd;n<i.length;n++){var r=i[n];window[r].forEach(function(n){var i=n[0],r=n.slice(1);return t.$d(i,r,!1)})}},n.prototype.Yd=function(){for(var t=this,n=0,i=this.Gd;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.$d(i,r,!0)}}}},n.prototype.$d=function(t,n,i){var r,e,s;if(this.Vd[t]){if((null===(e=this.Vd[t].configuration)||void 0===e?void 0:e.disableApplyPending)&&!i||(null===(s=this.Vd[t].configuration)||void 0===s?void 0:
s.disableApplyImmediate)&&i)return;try{return(r=this.Vd[t]).callback.apply(r,n)}catch(i){un.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(wi),gh=function(){function t(t,n,i,r){this.L=t,this.Y=n,this.J=i,this.Kd=r}return t.prototype.getRequestParameters=function(){var t,n=J(J({},Et()),this.L.getRequestParameters()),i=this.J.getSession();i&&(n.pn="".concat(i.pageNumber));var r=this.Y.getVisitor();return r&&(n.sn="".concat(r.visitsCount),n.uu="".concat(r.id)),(null===
(t=this.Kd)||void 0===t?void 0:t.hasSubProjectId())&&(n.subProjectID="".concat(this.Kd.getSubProjectId())),n},t}(),Sh=function(){function t(t,n){this.Yh=t,this.k=n}return t.prototype.init=function(){var t=this;this.Yh.register(["debugEvents"],function(n){"boolean"==typeof n&&t.k.updateDynamicFields("emitDebugEvents",n)})},t}();function Eh(t,n,i){if(!_t(n)&&!_t(i))return t.href;var r=_t(n)?function(t){return nt(t,"/")?t:"/".concat(t)}(n):t.pathname,e=_t(i)?function(t){return nt(t,"?")||""===t?t:"?".concat(t)}(i):
t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(e)}var Ah,bh=function(){function t(t,n){this.ke=t,this.Xh=n}return t.prototype.overridePath=function(t){_t(t)&&kt(t)&&(this.Zd=""===t?void 0:t)},t.prototype.overrideQuery=function(t){_t(t)&&kt(t)&&(this.Xd=t)},t.prototype.computeOverriddenUrl=function(t){return this.Qd(t)?this.getAnonymizedUrl():t},t.prototype.Qd=function(t){var n=this.tw(this.ke.href);return this.tw(t)===n},t.prototype.tw=function(t){return n=t,i="/",-1!==
csString.prototype.indexOf.call(n,i,n.length-i.length)?csString.prototype.slice.call(t,0,-1):t;var n,i},t.prototype.getAnonymizedUrl=function(){var t=Eh(this.ke,this.Zd,this.Xd);return this.Xh.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.ke.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Rh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,
i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onEventTriggerRecording&&e.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<
i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(Bo),Nh=function(){function t(t,n,i,r,e){this.configuration=t,this.nw=n,this.Ln=i,this.Ul=r,this.X=e,this.iw=[]}return t.prototype.init=function(){this.rw()},t.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===oi.TEMPORARILY_RECORDED&&(t.recordingState=
oi.NOT_RECORDED),t},t.prototype.computeInitialRecordingState=function(t){return Me.isReplayConsentNeeded(this.configuration)?oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.bd(t)},t.prototype.computeInitialRecordingStateFromRecordingConsentGranted=function(t){return this.bd(t)},t.prototype.bd=function(t){return ye.isRecordingSupported()?(this.iw=[],rt.percentage()<this.configuration.replayRecordingRate||this.Ul.isForceReplayRecorded()?csArray.prototype.push.call(this.iw,oi.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&
csArray.prototype.push.call(this.iw,oi.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.iw,oi.ETR_SAMPLING),this.iw.length>0?(this.ew(t),oi.TEMPORARILY_RECORDED):oi.NOT_RECORDED):oi.NOT_RECORDED},t.prototype.updateRecordingState=function(t){return ye.isRecordingSupported()?Me.isRecordingBlockedByConsent(t)?t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN?oi.BLOCKED_BY_CONSENT_WITHDRAWN:oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.recordingState===oi.GLOBAL_SAMPLING?oi.GLOBAL_SAMPLING:
(this.iw=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.iw,oi.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.iw,oi.ETR_SAMPLING)),this.iw.length>0?(this.ew(t),oi.TEMPORARILY_RECORDED):oi.NOT_RECORDED):oi.NOT_RECORDED},t.prototype.ew=function(t){var n,i=null===(n=this.Y)||void 0===n?void 0:n.getVisitor();this.nw.send({recordingTypes:csArray.prototype.map.call(this.iw,Number),url:this.X.getAnonymizedUrl(),projectId:this.configuration.projectId,
uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},t.prototype.abortQuotaServiceRequest=function(){this.nw.abort()},t.prototype.isReplayRecorded=function(t){return!Me.isRecordingBlockedByConsent(t)&&(t.recordingState===oi.TEMPORARILY_RECORDED||t.recordingState===oi.GLOBAL_SAMPLING||t.recordingState===oi.URL_SAMPLING||t.etrState===hi.ETR_ON)},t.prototype.rw=function(){var t=this;this.nw.onError(function(){return t.quotaServiceErrorHandler("NetworkError")}),
this.nw.onTimeout(function(){return t.quotaServiceTimeoutHandler()},3E3),this.nw.onLoad(function(n){return t.quotaServiceLoadHandler(n)})},t.prototype.quotaServiceErrorHandler=function(t){this.uw("error - ".concat(t))},t.prototype.quotaServiceTimeoutHandler=function(){this.uw("timeout")},t.prototype.uw=function(t){var n=oi.NOT_RECORDED;this.ow(this.iw)?(n=oi.GLOBAL_SAMPLING,un.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):un.warn("Quota Service: request ".concat(t)),
this.Ln.emitRecordingStateChange(n,hi.ETR_OFF)},t.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=hi.ETR_OFF,e=oi.NOT_RECORDED;this.ow(i)?e=oi.GLOBAL_SAMPLING:this.hw(i)&&(e=oi.URL_SAMPLING),this.cw(i)&&(r=
hi.ETR_ON),this.Ln.emitRecordingStateChange(e,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},t.prototype.ow=function(t){return csArray.prototype.some.call(t,function(t){return t===oi.GLOBAL_SAMPLING})},t.prototype.hw=function(t){return csArray.prototype.some.call(t,function(t){return t===oi.URL_SAMPLING})},t.prototype.cw=function(t){return csArray.prototype.some.call(t,function(t){return t===
oi.ETR_SAMPLING})},t.prototype.setVisitorService=function(t){this.Y=t},t.prototype.getDisabledRecordingState=function(){return oi.NOT_RECORDED},t.prototype.getConsentWithdrawnRecordingState=function(){return oi.BLOCKED_BY_CONSENT_WITHDRAWN},$([vn("Quota Service: onerror")],t.prototype,"quotaServiceErrorHandler",null),$([vn("Quota Service: ontimeout")],t.prototype,"quotaServiceTimeoutHandler",null),$([vn("Quota Service: onload")],t.prototype,"quotaServiceLoadHandler",null),t}(),Th="|iframe|",Oh=function(t){function n(n,
i,r,e){var s=t.call(this)||this;return s.aw=n,s.fw=i,s.lw=r,s.yw=e,s}return Y(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.pw(n)&&null===t)un.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case Qt.ChildLogMessage:this.mw(i);break;case Qt.AnalysisEvent:var r=this.aw.transformEvent(t,i);this.gw(r);break;case Qt.RecordingEvent:var e=i,s=this.yw.transformEvents(t,e);if(0===s.events.length)return;s.containsUserEvent?
this.Sw(s.events):this.Ew(s.events);break;case Qt.JavascriptError:this.Aw(i);break;case Qt.ApiError:this.bw(i);break;case Qt.DetailedApiError:this.Rw(i);break;case Qt.CustomError:this.Nw(i);break;case Qt.EmerchandisingMessage:var u=this.lw.transformEvent(t,i);this.Tw(u);break;case Qt.Commands:var o=this.fw.transformEvent(t,i);this.Ow(o);break;case Qt.IntegrationCallback:this.Iw(i);break;case Qt.StaticResource:this.kw(i);break;case Qt.TrackingContextRequestMessage:this.Cw(i);break;default:un.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},
n.prototype.pw=function(t){var n=[Qt.AnalysisEvent,Qt.RecordingEvent,Qt.EmerchandisingMessage,Qt.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.mw=function(t){var n=t.message,i=t.errorCode;switch(t.level){case st.debug:un.debug(n,i);break;case st.warn:un.warn(n,i);break;case st.error:un.error(n,i);break;case st.critical:un.critical(n,i)}},n.prototype.gw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},
n.prototype.Sw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Ew=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.Aw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.bw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=
i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.Rw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.Tw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.Ow=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Iw=function(t){for(var n=
0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.kw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeStaticResource&&r.onIframeStaticResource(t)}},n.prototype.Cw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n.prototype.Nw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCustomError&&
r.onIframeCustomError(t)}},n}(Bo);!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(Ah||(Ah={}));var Ih=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this._w=new Map,i)for(var r=csString.prototype.split.call(i,"."),e=0;e<r.length;e++){var s=csString.prototype.split.call(r[e],"\x3d"),u=s[0],o=s[1];this._w.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);
return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this._w)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(Ah.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,e){var s,u=r.toString(),o="".concat(null===(s=i.constructor)||void 0===s?void 0:s.name,".").concat(u),h=e.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===
i?void 0:i.length)})(t.getString("debugLog"),n)&&(e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,X([o],t,!1)),h.bind(this).apply(void 0,t)})}},t}();function kh(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,e=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,e){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=e,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var S=function(t){return t<256?f[t]:f[256+(t>>>7)]},E=function(t,
n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},A=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){A(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do i|=1&t,t>>>=1,i<<=1;while(--n>0);return i>>>1},N=function(t,n,i){var r,s,u=new Array(16),o=0;for(r=1;r<=e;r++)u[r]=o=o+i[r-1]<<1;for(s=0;s<=n;s++){var h=t[2*s+1];0!==h&&(t[2*s]=R(u[h]++,h))}},
T=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},I=function(t,n,i,r){var e=2*n,s=2*i;return t[e]<t[s]||t[e]===t[s]&&r[n]<=r[i]},k=function(t,n,i){for(var r=t.heap[i],e=i<<1;e<=t.heap_len&&(e<t.heap_len&&I(n,t.heap[e+1],t.heap[e],t.depth)&&e++,
!I(n,r,t.heap[e],t.depth));)t.heap[i]=t.heap[e],i=e,e<<=1;t.heap[i]=r},C=function(t,i,r){var e,o,h,c,a=0;if(0!==t.last_lit){do e=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===e?b(t,o,i):(h=v[o],b(t,h+n+1,i),0!==(c=s[h])&&(o-=l[h],A(t,o,c)),e--,h=S(e),b(t,h,r),0!==(c=u[h])&&(e-=p[h],A(t,e,c)));while(a<t.last_lit)}b(t,256,i)},_=function(t,n){var i,r,s,u=n.dyn_tree,o=n.stat_desc.static_tree,h=n.stat_desc.has_stree,c=n.stat_desc.elems,a=-1;for(t.heap_len=
0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(s=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[s]=0,t.opt_len--,h&&(t.static_len-=o[2*s+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)k(t,u,i);s=c;do i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],k(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*s]=u[2*i]+u[2*r],t.depth[s]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=s,t.heap[1]=s++,k(t,u,1);while(t.heap_len>=
2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,s,u,o,h,c=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=e;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=l[r-d]),h=c[2*r],t.opt_len+=h*(u+o),v&&(t.static_len+=h*(f[2*r+1]+o)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;
t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(s=t.heap[--i])>a||(c[2*s+1]!==u&&(t.opt_len+=(u-c[2*s+1])*c[2*s],c[2*s+1]=u),r--)}}(t,n),N(u,a,t.bl_count)},P=function(t,n,i){var r,e,s=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)e=u,u=n[2*(r+1)+1],++o<h&&e===u||(o<c?t.bl_tree[2*e]+=o:0!==e?(e!==s&&t.bl_tree[2*e]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=e,0===u?(h=138,c=3):e===u?(h=
6,c=3):(h=7,c=4))},M=function(t,n,i){var r,e,s=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),r=0;r<=i;r++)if(e=u,u=n[2*(r+1)+1],!(++o<h&&e===u)){if(o<c){do b(t,e,t.bl_tree);while(0!=--o)}else 0!==e?(e!==s&&(b(t,e,t.bl_tree),o--),b(t,16,t.bl_tree),A(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),A(t,o-3,3)):(b(t,18,t.bl_tree),A(t,o-11,7));o=0,s=e,0===u?(h=138,c=3):e===u?(h=6,c=3):(h=7,c=4)}},L=!1,x=function(t,n,i,r){A(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(E(t,i),E(t,~i)),t.pending_buf.set(t.window.subarray(n,
n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){L||(!function(){var t,n,h,g,S,E=new Array(16);for(h=0,g=0;g<28;g++)for(l[g]=h,t=0;t<1<<s[g];t++)v[h++]=g;for(v[h-1]=g,S=0,g=0;g<16;g++)for(p[g]=S,t=0;t<1<<u[g];t++)f[S++]=g;for(S>>=7;g<r;g++)for(p[g]=S<<7,t=0;t<1<<u[g]-7;t++)f[256+S++]=g;for(n=0;n<=e;n++)E[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,E[8]++;for(;t<=255;)c[2*t+1]=9,t++,E[9]++;for(;t<=279;)c[2*t+1]=7,t++,E[7]++;for(;t<=287;)c[2*t+1]=8,t++,E[8]++;for(N(c,287,E),t=0;t<r;t++)a[2*t+1]=5,a[2*
t]=R(t,5);d=new m(c,s,257,i,e),w=new m(a,u,0,r,e),y=new m(new Array(0),o,0,19,7)}(),L=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,T(t)},U=function(t,i,r,e){var s,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;
return 0}(t)),_(t,t.l_desc),_(t,t.d_desc),o=function(t){var n;for(P(t,t.dyn_ltree,t.l_desc.max_code),P(t,t.dyn_dtree,t.d_desc.max_code),_(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*h[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),s=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=s&&(s=u)):s=u=r+5,r+4<=s&&-1!==i?x(t,i,r,e):4===t.strategy||u===s?(A(t,2+(e?1:0),3),C(t,c,a)):(A(t,4+(e?1:0),3),function(t,n,i,r){var e;for(A(t,n-257,5),A(t,i-1,5),A(t,r-4,4),e=0;e<r;e++)A(t,t.bl_tree[2*h[e]+1],3);M(t,t.dyn_ltree,
n-1),M(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),C(t,t.dyn_ltree,t.dyn_dtree)),T(t),e&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*S(i)]++),t.last_lit===t.lit_bufsize-1},H=function(t){A(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=
0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},z={_tr_init:D,_tr_stored_block:x,_tr_flush_block:U,_tr_tally:j,_tr_align:H},B=function(t,n,i,r){for(var e=65535&t|0,s=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2E3?2E3:i;do s=s+(e=e+n[r++]|0)|0;while(--u);e%=65521,s%=65521}return e|s<<16|0},q=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),F=function(t,n,i,r){var e=q,s=r+i;t^=-1;for(var u=
r;u<s;u++)t=t>>>8^e[255&(t^n[u])];return-1^t},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V=0,W=2,Y=3,J=4,$=0,K=1,Z=-1,X=0,Q=8,tt=z._tr_init,nt=z._tr_stored_block,it=z._tr_flush_block,rt=z._tr_tally,et=z._tr_align,st=V,ut=1,ot=Y,ht=J,ct=5,at=$,ft=K,vt=-2,lt=-3,dt=-5,wt=Z,yt=1,pt=2,mt=3,gt=4,St=X,Et=2,At=Q,bt=258,Rt=262,Nt=103,Tt=113,Ot=666,It=function(t,n){return t.msg=
G[n],n},kt=function(t){return(t<<1)-(t>4?9:0)},Ct=function(t){for(var n=t.length;--n>=0;)t[n]=0},_t=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},Pt=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},Mt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,
n),t.block_start=t.strstart,Pt(t.strm)},Lt=function(t,n){t.pending_buf[t.pending++]=n},xt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,e=t.max_chain_length,s=t.strstart,u=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,c=t.window,a=t.w_mask,f=t.prev,v=t.strstart+bt,l=c[s+u-1],d=c[s+u];t.prev_length>=t.good_match&&(e>>=2),o>t.lookahead&&(o=t.lookahead);do if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[s]&&
c[++i]===c[s+1]){s+=2,i++;do;while(c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&s<v);if(r=bt-(v-s),s=v-bt,r>u){if(t.match_start=n,u=r,r>=o)break;l=c[s+u-1],d=c[s+u]}}while((n=f[n&a])>h&&0!=--e);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,e,s,u,o,h,c,a,f=t.w_size;do{if(e=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=
f,t.block_start-=f,n=i=t.hash_size;do r=t.head[--n],t.head[n]=r>=f?r-f:0;while(--i);n=i=f;do r=t.prev[--n],t.prev[n]=r>=f?r-f:0;while(--i);e+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,h=t.strstart+t.lookahead,c=e,a=void 0,(a=u.avail_in)>c&&(a=c),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),h),1===u.state.wrap?u.adler=B(u.adler,o,a,h):2===u.state.wrap&&(u.adler=F(u.adler,o,a,h)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-
t.insert,t.ins_h=t.window[s],t.ins_h=_t(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=
t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,
t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ht?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2},Ht=function(t,n){for(var i,r,e;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],
t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){e=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=e&&(t.ins_h=_t(t,
t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Mt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Mt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=
t.strstart<2?t.strstart:2,n===ht?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2};function zt(t,n,i,r,e){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=e}var Bt=[new zt(0,0,0,0,function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===st)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=
r)&&(t.lookahead=t.strstart-r,t.strstart=r,Mt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Mt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Mt(t,!1),t.strm.avail_out),1)}),new zt(4,4,8,4,jt),new zt(4,5,16,8,jt),new zt(4,6,32,32,jt),new zt(4,4,16,16,Ht),new zt(8,16,32,32,Ht),new zt(8,16,128,128,Ht),new zt(8,32,128,256,Ht),new zt(32,128,258,1024,Ht),new zt(32,258,258,4096,Ht)];function qt(){this.strm=
null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=At,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=
0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ct(this.depth),this.l_buf=0,this.lit_bufsize=
0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ft=function(t){if(!t||!t.state)return It(t,vt);t.total_in=t.total_out=0,t.data_type=Et;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Tt,t.adler=2===n.wrap?0:1,n.last_flush=st,tt(n),at},Gt=function(t){var n=Ft(t);return n===at&&function(t){t.window_size=2*t.w_size,Ct(t.head),t.max_lazy_match=Bt[t.level].max_lazy,t.good_match=
Bt[t.level].good_length,t.nice_match=Bt[t.level].nice_length,t.max_chain_length=Bt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Vt=function(t,n,i,r,e,s){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),e<1||e>9||i!==At||r<8||r>15||n<0||n>9||s<0||s>gt)return It(t,vt);8===r&&(r=9);var o=new qt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,
o.w_mask=o.w_size-1,o.hash_bits=e+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<e+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=s,o.method=i,Gt(t)},Wt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?It(t,vt):vt;var e=
t.state;if(!t.output||!t.input&&0!==t.avail_in||e.status===Ot&&n!==ht)return It(t,0===t.avail_out?dt:vt);e.strm=t;var s=e.last_flush;if(e.last_flush=n,42===e.status)if(2===e.wrap)t.adler=0,Lt(e,31),Lt(e,139),Lt(e,8),e.gzhead?(Lt(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Lt(e,255&e.gzhead.time),Lt(e,e.gzhead.time>>8&255),Lt(e,e.gzhead.time>>16&255),Lt(e,e.gzhead.time>>24&255),Lt(e,9===e.level?2:e.strategy>=pt||e.level<2?4:0),Lt(e,255&
e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(Lt(e,255&e.gzhead.extra.length),Lt(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=F(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69):(Lt(e,0),Lt(e,0),Lt(e,0),Lt(e,0),Lt(e,0),Lt(e,9===e.level?2:e.strategy>=pt||e.level<2?4:0),Lt(e,3),e.status=Tt);else{var u=At+(e.w_bits-8<<4)<<8;u|=(e.strategy>=pt||e.level<2?0:e.level<6?1:6===e.level?2:3)<<6,0!==e.strstart&&(u|=32),u+=31-u%31,e.status=Tt,xt(e,u),0!==e.strstart&&(xt(e,t.adler>>>
16),xt(e,65535&t.adler)),t.adler=1}if(69===e.status)if(e.gzhead.extra){for(i=e.pending;e.gzindex<(65535&e.gzhead.extra.length)&&(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending!==e.pending_buf_size));)Lt(e,255&e.gzhead.extra[e.gzindex]),e.gzindex++;e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===
e.status)if(e.gzhead.name){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,Lt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){i=e.pending;do{if(e.pending===
e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,Lt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.status=Nt)}else e.status=Nt;if(e.status===Nt&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&Pt(t),e.pending+2<=e.pending_buf_size&&(Lt(e,255&t.adler),
Lt(e,t.adler>>8&255),t.adler=0,e.status=Tt)):e.status=Tt),0!==e.pending){if(Pt(t),0===t.avail_out)return e.last_flush=-1,at}else if(0===t.avail_in&&kt(n)<=kt(s)&&n!==ht)return It(t,dt);if(e.status===Ot&&0!==t.avail_in)return It(t,dt);if(0!==t.avail_in||0!==e.lookahead||n!==st&&e.status!==Ot){var o=e.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===st)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Mt(t,!1),
0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}(e,n):e.strategy===mt?function(t,n){for(var i,r,e,s,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===st)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[e=t.strstart-1])===u[++e]&&r===u[++e]&&r===u[++e]){s=t.strstart+bt;do;while(r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&
r===u[++e]&&e<s);t.match_length=bt-(s-e),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}(e,n):Bt[e.level].func(e,n);if(3!==o&&4!==o||(e.status=Ot),1===o||3===
o)return 0===t.avail_out&&(e.last_flush=-1),at;if(2===o&&(n===ut?et(e):n!==ct&&(nt(e,0,0,!1),n===ot&&(Ct(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),Pt(t),0===t.avail_out))return e.last_flush=-1,at}return n!==ht?at:e.wrap<=0?ft:(2===e.wrap?(Lt(e,255&t.adler),Lt(e,t.adler>>8&255),Lt(e,t.adler>>16&255),Lt(e,t.adler>>24&255),Lt(e,255&t.total_in),Lt(e,t.total_in>>8&255),Lt(e,t.total_in>>16&255),Lt(e,t.total_in>>24&255)):(xt(e,t.adler>>>16),xt(e,65535&t.adler)),Pt(t),e.wrap>0&&
(e.wrap=-e.wrap),0!==e.pending?at:ft)},Yt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,e=r.wrap;if(2===e||1===e&&42!==r.status||r.lookahead)return vt;if(1===e&&(t.adler=B(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===e&&(Ct(r.head),r.strstart=0,r.block_start=0,r.insert=0);var s=new Uint8Array(r.w_size);s.set(n.subarray(i-r.w_size,i),0),n=s,i=r.w_size}var u=t.avail_in,o=t.next_in,h=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,a=r.lookahead-
2;do r.ins_h=_t(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--a);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=u,r.wrap=e,at},Jt={deflateInit:function(t,n){return Vt(t,n,At,15,8,St)},deflateInit2:Vt,deflateReset:Gt,deflateResetKeep:Ft,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?
vt:(t.state.gzhead=n,at):vt},deflate:Wt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Nt&&n!==Tt&&n!==Ot?It(t,vt):(t.state=null,n===Tt?It(t,lt):at)},deflateSetDictionary:Yt,deflateInfo:"pako deflate (from Nodeca project)"},$t=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Kt={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+
"must be non-object");for(var r in i)$t(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var e=new Uint8Array(n),s=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];e.set(u,s),s+=u.length}return e}},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}for(var Xt=new Uint8Array(256),Qt=0;Qt<256;Qt++)Xt[Qt]=Qt>=252?6:Qt>=248?5:Qt>=240?4:Qt>=224?3:Qt>=192?2:1;Xt[254]=Xt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&
t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,e,s,u=t.length,o=0;for(e=0;e<u;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),s=0,e=0;s<
o;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),i<128?n[s++]=i:i<2048?(n[s++]=192|i>>>6,n[s++]=128|63&i):i<65536?(n[s++]=224|i>>>12,n[s++]=128|i>>>6&63,n[s++]=128|63&i):(n[s++]=240|i>>>18,n[s++]=128|i>>>12&63,n[s++]=128|i>>>6&63,n[s++]=128|63&i);return n},buf2string:function(t,n){var i,r,e=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var s=new Array(2*
e);for(r=0,i=0;i<e;){var u=t[i++];if(u<128)s[r++]=u;else{var o=Xt[u];if(o>4)s[r++]=65533,i+=o-1;else{for(u&=2===o?31:3===o?15:7;o>1&&i<e;)u=u<<6|63&t[i++],o--;o>1?s[r++]=65533:u<65536?s[r++]=u:(u-=65536,s[r++]=55296|u>>10&1023,s[r++]=56320|1023&u)}}}return tn(s,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Xt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=
null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,sn=V,un=W,on=Y,hn=J,cn=$,an=K,fn=Z,vn=X,ln=Q;function dn(t){this.options=Kt.assign({level:fn,method:ln,chunkSize:16384,windowBits:15,memLevel:8,strategy:vn},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,
this.strm.avail_out=0;var i=Jt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==cn)throw new Error(G[i]);if(n.header&&Jt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Jt.deflateSetDictionary(this.strm,r))!==cn)throw new Error(G[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,
n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||G[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,e=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?hn:sn,"string"==typeof t?e.input=nn.string2buf(t):"[object ArrayBuffer]"===en.call(t)?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(0===e.avail_out&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),(r===un||r===on)&&e.avail_out<=6)this.onData(e.output.subarray(0,
e.next_out)),e.avail_out=0;else{if((i=Jt.deflate(e,r))===an)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Jt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===cn;if(0!==e.avail_out)if(r>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if(0===e.avail_in)break}else this.onData(e.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===cn&&(this.result=Kt.flattenChunks(this.chunks)),this.chunks=
[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}Ih.init();var Ch=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=yn.GZIP,i.Pw=kh(),i.Mw=function(t,n,r){r(i.Pw(t,n))},i.compress=_h(),"undefined"!=typeof CompressionStream&&Kn||(i.compress=i.Mw,i.getCompressorSourceCode=function(){return kh.toString()}),i}return Y(n,t),n.prototype.compressSync=function(t,n){return this.Pw(t,n)},n.prototype.getCompressorSourceCode=
function(){return _h.toString()},n}(Rn);function _h(){return function(t,n,i){var r=(new Response(t)).body.pipeThrough(new CompressionStream("gzip")),e=(new Response(r)).arrayBuffer();"base64"!==n?e.then(function(t){return i(t)}):e.then(function(t){return n=t,new Promise(function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))});var n}).then(function(t){return i(t)})}}var Ph,Mh,Lh=function(t){function n(){var n=null!==t&&t.apply(this,
arguments)||this;return n.algorithm=yn.UNCOMPRESSED,n}return Y(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(Rn),xh=function(){function t(){}return t.create=function(t){return this.instance?this.instance:Ih.isCompressionEnabled()?this.instance=new Ch(t):new Lh(t)},t}(),Dh=function(){function t(){}return t.prototype.setItem=
function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),Uh=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),jh="_cs_cvars",Hh=function(){function t(t,n,i){this.L=
t,this.Jl=n,this.$l=i}return t.prototype.onCookieToSet=function(t){this.rd=t},t.prototype.onCookieToRemove=function(t){this.sd=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.$l.getItem(jh):this.Jl.get(jh)},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.$l.setItem(jh,t):(this.Jl.set(jh,t),null===(n=this.rd)||void 0===n||n.call(this,jh,t))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.$l.removeItem(jh):(this.Jl.delete(jh),
null===(t=this.sd)||void 0===t||t.call(this,jh))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}(),zh=["visit",2],Bh=["page",3],qh=["nextPageOnly",4],Fh=function(){function t(t,n){this.D=t,this.zl=n,this.Lw={},this.xw={}}return t.prototype.set=function(t,n,i,r){var e,s;if(t>0&&Pt(n)&&Pt(i)&&!Mt(n)&&!Mt(i)){var u=this.D.anonymizePII(csString(n)),o=this.D.anonymizePII(csString(i));if(e=[csString.prototype.slice.call(u,0,512),csString.prototype.slice.call(o,0,255)],s=""!==i,!_t(r)||
csArray.prototype.indexOf.call(zh,r)>=0){var h=this.getCustomVariablesSession();s?h[t]=e:delete h[t],this.setCustomVariableSession(h)}(!_t(r)||csArray.prototype.indexOf.call(Bh,r)>=0)&&(s?this.Lw[t]=e:delete this.Lw[t]),_t(r)&&csArray.prototype.indexOf.call(qh,r)>=0&&(s?this.xw[t]=e:delete this.xw[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.zl.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&Ct(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.zl.set(window.csJSON.stringify(t))},
t.prototype.removeCustomVariablesSession=function(){this.zl.remove()},t.prototype.removeCustomVariablesPage=function(){this.Lw={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.xw)this.xw.hasOwnProperty(n)&&(this.Lw[n]=this.xw[n]);for(var n in this.Lw)this.Lw.hasOwnProperty(n)&&(t[n]=this.Lw[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.Dw(t)};return this.Lw&&window.csJSON.stringify(this.Lw).length>2&&(i.cvarp=this.Dw(this.Lw)),
i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.xw).length>0)for(var t in this.xw)this.xw[t]===this.Lw[t]&&(delete this.Lw[t],delete this.xw[t])},t.prototype.Dw=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],e=r[0],s=r[1];o=1,h=20,(!(It(u=i)&&u>=o&&u<=h)||e.length>512||s.length>255)&&delete t[n]}var u,o,h,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),Gh=["setCustomVariable"],Vh=function(){function t(t,
n){this.Yh=t,this.en=n}return t.prototype.init=function(){var t=this;this.Yh.register(Gh,function(n,i,r,e){t.en.set(n,i,r,e)})},t.prototype.onAfterArtificialPageView=function(){this.en.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.en.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.en.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.en.removeCustomVariablesSession(),this.en.removeCustomVariablesPage()},
t}(),Wh="_cs_id",Yh=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?$/,Jh=function(){function t(t,n,i){this.L=t,this.Jl=n,this.$l=i}return t.prototype.onCookieToSet=function(t){this.rd=t},t.prototype.onCookieToRemove=function(t){this.sd=t},t.prototype.get=function(){var n;return(n=this.L.cookielessTrackingEnabled?this.$l.getItem(Wh):this.Jl.get(Wh))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.L.cookielessTrackingEnabled)this.$l.setItem(Wh,r);else{var e=
new csDate(n.expires);this.Jl.set(Wh,r,e),null===(i=this.rd)||void 0===i||i.call(this,Wh,r,e)}},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.$l.removeItem(Wh):(this.Jl.delete(Wh),null===(t=this.sd)||void 0===t||t.call(this,Wh))},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get();t&&(t.allowSubdomains=this.L.allowSubdomains,this.L.allowSubdomains?this.Jl.delete(Wh,ln.CURRENT_DOMAIN):this.Jl.delete(Wh,this.Jl.getRootDomain()),
this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4],o=n[5],h=n[6],c=n[7];return{id:i,creationTimestamp:Number(r),visitsCount:Number(e),hitTimestamp:Number(s),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(h),allowSubdomains:void 0===c?void 0:!!Number(c)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,
t.expires,t.allowSubdomains?1:0],".")},t.isValidVisitorString=function(t){return Yh.test(t)},t}(),$h=function(){function t(t){this.D=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,e=csString.prototype.split.call(n,"/");r<e.length;r++){var s=e[r];nt(s,t.Uw)?csArray.prototype.push.call(i,{key:s,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(s,1)))}):csArray.prototype.push.call(i,{key:s,value:null})}return i},t.prototype.anonymizeUrl=
function(t,n){var i=this.D.anonymizePII(t);return i=this.D.anonymizeJwt(i),n.length>0?this.jw(i,n):i},t.prototype.removeQueryString=function(t){var n=this.Hw(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.Hw=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.jw=function(t,n){for(var i=this.Hw(t),r=i.path,e=i.queryString,s=
csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var h=o[u],c=this.zw(s,h);if(null!==c)return"".concat(c).concat(e)}return t},t.prototype.zw=function(n,i){if(n.length<i.length)return null;for(var r="",e=0;e<n.length;e+=1)if(e>=i.length)r+="".concat(n[e],"/");else if(nt(i[e].key,t.Uw))r+="".concat(i[e].value,"/");else{if(n[e]!==i[e].key)return null;r+="".concat(n[e],"/")}return csString.prototype.slice.call(r,0,-1)},t.Uw=":",t}(),Kh=function(){function t(t,n){this.$c=t,this.L=n}return t.prototype.getEventTargetPath=
function(t){var n=Yn(t);return this.$c.getElementPath(n,J({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=Yn(t),i=this.$c.getElementPathAndFirstAnchorParent(n,J({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules)),r=i.path,e=i.firstAnchorParent;return{path:r,targetLink:this.Bw(e)?e.href:""}},t.prototype.hasValidEventTarget=function(t){var n=Yn(t);return this.$c.isValidElement(n)},t.prototype.getElementPath=
function(t){return this.$c.getElementPath(t,J({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.Bw=function(t){var n;return null!==t&&t.hasAttribute("href")&&!nt(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),Zh=function(){function t(t){this.ja=t}return t.prototype.transformEvent=function(t,n){var i=this.qw(t,n),r=this.ja.getElementPath(t);return this.Fw(r,i)},t.prototype.qw=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();
n.x=Math.round(i.left+n.x+xi.windowOffsetX()),n.y=Math.round(i.top+n.y+xi.windowOffsetY())}return n},t.prototype.Fw=function(t,n){return Ss(n)&&(n.tgt="".concat(t).concat(Th).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(Th).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(Th).concat(n.tgtLk)),n},t}(),Xh=function(){function t(t){this.ja=t}return t.prototype.transformEvent=function(t,n){var i=this.ja.getElementPath(t);return{iframePath:n.iframePath?
"".concat(i).concat(Th).concat(n.iframePath):i,commands:n.commands}},t}(),Qh=function(){function t(t){this.ja=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.ja.getElementPath(t),r=csArray.prototype.map.call(n.products,function(t){return J(J({},t),{targetPath:"".concat(i).concat(Th).concat(t.targetPath)})});return J(J({},n),{products:r})},t}(),tc=function(){function t(t){this.hn=t,this.Gw={clientX:2,clientY:3},this.Vw={clientX:1,clientY:2},this.Ww=[Sn.POINTER_DOWN,
Sn.POINTER_MOVE,Sn.POINTER_UP],this.Yw=[Sn.TOUCH_START,Sn.TOUCH_MOVE,Sn.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!Bi.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,function(t){return t.type!==Sn.VISIBILITY_CHANGE}),0===n.events.length||(un.warn("IframeRecordingEventsTransformer received event ".concat(Qt.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.hn.getId(t);if(void 0===
r)return un.error("IframeRecordingEventsTransformer received event ".concat(Qt.RecordingEvent,"\n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var e=null;csArray.prototype.some.call(n.events,function(t){return i.Jw(t)||i.$w(t)})&&(e=t.getBoundingClientRect());for(var s=0,u=n.events;s<u.length;s++){var o=u[s];this.Jw(o)?this.Kw(e,o):this.$w(o)&&this.Zw(e,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},
t.prototype.Zw=function(t,n){this.Xw(this.Vw,t,n)},t.prototype.Kw=function(t,n){this.Xw(this.Gw,t,n)},t.prototype.Xw=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.Jw=function(t){return-1!==csArray.prototype.indexOf.call(this.Ww,t.type)},t.prototype.$w=function(t){return-1!==csArray.prototype.indexOf.call(this.Yw,t.type)},t}(),nc=function(){function t(t){this.Qw=t}return t.prototype.start=function(){var t=
this;this.Qw.onEvent(function(n){return t.Ur(n)}),this.Qw.start()},t.prototype.stop=function(){this.Qw.stop()},t.prototype.Ur=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);un.warn(n)},t}(),ic=function(){function t(){var t=this;this.ty={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){In(this.ty)},t.prototype.stop=
function(){kn(this.ty)},t.prototype.onEvent=function(t){this.Hn=t},t.prototype.ny=function(n){if(!n)return!1;var i=n.disposition;return kt(n.sourceFile)&&csArray.prototype.some.call(t.iy,function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0})&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.ny(t)&&this.Hn({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.iy=["contentsquare","cdnssl.clicktale.net"],$([vn("Event handler type: securitypolicyviolation")],
t.prototype,"securityPolicyViolationListener",null),t}(),rc=function(){function t(){}return t.prototype.init=function(){this.ey=new nc(new ic),this.ey.start()},t.prototype.onOptout=function(){this.ey.stop()},t}(),ec=function(){function t(t,n,i,r){this.L=t,this.tt=n,this.U=i,this.hs=r}return t.prototype.init=function(){var t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,S,E,A,b,R,N,T,O,I,k,C,_,P,M=this;this.hs.schedule(function(){t=new qo(M.hs),n=new gt,i=new $h(n),e=new bh(window.location,i),(r=new ln(M.L,
e,M.tt)).init()}),this.hs.schedule(function(){s=new Dh,u=new Uh,p=new ah(window.location,r),(new rc).init(),m=xh.create(un.warn);var n=(y=new Tn(m)).create("".concat(M.L.getQuotaServiceUri(),"/quota"),!0);(c=new Nh(M.L,n,t,p,e)).init()}),this.hs.schedule(function(){o=new Do(M.L,r,s),h=new jo(o,c)}),this.hs.schedule(function(){a=new Jh(M.L,r,s),f=new Co(M.L,a,h,t),M.U.setContext(f,h),c.setVisitorService(f)}),this.hs.schedule(function(){P=new Xo(M.L,new Vo(M.L,r,u),t),v=new zo(f,h,P),l=new rh(M.L,r,
s),d=new eh(window.location,l),w=new sh(d),g=new Ho(M.L,f,d);var i=new xe;C=new Kh(q,M.L),N=new Zh(C),T=new Xh(C),O=new Qh(C),I=new tc(i),k=new Oh(N,T,O,I),R=new mh([ph.UXA]),S=new yh(R,k),E=new uh(e),A=new hh(E,R);var o=new Hh(M.L,r,s);_=new Fh(n,o),b=new Vh(R,_);new On(f,h,d,_,M.L)}),this.hs.schedule(function(){(new Io(M.L,f,d,g,v,undefined,undefined,p)).compute(function(s){M.hs.schedule(function(){S.init();var o=new Rh,c=new Zo(M.L,R,P,h,t),a=new vh(M.L,r,u),v=new lh(t,window.location,a),l=new wh(R,
v),d=new Sh(R,M.L);var p=new gh(M.L,f,h,undefined);s?(t.emitInitTracking(),(new Oo(p,m,f,h,t,R,S,M.L,l,v,c,P,n,C,i,e,d,o,k,_,b,E,A,M.hs,y)).start()):(new Qo(t,R,S,l,v,w,c)).start()})})})},t}();!function(t){var n,i="{domain}/tag/bridge.html?v\x3d{version}#{token}",r={loadBundle:function(t){var o=t.source,h=t.data;if(s(h)){var f=function(){var n,i,r,s=e("{domain}/tag/tag.bundle.js?v\x3d{version}",h);n=s,i=function(){return o.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type=
"text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=h.token,a(r.loadBundle),u(t.origin)?f():function(t,n){var r=e(i,t),s=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===s.contentWindow&&"TOKEN_VALID"===t.data&&(a(u),s.remove(),n())};c(u),document.head.appendChild(s)}(h,f)}}};function e(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,
"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function s(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&h(t.version)&&o(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(t)}function o(t){return/^[a-zA-Z0-9]+$/.test(t)}function h(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function a(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=
s,t.isAuthorizedDomain=u,t.isAuthorizedToken=o,t.isAuthorizedTagVersion=h,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=a}(Ph||(Ph={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/],
e={ping:function(t){"ping"===t.data&&s(t.origin)&&(n=t.origin,h(e.ping),o(e.insertMessageScript),u("".concat("utils.js","?cb\x3d").concat((new csDate).getTime())))},insertMessageScript:c(function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(e.insertMessageScript),u(n))})};function s(t){return csArray.prototype.some.call(r,function(n){return n.test(t)})}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var e=csString.prototype.replace.call(n,/^https?:/,
"");r.src="".concat(e,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function o(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Ph.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=s,t.waitForConnection=function(){o(e.ping),Ph.waitForBundleInjection()},
t.listen=o,t.removeListener=h,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(Mh||(Mh={}));var sc,uc=window.CSFrameCommunication||Mh,oc=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this.sy=t,this.uy=n,this.oy=i,this.hy=new pi,this.K=!1,this.vy=0,this.ly=function(){for(r.vy=0;r.hy.length;){if(r.vy>=r.uy)return void setTimeout(r.ly,r.oy);var t=At(),n=r.hy.pop();if(!n)break;r.runTask(n);var i=At()-t;r.vy+=i}r.K=!1}}return t.prototype.schedule=function(t,
n){void 0===n&&(n=!1),this.sy&&!n?(this.hy.push(t),this.wy()):t()},t.prototype.wy=function(){var t=this;this.K||(this.K=!0,setTimeout(function(){t.ly()}))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;this.hy.forEach(function(n){t.runTask(n)}),this.hy.clear()},t.prototype.clearQueue=function(){this.hy.clear()},t.prototype.isEmpty=function(){return 0===this.hy.length},$([vn("TaskScheduler"),Vn("runTask")],t.prototype,"runTask",null),$([Vn("runPendingTasks")],
t.prototype,"runPendingTasks",null),t}(),hc=function(){function t(t,n,i){this.L=t,this.wt=n,this.U=i}return t.prototype.start=function(){var t,n,i,r,e;if(!window.UXAnalytics){var s=new oc(!!(null===(t=this.L.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.L.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.L.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new wn(this.wt,this.L);u.init();var o=new pn(this.L,u);if(this.wt.isTopWindowTracker()&&
o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&un.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(e=window.CSProtectnativeFunctionsLogs)||void 0===e?void 0:e.Critical)return void un.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));(new ec(this.L,u,this.U,s)).init()}else;window.UXAnalytics={},!window.CSFrameCommunication&&uc.isActivable()&&(window.CSFrameCommunication=
uc,uc.waitForConnection())}},$([Vn("main.start"),vn("main.start")],t.prototype,"start",null),t}();!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.getBridgeVersion=
function(){if("function"==typeof window.CSJavascriptBridge.getVersion)try{var t=window.CSJavascriptBridge.getVersion();if(Ot(t))return t}catch(t){un.warn("an error occurred when calling getVersion")}return null},t.notifyIsReadyForTracking=function(){"function"==typeof window.CSJavascriptBridge.onWebviewTrackingReady&&window.CSJavascriptBridge.onWebviewTrackingReady()},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=
0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i){window.CSJavascriptBridge.sendTransaction(t,
n,i)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,function(t){return t.assetId}))},t.sendNativeSREvent=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(t))}}(sc||(sc={}));var cc,ac,fc=function(){function t(){}
return t.prototype.send=function(t,n,i){void 0===i&&(i=st.warn);var r={message:t,errorCode:n,level:i};sc.sendLog(r)},t}();try{var vc=new ht(window.CS_CONF);window._uxa=window._uxa||[],vc.processOptionOverrides(window._uxa);var lc=new ct(window,vc);lc.init();var dc=new en;if(on=un,un.computeIsActive(vc.validationRate),lc.isTopWindowTracker()){var wc=new zt(vc,dc);un.setStrategy(wc)}else if(lc.isInIframeContext()){var yc=new rn(vc);un.setStrategy(yc)}else if(lc.isInWebViewContext()){var pc=new fc;un.setStrategy(pc)}void 0===
cc&&(cc=50),void 0===ac&&(ac=.1),qn=un.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),qn&&(zn=cc,Bn=ac),(new hc(vc,lc,dc)).start()}catch(Oi){}}()},4064995,[3914557,3960553],667725,[663838,664338]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-resumed",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event114"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.pageName=
function anon(){window.scFormDebug="Form Progessed - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="Form Progessed - Senario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section}else if(typeof s.parseDataLayer("page")!="undefined"&&s.parseDataLayer("page")!="unknown page")if(s.parseDataLayer("page").substring(0,
4)==="nab:"){window.scFormDebug="Form Progessed - Scenario 2: page is set - full path";return s.parseDataLayer("page").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 2: page is set - append";return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("page").replace(/\s+/g,"-").replace(/39/g,"")}else if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName")if(s.parseDataLayer("pageName").substring(0,4)===
"nab:"){window.scFormDebug="Form Progessed - Scenario 3: pageName is set - full path";return s.parseDataLayer("pageName").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 3: pageName is set - append";return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("pageName").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 4: no match";return false}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);
s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,pageName,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event114"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628010,685949);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(typeof window.s!="undefined"&&typeof window.s._referrer!="undefined")return encodeURI(window.s._referrer);else if(document.referrer){var a=document.createElement("a");a.href=document.referrer;return encodeURI(a.hostname+a.pathname)}return""}catch(err){return""}},transform:function(val){return val?
val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - S Referrer",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"65600"})},65600)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - modal-survey-presented",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";_linkTrackVars+="events,eVar46,prop9,eVar9";_linkTrackEvents+="event27";var _events="event27";var tempObject={};tempObject.linkTrackVars=
_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46=function anon(){var surveyID=s.parseDataLayer("surveyID");return surveyID}.call(this);tempObject.prop9="D\x3dpageName";tempObject.eVar9="D\x3dpageName";s.tl(this,"o","modal-survey-presented",tempObject)})},2715900,574998);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - welcome-screen|clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event121";_events+="event121";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","welcome-screen|clicked",tempObject)})},3785217,695636);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - application-form2-complete",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";var depositAmount="";uniqueReference=
s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var applicationSerialise="";var applicationSerialise="";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);
applicationSerialise=":"+applicationSerialise}if(s_parseDataLayerAmountAppliedFor("form-interacted","form-completed")!==false){var eventString="";if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");if(typeof dob!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+dob;else eventString="event1,event13"+applicationSerialise+",event14"}else if(applicationSerialise!=""){var dob=s_parseDataLayerUserObj("form-interacted",
"dob","form-completed");eventString="event1,event13"+applicationSerialise+",event14";if(typeof dob!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+dob}else eventString="event1,event13,event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");if(s.parseDataLayer("transaction_amount_accepted")!=
"unknown transaction_amount_accepted"){var acceptedAmount=parseInt(s.parseDataLayer("transaction_amount_accepted"));if(typeof acceptedAmount=="number"&&acceptedAmount>0){eventString+=",event60\x3d"+acceptedAmount;if(s.parseDataLayer("transaction_amount_approved")!="unknown transaction_amount_approved"){var approvedAmount=parseInt(s.parseDataLayer("transaction_amount_approved"));if(typeof approvedAmount=="number"&&approvedAmount>0&&acceptedAmount!=approvedAmount)eventString+=",event61"}}}var eventId=
"";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&
serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}var terminal_event_count="";var formName=s_parseDataLayer("name");if(formName=="Merchant and Payents Online Application"&&typeof digitalData.product[0].quantityField!="undefined"&&typeof digitalData.product[0].quantityField.val!=
"undefined"&&digitalData.product[0].quantityField.val[0]!="undefined")terminal_event_count=",event48\x3d"+digitalData.product[0].quantityField.val[0];if(s_parseDataLayerCustomValueExists("depositAmount")===true)depositAmount=",event89\x3d"+s_parseDataLayerCustomValue("depositAmount");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!="unknown uniqueReference")return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount;else if(typeof ticketId!="undefined"&&
ticketId!==""&&ticketId!="unknown ticket_id"){ticketId=ticketId.replace(/NAB\-/i,"");return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount}else return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount}catch(err){return"event1,event13"}}.call(this);s.pageName=function anon(){if(typeof s.getPageNameFromDL()!="undefined")return s.getPageNameFromDL().replace(/:start$/,"").replace(/:privacy$/,"").replace(/\s+/g,"-")+":thankyou"}.call(this);s.eVar20=function anon(){try{if(s.parseDataLayer("name")==
"Small Business Lending Online Application"||s.parseDataLayer("name")=="Small Business Lending Broker Online Application")if(typeof s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","form-completed")!="undefined")return s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","form-completed");else{if(typeof s_parseDataLayerUserObj("form-interacted","applicantLiability","form-completed")!="undefined")return s_parseDataLayerUserObj("form-interacted","applicantLiability",
"form-completed")}else{var applicantLiability=s_parseDataLayerUserObj("form-interacted","applicantLiability","form-completed");var applicantLiabilityDesc=s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","form-completed");if(typeof applicantLiability=="string")return applicantLiability.charAt(0).toUpperCase()+applicantLiability.slice(1);else if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-
1];if(lastEventObject.data["user"].applicantLiability)return lastEventObject.data["user"].applicantLiability;else if(typeof applicantLiabilityDesc=="string")return applicantLiabilityDesc;else if(typeof window.sc_applicant_liability!="undefined")return window.sc_applicant_liability;else return""}else if(typeof window.sc_applicant_liability!="undefined")return window.sc_applicant_liability;else return""}}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=
s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop33=function anon(){try{var formAbandonStartedFormName=s_parseDataLayerCustomValue("formAbandonStartedFormName");var formStartTime=s_parseDataLayerCustomValue("formStartTime");if(formAbandonStartedFormName!==false&&formStartTime!==false){var formAbandonCompletedFormName=
s_parseDataLayer("name");if(formAbandonStartedFormName==formAbandonCompletedFormName){var currentTime=Math.round((new Date).getTime()/1E3);if(currentTime)return currentTime-formStartTime}}return""}catch(err){return""}}.call(this);s.eVar52=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined")for(var i=digitalData.event.length-1;i>=0;i--){if(digitalData.event[i].eventType=="form-interacted")if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!=
"undefined")if(digitalData.event[i].data.action=="form-completed")if(typeof digitalData.event[i].data.transaction_result!="undefined")return digitalData.event[i].data.transaction_result;else return false}else return false}catch(err){return false}}.call(this);s.eVar15=function anon(){try{var gender=s_parseDataLayerUserObj("form-interacted","gender","form-completed");if(typeof gender=="string")return gender;else if(typeof window.sc_applicant_gender!="undefined")return window.sc_applicant_gender;else return""}catch(err){return""}}.call(this);
s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted","age","form-completed");var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");if(typeof age!="undefined"&&age!==false)return age;else if(typeof dob!="undefined"&&dob!==false)return dob;else if(typeof window.sc_applicant_age!="undefined")return window.sc_applicant_age;else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state",
"form-completed");if(typeof state!="undefined")return state;else if(typeof window.sc_applicant_state!="undefined")return window.sc_applicant_state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","form-completed");if(typeof postcode!="undefined")return postcode;else if(typeof window.sc_applicant_postcode!="undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.eVar19=
function anon(){try{var type=s_parseDataLayerUserObj("form-interacted","type","form-completed");if(typeof type=="string")return type.charAt(0).toUpperCase()+type.slice(1);else if(typeof window.sc_customer_type!="undefined")return window.sc_customer_type;else return""}catch(err){return""}}.call(this);s.products=function anon(){try{var dlName="";if(typeof s_parseDataLayer=="function")dlName=s_parseDataLayer("name");if(s_parseDataLayerProductId("form-interacted","form-completed")!==false){var prodString=
"";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor!="maximum")prodString=";"+s_parseDataLayerProductId("form-interacted","form-completed")+";;;event14\x3d"+dl_AmountAppliedFor;else prodString=";"+s_parseDataLayerProductId("form-interacted","form-completed");var productArray=s.parseDataLayer("products");if(typeof productArray=="object"&&typeof productArray[1]=="object"&&
prodString!="")for(var j=1;j<productArray.length;j++)if(typeof productArray[j]!="undefined")if(typeof productArray[j]["subProduct"]!="undefined"&&productArray[j]["subProduct"]!=="")prodString+=",;"+productArray[j]["subProduct"];else if(typeof productArray[j]["product"]!="undefined"&&productArray[j]["product"]!=="")prodString+=",;"+productArray[j]["product"];else if(typeof productArray[j]["product-id"]!="undefined"&&productArray[j]["product-id"]!=="")prodString+=",;"+productArray[j]["product-id"];
var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount"&&parseInt(balanceTransferAmount)>0)prodString+=",;balanceTransfer"+";;;event74\x3d"+balanceTransferAmount;return prodString}var productText=s.parseDataLayer("productName");if(productText&&productText!="unknown productName")return";"+productText;else if(typeof digitalData!="undefined"&&typeof digitalData.page!=
"undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"&&typeof digitalData.page.pageInfo.customValues["productName"]!="undefined")return";"+digitalData.page.pageInfo.customValues["productName"];else if(typeof digitalData!="undefined"&&typeof digitalData.product!="undefined"&&typeof digitalData.product[0]!="undefined"){var prodString="";for(var iP=0;iP<digitalData.product.length;iP++){var formName=s_parseDataLayer("name");if(formName==
"Merchant and Payments Online Application"&&typeof digitalData.product[iP].cmsIdentifier!="undefined"&&digitalData.product[iP].cmsIdentifier){prodString+=";"+digitalData.product[iP].cmsIdentifier+",";if(typeof digitalData.product[iP].quantityField!="undefined"&&typeof digitalData.product[iP].quantityField.val!="undefined"&&digitalData.product[iP].quantityField.val[0]!="undefined")prodString+=";terminals,"}else if(typeof digitalData.product[iP].productId!="undefined"&&digitalData.product[iP].productId)prodString+=
";"+digitalData.product[iP].productId+",";else if(typeof digitalData.product[iP].cmsIdentifier!="undefined"&&digitalData.product[iP].cmsIdentifier!="")prodString+=";"+digitalData.product[iP].cmsIdentifier+","}return prodString}else if(typeof window.sc_application_product!="undefined")return";"+window.sc_application_product}catch(err){return""}}.call(this);s.prop50="D\x3devents";s.list3=function anon(){try{var propertyReason=s_parseDataLayerCustomValue("propertyReason");if(typeof propertyReason=="string"&&
propertyReason!="")return propertyReason;else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,
"");else return""}else return""}catch(err){return""}}.call(this);s.eVar83=function anon(){var depositAmount=s_parseDataLayerCustomValue("depositAmount");var depositTerm=s_parseDataLayerCustomValue("depositTerm");var purpose=s.parseDataLayer("purpose");if(typeof depositAmount==="string"&&typeof depositTerm==="string")return"Term Deposit|"+depositTerm+"|"+depositAmount;else if(typeof purpose=="string"&&purpose!="unknown purpose")return purpose;else if(s.parseDataLayer("purposeAndTerm")!="unknown purposeAndTerm")return s.parseDataLayer("purposeAndTerm");
else return""}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,prop33,eVar52,eVar15,eVar16,eVar17,eVar18,eVar19,products,prop50,list3,eVar56,eVar83,eVar87,eVar28";
s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";var depositAmount="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var applicationSerialise=
"";var applicationSerialise="";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);applicationSerialise=":"+applicationSerialise}if(s_parseDataLayerAmountAppliedFor("form-interacted","form-completed")!==false){var eventString=
"";if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");if(typeof dob!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+dob;else eventString="event1,event13"+applicationSerialise+",event14"}else if(applicationSerialise!=""){var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");eventString="event1,event13"+applicationSerialise+",event14";if(typeof dob!="undefined")eventString=
"event1,event13"+applicationSerialise+",event14,event15\x3d"+dob}else eventString="event1,event13,event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");if(s.parseDataLayer("transaction_amount_accepted")!="unknown transaction_amount_accepted"){var acceptedAmount=parseInt(s.parseDataLayer("transaction_amount_accepted"));
if(typeof acceptedAmount=="number"&&acceptedAmount>0){eventString+=",event60\x3d"+acceptedAmount;if(s.parseDataLayer("transaction_amount_approved")!="unknown transaction_amount_approved"){var approvedAmount=parseInt(s.parseDataLayer("transaction_amount_approved"));if(typeof approvedAmount=="number"&&approvedAmount>0&&acceptedAmount!=approvedAmount)eventString+=",event61"}}}var eventId="";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=
s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&
balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}var terminal_event_count="";var formName=s_parseDataLayer("name");if(formName=="Merchant and Payents Online Application"&&typeof digitalData.product[0].quantityField!="undefined"&&typeof digitalData.product[0].quantityField.val!="undefined"&&digitalData.product[0].quantityField.val[0]!="undefined")terminal_event_count=",event48\x3d"+digitalData.product[0].quantityField.val[0];
if(s_parseDataLayerCustomValueExists("depositAmount")===true)depositAmount=",event89\x3d"+s_parseDataLayerCustomValue("depositAmount");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!="unknown uniqueReference")return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount;else if(typeof ticketId!="undefined"&&ticketId!==""&&ticketId!="unknown ticket_id"){ticketId=ticketId.replace(/NAB\-/i,"");return"event1,event13"+applicationSerialise+terminal_event_count+
depositAmount}else return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount}catch(err){return"event1,event13"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3965966,374270);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.on("click","aef",function(){Bootstrapper.ensEvent.trigger("test event",this)},true)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - livechat-started",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop21,eVar21,prop80,prop65,eVar65";_linkTrackEvents+="event83,event5";
_events+="event83,event5";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop21="Live Chat";tempObject.eVar21="D\x3dc21";tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var prop65=s_parseDataLayer("action")+
":Agent";return prop65}.call(this);tempObject.eVar65="D\x3dc65";s.tl(this,"o","livechat-started",tempObject)})},3785213,533848);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - prospect-form-complete",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var uniqueReference="";var ticketId="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!=
"unknown uniqueReference"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+uniqueReference;else if(typeof ticketId!="undefined"&&ticketId!==""&&ticketId!="unknown ticket_id"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+ticketId;else return"event1,event42"}catch(err){return"event1,event42"}}.call(this);s.eVar51=function anon(){return s.parseDataLayer("name")}.call(this);s.eVar24="Website";s.pageName=function anon(){return"nab:enquiry-forms:"+s.parseDataLayer("name").replace(/:start$/,
"").replace(/\s+/g,"-")+":thankyou"}.call(this);s.prop9="D\x3dpageName";s.eVar9="D\x3dpageName";s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","form-completed");if(typeof postcode!="undefined"&&postcode!==false)return postcode;else if(typeof window.sc_applicant_postcode!="undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.prop66=function anon(){try{if(typeof s_covid_addProducts==="function"&&typeof s_covid_getHLRepaymentPauseDuration===
"function"&&typeof s_covid_getPLRepaymentReduction==="function"&&typeof s_covid_getBusinessSupportLoanValue==="function")return s_covid_addProducts()+s_covid_getHLRepaymentPauseDuration()+s_covid_getPLRepaymentReduction()+s_covid_getBusinessSupportLoanValue();if(typeof s_covid_getBusinessSupportLoanValue==="function"&&typeof s_covid_addProducts!="function"&&typeof s_covid_getHLRepaymentPauseDuration!="function"&&typeof s_covid_getPLRepaymentReduction!="function")return s_covid_getBusinessSupportLoanValue();
var productService=s_parseDataLayerCustomValue("productService");if(typeof productService==="string")return productService;if(s_parseDataLayer("name")=="Compliments and Complaints Feedback"){var feedbackProduct=s_parseDataLayer("productsAndServices");var feedbackResult=feedbackProduct["product-id"];return feedbackResult}var product="";var prodString="";if(s_parseDataLayer("products")!="unknown products")product=s_parseDataLayer("products");else if(s_parseDataLayer("product")!="unknown product")product=
s_parseDataLayer("product");else if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices")product=s_parseDataLayer("productsAndServices");if(typeof product=="object"&&product.length>0)for(var i=0;i<product.length;i++){if(typeof product[i]["product-id"]!="undefined")prodString+=product[i]["product-id"]+",";if(typeof product[i]["topic"]!="undefined")prodString+=product[i]["topic"]+","}return prodString.replace(/,+$/,"")}catch(err){return""}}.call(this);s.list3="D\x3dc66";s.eVar65=function anon(){try{var product=
s_parseDataLayer("productsAndServices");if(typeof s_parseDataLayerCustomValue("contactAcceptance")=="string"){var fieldValue=s_parseDataLayerCustomValue("contactAcceptance");return fieldValue}else if(s.parseDataLayer("userAction")!="unknown userAction")return s.parseDataLayer("userAction");else if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices"&&typeof product[0].name!="undefined"&&typeof product[0].method!="undefined"&&typeof product[0].dayOfWeek!="undefined"){var product=
s_parseDataLayer("productsAndServices");return product[0].name+"|"+product[0].method+"|"+product[0].dayOfWeek+"|"+product[0].time}else return""}catch(err){return""}}.call(this);s.eVar4=function anon(){try{if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices")if(s_parseDataLayer("name")=="Banker Appointment Booking Tool"||s_parseDataLayer("name")=="Business Appointment Booking Form"||s_parseDataLayer("name")=="Business Banker Appointment Booking Tool"){var product=s_parseDataLayer("productsAndServices");
var formName=s_parseDataLayer("name");return formName+"|"+product[0].postcode+"|"+product[0].locality}else return"";else return""}catch(err){return""}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar51,events,eVar24,pageName,prop9,eVar9,eVar18,prop66,list3,eVar65,eVar4";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var uniqueReference=
"";var ticketId="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!="unknown uniqueReference"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+uniqueReference;else if(typeof ticketId!="undefined"&&ticketId!==""&&ticketId!="unknown ticket_id"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+ticketId;else return"event1,event42"}catch(err){return"event1,event42"}}.call(this).replace(/(=.*?,|=.*?$)/g,
",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3981672,355922);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - lead-submitted",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event50"}.call(this);s.eVar24="Website";s.eVar23=function anon(){return s.parseDataLayer("name")}.call(this);s.prop9="D\x3dpageName";s.eVar9="D\x3dpageName";s.pageName=function anon(){return"nab:online-forms:"+
s.parseDataLayer("name").replace(/:start$/,"").replace(/\s+/g,"-")+":lead-submitted"}.call(this);s.products=function anon(){try{var prodString="";if(typeof digitalData!="undefined"&&typeof digitalData.product!="undefined"&&typeof digitalData.product[0]!="undefined")for(var iP=0;iP<digitalData.product.length;iP++)if(typeof digitalData.product[iP].productId!="undefined"&&digitalData.product[iP].productId)prodString+=";"+digitalData.product[iP].productId+",";return prodString}catch(err){return""}}.call(this);
s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted","age","lead-completed");if(typeof age!="undefined"&&age!==false)return age;else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state","lead-completed");if(typeof state!="undefined"&&state!==false)return state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode",
"lead-completed");if(typeof postcode!="undefined"&&postcode!==false)return postcode;else return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var type=s_parseDataLayerUserObj("form-interacted","type","lead-completed");if(typeof type!="undefined"&&type!==false)return type;else return""}catch(err){return""}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar24,eVar23,events,prop9,eVar9,pageName,products,eVar16,eVar17,eVar18,eVar19";
s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event1,event50"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2728681,450596);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - proactive-offer|closed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event126";_events+="event126";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","proactive-offer|closed",tempObject)})},3785221,695641);Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;_NABTags.getHashedData()},4021334,[4062639],761774,[639227]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-accepted",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event134"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop33=function anon(){try{var formAbandonStartedFormName=s_parseDataLayerCustomValue("formAbandonStartedFormName");var formStartTime=s_parseDataLayerCustomValue("formStartTime");if(formAbandonStartedFormName!==false&&formStartTime!==false){var formAbandonCompletedFormName=s_parseDataLayer("name");if(formAbandonStartedFormName==formAbandonCompletedFormName){var currentTime=
Math.round((new Date).getTime()/1E3);if(currentTime)return currentTime-formStartTime}}return""}catch(err){return""}}.call(this);s.products=function anon(){try{var dlName="";if(typeof s_parseDataLayer=="function")dlName=s_parseDataLayer("name");if(s_parseDataLayerProductId("form-interacted","form-completed")!==false){var prodString="";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&
dl_AmountAppliedFor!="maximum")prodString=";"+s_parseDataLayerProductId("form-interacted","form-completed")+";;;event14\x3d"+dl_AmountAppliedFor;else prodString=";"+s_parseDataLayerProductId("form-interacted","form-completed");var productArray=s.parseDataLayer("products");if(typeof productArray=="object"&&typeof productArray[1]=="object"&&prodString!="")for(var j=1;j<productArray.length;j++)if(typeof productArray[j]!="undefined")if(typeof productArray[j]["subProduct"]!="undefined"&&productArray[j]["subProduct"]!==
"")prodString+=",;"+productArray[j]["subProduct"];else if(typeof productArray[j]["product"]!="undefined"&&productArray[j]["product"]!=="")prodString+=",;"+productArray[j]["product"];else if(typeof productArray[j]["product-id"]!="undefined"&&productArray[j]["product-id"]!=="")prodString+=",;"+productArray[j]["product-id"];var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount"&&
parseInt(balanceTransferAmount)>0)prodString+=",;balanceTransfer"+";;;event74\x3d"+balanceTransferAmount;return prodString}var productText=s.parseDataLayer("productName");if(productText&&productText!="unknown productName")return";"+productText;else if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"&&typeof digitalData.page.pageInfo.customValues["productName"]!="undefined")return";"+
digitalData.page.pageInfo.customValues["productName"];else if(typeof digitalData!="undefined"&&typeof digitalData.product!="undefined"&&typeof digitalData.product[0]!="undefined"){var prodString="";for(var iP=0;iP<digitalData.product.length;iP++){var formName=s_parseDataLayer("name");if(formName=="Merchant and Payments Online Application"&&typeof digitalData.product[iP].cmsIdentifier!="undefined"&&digitalData.product[iP].cmsIdentifier){prodString+=";"+digitalData.product[iP].cmsIdentifier+",";if(typeof digitalData.product[iP].quantityField!=
"undefined"&&typeof digitalData.product[iP].quantityField.val!="undefined"&&digitalData.product[iP].quantityField.val[0]!="undefined")prodString+=";terminals,"}else if(typeof digitalData.product[iP].productId!="undefined"&&digitalData.product[iP].productId)prodString+=";"+digitalData.product[iP].productId+",";else if(typeof digitalData.product[iP].cmsIdentifier!="undefined"&&digitalData.product[iP].cmsIdentifier!="")prodString+=";"+digitalData.product[iP].cmsIdentifier+","}return prodString}else if(typeof window.sc_application_product!=
"undefined")return";"+window.sc_application_product}catch(err){return""}}.call(this);s.prop50="D\x3devents";s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,
"");else return""}else return""}catch(err){return""}}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,prop33,products,prop50,eVar56,eVar28";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=
","+function anon(){return"event1,event134"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4044939,767648);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - application-form2-start",function(){s.events="";s.events+=""+function anon(){try{var uniqueReference="";uniqueReference=s_parseDataLayer("uniqueReference");var eventString="";if(uniqueReference!="unknown uniqueReference"&&uniqueReference!==""&&/(Home|Home Loan|Car|Landlord|Caravan Trailer) Insurance Application|Travel Insurance/i.test(s_parseDataLayer("name"))){uniqueReference=
uniqueReference.replace(/\-/g,"");eventString="event1,event12:"+uniqueReference}else eventString="event1,event12";return eventString}catch(err){return"event1,event12"}}.call(this);s.pageName=function anon(){window.scFormDebug="Form 2 Started - Scenario 99: return unknown";if(typeof s.parseDataLayer("page")!="undefined"&&s.parseDataLayer("page")!="unknown page")if(s.parseDataLayer("name")=="Merchant Onboarding Online Application")if(s.parseDataLayer("page").substring(0,4)==="nab:")return s.parseDataLayer("page")+
":start";else return digitalData.page.pageInfo.pageName+":"+s.parseDataLayer("page").replace(/\s+/g,"-")+":start";else if(s.parseDataLayer("page").substring(0,4)==="nab:"){window.scFormDebug="Form 2 Started - Scenario 1: page is set - full path";return s.parseDataLayer("page").replace(/\s+/g,"-")}else{window.scFormDebug="Form 2 Started - Scenario 1: page is set - append";var this_pageName=digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("page").replace(/\s+/g,"-");if(this_pageName.lastIndexOf("start")==
-1)this_pageName=this_pageName+"-start";return this_pageName}else if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName"){if(typeof s.parseDataLayer("section")!="undefined"){window.scFormDebug="Form 2 Started - Scenario 2: join pageName and section";return s.parseDataLayer("pageName")+":"+s.parseDataLayer("section")}else{window.scFormDebug="Form 2 Started - Scenario 3: return pageName";return s.parseDataLayer("pageName")}return"unknown page name"}else try{return digitalData.page.pageInfo.pageName+
"-start"}catch(e){return"unknown page name"}}.call(this);s.eVar20=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-1];if(lastEventObject.data["user"].type)return lastEventObject.data["user"].type;else return""}else return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");
for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop66=function anon(){var products=s.parseDataLayer("product");window.sc_products="";if(products instanceof Array){for(var i=0;i<products.length;i++)if(typeof products[i].productInfo!="undefined"&&typeof products[i].productInfo.productName!="undefined")window.sc_products+=products[i].productInfo.productName+
",";else if(typeof products[i].productId!="undefined")window.sc_products+=products[i].productId+",";return window.sc_products}else if(typeof products=="object"&&typeof products.products=="object")for(var i=0;i<products.products.length;i++){if(typeof products.products[i].productId!="undefined")window.sc_products+=products.products[i].productId+","}else return""}.call(this);s.list3="D\x3dc66";s.eVar72=function anon(){if(typeof window.scFormDebugOverride!="undefined")return window.scFormDebugOverride;
else if(typeof window.scFormDebug!="undefined")return window.scFormDebug;else return""}.call(this);s.eVar24="Website";s.products=function anon(){try{var products=s.parseDataLayer("product");var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof products=="object"&&typeof products.products=="object"){var productElement="productId";if(/merchant and payments/i.test(s.parseDataLayer("name")))productElement="cmsIdentifier";if(productElement)for(var i=0;i<products.products.length;i++)if(typeof products.products[i][productElement]!=
"undefined")window.sc_products+=";"+products.products[i][productElement]+",";return window.sc_products}else if(/merchant and payments/i.test(s.parseDataLayer("name"))){var plan=s.Util.getQueryParam("products");if(plan!="")window.sc_products=";"+plan;return window.sc_products}else if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!==
"")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";else if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")window.sc_products+=";"+productArray[i]["product-id"]+",";return window.sc_products}else if(typeof s_parseDataLayerCustomValue("productName")=="string"){window.sc_products=";"+s_parseDataLayerCustomValue("productName");
return window.sc_products}else return""}catch(err){return""}}.call(this);s.eVar65=function anon(){try{if(s_parseDataLayer("name")=="Small Business Lending Online Application"||s_parseDataLayer("name")=="Small Business Lending Broker Online Application"){var customAction="";var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")customAction=s_parseDataLayer("name")+" : Retrieved Quote";return customAction}else return""}catch(err){return""}}.call(this);
s.eVar86=function anon(){try{if(s_parseDataLayer("name")=="Small Business Lending Online Application"||s_parseDataLayer("name")=="Small Business Lending Broker Online Application"){var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")return quoteId;else return""}else return""}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);
s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars="pageName,eVar20,eVar23,events,prop66,list3,eVar72,eVar24,products,eVar65,eVar86,eVar87,eVar28";s.linkTrackEvents=function anon(){try{var uniqueReference="";uniqueReference=s_parseDataLayer("uniqueReference");var eventString="";if(uniqueReference!="unknown uniqueReference"&&uniqueReference!==""&&/(Home|Home Loan|Car|Landlord|Caravan Trailer) Insurance Application|Travel Insurance/i.test(s_parseDataLayer("name"))){uniqueReference=
uniqueReference.replace(/\-/g,"");eventString="event1,event12:"+uniqueReference}else eventString="event1,event12";return eventString}catch(err){return"event1,event12"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t()})},3804639,374267);
Bootstrapper.bindDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;(function(){window._uxa=window._uxa||[];window._uxa.push(["excludeURLforReplay","https://www.nab.com.au/static/IB/loginBanner/"]);try{if(typeof window.digitalData!=="undefined"){if(typeof window.digitalData.page.pageInfo.pageName!=="undefined")window._uxa.push(["setCustomVariable",1,"Page Name",window.digitalData.page.pageInfo.pageName]);if(typeof window.digitalData.page.pageInfo.siteSection!==
"undefined")window._uxa.push(["setCustomVariable",2,"Site Section",window.digitalData.page.pageInfo.siteSection]);if(typeof window.digitalData.page.pageInfo.siteSubSection!=="undefined")window._uxa.push(["setCustomVariable",3,"Site Subsection",window.digitalData.page.pageInfo.siteSubSection])}if(document.querySelector("#wrapper \x3emain"))document.querySelector("#wrapper \x3emain").setAttribute("data-cs-scroll-container","");if(document.querySelector("digital-forms-mini-app"))setTimeout(function(){var scrollingElem=
document.querySelector("digital-forms-mini-app").shadowRoot.querySelector(".cloinK");if(scrollingElem)scrollingElem.setAttribute("data-cs-scroll-container","")},5E3)}catch(e){}window._uxa.push(["setPath",window.location.pathname+window.location.hash.replace("#","?__")])})()},3914557,663838);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return window.digitalData.event[window.digitalData.event.length-1].data.products.map((product)=>product["product-id"]).join(",")}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - ProductId",
collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62205"})},62205)},-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - virtual-assistant-offered",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar9,prop9,prop65,eVar65,eVar72,prop11,eVar11";_linkTrackEvents+="event22";
_events+="event22";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar9=function anon(){if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined")if(digitalData.page.pageInfo.pageName!="undefined")return digitalData.page.pageInfo.pageName;
else return"";else return""}.call(this);tempObject.prop9="D\x3dv9";tempObject.prop65=function anon(){var prop65=s_parseDataLayer("action")+":Chatbot";return prop65.trim()}.call(this);tempObject.eVar65="D\x3dc65";tempObject.eVar72=function anon(){var widget_type=s.parseDataLayer("participantType");return"widget type: "+widget_type}.call(this);tempObject.prop11="D\x3dg";tempObject.eVar11="D\x3dg";s.tl(this,"o","virtual-assistant-offered",tempObject)})},3783960,533843);